(this["webpackJsonpmy-first-cli-proj"]=this["webpackJsonpmy-first-cli-proj"]||[]).push([[0],{818:function(e,t){},877:function(e,t,n){},878:function(e,t,n){"use strict";n.r(t);var s=n(1),a=n.n(s),r=n(32),c=n.n(r),i=n(18),o=n(17),l=n(129),d=n(338),u=n(22),h=n(2),j={stays:[],currStay:null,filterBy:{city:""}};var p=n(3),b=n.n(p),m=n(9),O=n(69),f=n.n(O),v={query:g,get:function(e,t){return g(e).then((function(e){return e.find((function(e){return e._id===t}))}))},post:function(e,t){return t._id=y(),g(e).then((function(n){return n.push(t),x(e,n),t}))},put:function(e,t){return g(e).then((function(n){var s=n.findIndex((function(e){return e._id===t._id}));return n.splice(s,1,t),x(e,n),t}))},remove:function(e,t){return g(e).then((function(n){var s=n.findIndex((function(e){return e._id===t}));n.splice(s,1),x(e,n)}))},postMany:function(e,t){return g(e).then((function(n){return t=t.map((function(e){return Object(h.a)(Object(h.a)({},e),{},{_id:y()})})),n.push.apply(n,Object(u.a)(t)),x(e,n),n}))}};function g(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1200,s=JSON.parse(localStorage.getItem(e))||[];return t&&(t.userId&&(s=s.filter((function(e){return e.user._id===t.userId}))),t.hostId&&(s=s.filter((function(e){return e.host._id===t.hostId})))),new Promise((function(e,t){setTimeout((function(){e(s)}),n)}))}function x(e,t){localStorage.setItem(e,JSON.stringify(t))}function y(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s=0;s<e;s++)t+=n.charAt(Math.floor(Math.random()*n.length));return t}var w="/api/",S=f.a.create({withCredentials:!0}),k=function(e,t){return P(e,"GET",t)},N=function(e,t){return P(e,"POST",t)},C=function(e,t){return P(e,"PUT",t)},A=function(e,t){return P(e,"DELETE",t)};function P(e){return D.apply(this,arguments)}function D(){return(D=Object(m.a)(b.a.mark((function e(t){var n,s,a,r=arguments;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:"GET",s=r.length>2&&void 0!==r[2]?r[2]:null,e.prev=2,e.next=5,S({url:"".concat(w).concat(t),method:n,data:s,params:"GET"===n?s:null});case 5:return a=e.sent,e.abrupt("return",a.data);case 9:throw e.prev=9,e.t0=e.catch(2),console.log("Had Issues ".concat(n,"ing to the backend, endpoint: ").concat(t,", with data: ").concat(s)),console.dir(e.t0),e.t0.response&&401===e.t0.response.status&&(sessionStorage.clear(),window.location.assign("/")),e.t0;case 15:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}var _=n(339),E=n.n(_),T="user-updated",R=function(){var e=null;return{setup:function(){e=E()("")},on:function(t,n){e.on(t,n)},off:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e&&(n?e.off(t,n):e.removeAllListeners(t))},emit:function(t,n){e.emit(t,n)},terminate:function(){e=null}}}();window.socketService=R,R.setup(),R.on("review-about-you",(function(e){console.log("Review about me!",e)}));var U={makeId:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6,t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s=0;s<e;s++)t+=n.charAt(Math.floor(Math.random()*n.length));return t},makeLorem:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,t=["The sky","above","the port","was","the color of television","tuned","to","a dead channel",".","All","this happened","more or less",".","I","had","the story","bit by bit","from various people","and","as generally","happens","in such cases","each time","it","was","a different story",".","It","was","a pleasure","to","burn"],n="";for(;e>0;)e--,n+=t[Math.floor(Math.random()*t.length)]+" ";return n},getRandomIntInclusive:function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e},delay:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1500;return new Promise((function(t){setTimeout(t,e)}))},formattedDates:function(e){return e?new Date(e).toLocaleDateString("en-GB"):"Add dates"}};var M="loggedinUser",F=null,L={login:function(){return q.apply(this,arguments)},logout:function(){return Y.apply(this,arguments)},signup:function(e){return G.apply(this,arguments)},getLoggedinUser:V,getById:function(e){return I.apply(this,arguments)},update:function(e){return B.apply(this,arguments)}};function I(){return(I=Object(m.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k("user/".concat(t));case 2:return n=e.sent,F=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(){return(B=Object(m.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("this is user storage***********"),e.next=3,C("user/".concat(t._id),t);case 3:return t=e.sent,V()._id===t._id&&W(t),e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(){return(q=Object(m.a)(b.a.mark((function e(){var t,n,s=arguments;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:{},e.next=3,N("auth/login",t);case 3:if(!(n=e.sent)){e.next=6;break}return e.abrupt("return",W(n));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function G(){return(G=Object(m.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N("auth/signup",t);case 2:return n=e.sent,e.abrupt("return",W(n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y(){return(Y=Object(m.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return sessionStorage.removeItem(M),e.next=3,N("auth/logout");case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(e){if(e)return sessionStorage.setItem(M,JSON.stringify(e)),e}function V(){return JSON.parse(sessionStorage.getItem(M)||"null")}Object(m.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:V(),window.addEventListener("storage",Object(m.a)(b.a.mark((function e(){var t,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(F){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,v.query("user");case 4:if(t=e.sent,n=t.find((function(e){return e._id===F._id}))){e.next=8;break}return e.abrupt("return");case 8:F.score!==n.score&&(console.log("Watched user score changed - localStorage updated from another browser"),R.emit(T,n)),F=n;case 10:case"end":return e.stop()}}),e)}))));case 2:case"end":return e.stop()}}),e)})))();var H=L.getLoggedinUser(),K={user:H||null,savedNotifications:[],watchedUser:null,notifiStatus:!1};var $={reviews:[]};var J={isLoading:!1};var X={orders:[],newOrder:{checkIn:"",checkOut:"",guests:{adults:0,kids:0}}};var z={currPage:"",modalPos:null,modalBottom:"",modalLeft:"",relativePos:{left:0,top:0}};var Q=Object(l.b)({stayModule:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,n=arguments.length>1?arguments[1]:void 0,s=t;switch(n.type){case"SET_STAYS":s=Object(h.a)(Object(h.a)({},t),{},{stays:n.stays});break;case"REMOVE_STAY":e=t.stays.filter((function(e){return e._id!==n.stayId})),s=Object(h.a)(Object(h.a)({},t),{},{stays:e});break;case"ADD_STAY":s=Object(h.a)(Object(h.a)({},t),{},{stays:[].concat(Object(u.a)(t.stays),[n.stay])});break;case"UPDATE_STAY":e=t.stays.map((function(e){return e._id===n._id?n:e})),s=Object(h.a)(Object(h.a)({},t),{},{stays:e});break;case"SET_CURR_STAY":s=Object(h.a)(Object(h.a)({},t),{},{currStay:n.currStay});break;case"FILTER_STAYS":s=Object(h.a)(Object(h.a)({},t),{},{filterBy:n.filter})}return s},userModule:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0,n=e;switch(t.type){case"SET_USER":n=Object(h.a)(Object(h.a)({},e),{},{user:t.user});break;case"SET_WATCHED_USER":n=Object(h.a)(Object(h.a)({},e),{},{watchedUser:t.user});break;case"REMOVE_USER":n=Object(h.a)(Object(h.a)({},e),{},{users:e.users.filter((function(e){return e._id!==t.userId}))});break;case"SET_USERS":n=Object(h.a)(Object(h.a)({},e),{},{users:t.users});break;case"LOAD_ORDERS_FROM_USER":n=Object(h.a)(Object(h.a)({},e),{},{orders:t.orders});break;case"REMOVE_ORDER_FROM_USER":n=Object(h.a)(Object(h.a)({},e),{},{orders:e.orders.filter((function(e){return e._id!==t.orderId}))});break;case"ADD_ORDER_TO_USER":n=Object(h.a)(Object(h.a)({},e),{},{orders:[].concat(Object(u.a)(e.orders),[t.order])});break;case"SAVE_STAY_TO_USER":case"REMOVE_STAY_FROM_USER":n=Object(h.a)(Object(h.a)({},e),{},{user:t.user});break;case"SAVE_NOTIFI_TO_USER":n=Object(h.a)(Object(h.a)({},e),{},{user:Object(h.a)(Object(h.a)({},e.user),{},{savedNotifications:[].concat(Object(u.a)(e.user.savedNotifications),[t.notifi])})});break;case"SET_NOTIFI_STATUS":n=Object(h.a)(Object(h.a)({},e),{},{notifiStatus:t.status});break;case"LOAD_USER_STAYS":n=Object(h.a)(Object(h.a)({},e),{},{savedStays:Object(u.a)(t.stays)})}return n},systemModule:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"LOADING_START":return Object(h.a)(Object(h.a)({},e),{},{isLoading:!0});case"LOADING_DONE":return Object(h.a)(Object(h.a)({},e),{},{isLoading:!1});default:return e}},reviewModule:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"SET_REVIEWS":return Object(h.a)(Object(h.a)({},e),{},{reviews:t.reviews});case"ADD_REVIEW":return Object(h.a)(Object(h.a)({},e),{},{reviews:[].concat(Object(u.a)(e.reviews),[t.review])});case"REMOVE_REVIEW":return Object(h.a)(Object(h.a)({},e),{},{reviews:e.reviews.filter((function(e){return e._id!==t.reviewId}))});case"UPDATE_REVIEW":return Object(h.a)(Object(h.a)({},e),{},{reviews:e.reviews.map((function(e){return e._id===t.review._id?t.review:e}))});default:return e}},orderModule:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;switch(t.type){case"LOAD_ORDERS":case"SET_ORDER":n=Object(h.a)(Object(h.a)({},e),{},{orders:t.orders});break;case"ADD_ORDER":n=Object(h.a)(Object(h.a)({},e),{},{orders:[t.order].concat(Object(u.a)(e.orders))});break;case"REMOVE_ORDER":n=Object(h.a)(Object(h.a)({},e),{},{orders:e.orders.filter((function(e){return e._id!==t.orderId}))});break;case"UPDATE_ORDER":case"UPDATE_ORDER_STATUS":n=Object(h.a)(Object(h.a)({},e),{},{orders:e.orders.map((function(e){return e._id===t.order._id?t.order:e}))});break;case"NEW_ORDER":n=Object(h.a)(Object(h.a)({},e),{},{newOrder:t.newOrder});break;case"SET_GUESTS":n=Object(h.a)(Object(h.a)({},e),{},{newOrder:Object(h.a)({},t.order)})}return window.orderState=n,n},pageModule:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0,n=e;switch(t.type){case"SET_PAGE":n=Object(h.a)(Object(h.a)({},e),{},{currPage:t.currPage});break;case"SET_MODAL_POS":n=Object(h.a)(Object(h.a)({},e),{},{modalPos:t.modalPos});break;case"SET_POS":n=Object(h.a)(Object(h.a)({},e),{},{relativePos:Object(h.a)({},t.relativePos)})}return n}}),Z=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||l.c,ee=Object(l.d)(Q,Z(Object(l.a)(d.a))),te=n(6),ne=n(8),se=n(11),ae=n(10),re=n(24),ce=[],ie=(f.a.create({withCredentials:!0}),{query:oe,getById:function(e){return k("stay/".concat(e))},save:function(e){return ue.apply(this,arguments)},remove:function(e){return A("stay/".concat(e))},subscribe:function(e){ce.push(e)},getUserStays:function(e){return de.apply(this,arguments)},queryFront:function(e,t){var n=e;t.stayType&&(n=n.filter((function(e){return e.stayType===t.stayType})));t.type&&(n=n.filter((function(e){return e.type===t.type})));(t.price.minPrice>0||t.price.maxPrice<1/0)&&(n=n.filter((function(e){return e.price>t.price.minPrice&&e.price<t.price.maxPrice})));return n=n.filter((function(e){console.log("curr stay: ",e);var n=!0;for(var s in t.amenities)t.amenities[s]&&!e.amenities.includes(s)&&(n=!1);return n})),console.log("staysToDisplay: ",n),t.stayType||t.type||t.price.minPrice||!(t.price.maxPrice>1e5)||Object.values(t.amenities).includes(!0)?n:e}});function oe(){return le.apply(this,arguments)}function le(){return(le=Object(m.a)(b.a.mark((function e(){var t,n=arguments;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},e.abrupt("return",k("stay",t));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function de(){return(de=Object(m.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.query("user",t);case 2:return n=e.sent,e.abrupt("return",Promise.resolve(n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ue(){return(ue=Object(m.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t._id){e.next=4;break}return e.abrupt("return",C("stay/".concat(t._id),t));case 4:return e.next=6,L.getLoggedinUser();case 6:return n=e.sent,t.host={fullname:n.fullname,_id:n._id,imgUrl:n.imgUrl},e.abrupt("return",N("stay",t));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}window.cs=ie,window.addEventListener("storage",(function(){oe().then((function(e){!function(e){console.log("Notifying Listeners"),ce.forEach((function(t){return t(e)}))}(e)}))}));var he={on:function(e,t){var n=function(e){var n=e.detail;t(n)};return window.addEventListener(e,n),function(){window.removeEventListener(e,n)}},emit:function(e,t){window.dispatchEvent(new CustomEvent(e,{detail:t}))}};function je(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";he.emit("show-user-msg",{txt:e,type:t})}function pe(e){je(e,"success")}function be(e){je(e,"danger")}function me(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(){var t=Object(m.a)(b.a.mark((function t(n){var s;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ie.query(e);case 3:return s=t.sent,n({type:"SET_STAYS",stays:s}),t.abrupt("return",s);case 8:t.prev=8,t.t0=t.catch(0),be("Cannot load stays"),console.log("Cannot load stays",t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()}function Oe(){}function fe(e){return function(t,n){ie.remove(e).then((function(){console.log("Deleted Succesfully!"),t({type:"REMOVE_STAY",stayId:e}),pe("Stay removed")})).catch((function(e){be("Cannot remove stay"),console.log("Cannot remove stay",e)}))}}function ve(e){return function(t){ie.save(e).then((function(e){console.log("Added Stay",e),t({type:"ADD_STAY",stay:e}),pe("Stay added")})).catch((function(e){be("Cannot add stay"),console.log("Cannot add stay",e)}))}}function ge(e){return function(){var t=Object(m.a)(b.a.mark((function t(n){var s;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ie.save(e);case 3:return s=t.sent,n({type:"UPDATE_STAY",updatedStay:s}),t.abrupt("return",e);case 8:t.prev=8,t.t0=t.catch(0),be("Cannot update stay"),console.log("Cannot  update stay",t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()}function xe(e){return function(){var t=Object(m.a)(b.a.mark((function t(n){var s;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ie.getById(e);case 3:return s=t.sent,n({type:"SET_CURR_STAY",currStay:s}),t.abrupt("return",s);case 8:t.prev=8,t.t0=t.catch(0),be("Cannot onSetCurrStay "),console.log("Cannot  onSetCurrStay ",t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()}function ye(e){return function(){var t=Object(m.a)(b.a.mark((function t(n){var s;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e;case 3:s=t.sent,n({type:"SET_PAGE",currPage:s}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("currPage : err ",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}function we(e){return function(){var t=Object(m.a)(b.a.mark((function t(n){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{n({type:"SET_MODAL_POS",modalPos:e})}catch(s){console.log("modalPos : err ",s)}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}function Se(e){return function(){var t=Object(m.a)(b.a.mark((function t(n){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{n({type:"SET_POS",relativePos:e})}catch(s){console.log("modalPos : err ",s)}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}window.myBus=he,window.showUserMsg=je;var ke=n(16),Ne=n(19),Ce=n(340),Ae=n.n(Ce),Pe=(n(423),n(424),n(0)),De=function(e){Object(se.a)(n,e);var t=Object(ae.a)(n);function n(){return Object(te.a)(this,n),t.apply(this,arguments)}return Object(ne.a)(n,[{key:"render",value:function(){var e=this.props.stay;return Object(Pe.jsx)("div",{className:"container",children:Object(Pe.jsxs)(Ae.a,Object(h.a)(Object(h.a)({className:"main-slider"},{dots:!0,infinite:!0,speed:500,slidesToShow:1,slidesToScroll:1}),{},{children:[Object(Pe.jsx)("div",{className:"slider-img-div",children:Object(Pe.jsx)("img",{className:"slider-img",src:e.imgUrls[0]})}),Object(Pe.jsx)("div",{className:"slider-img-div",children:Object(Pe.jsx)("img",{className:"slider-img",src:e.imgUrls[1]})}),Object(Pe.jsx)("div",{className:"slider-img-div",children:Object(Pe.jsx)("img",{className:"slider-img",src:e.imgUrls[2]})}),Object(Pe.jsx)("div",{className:"slider-img-div",children:Object(Pe.jsx)("img",{className:"slider-img",src:e.imgUrls[3]})}),Object(Pe.jsx)("div",{className:"slider-img-div",children:Object(Pe.jsx)("img",{className:"slider-img",src:e.imgUrls[4]})})]}))})}}]),n}(s.Component),_e=[],Ee=(f.a.create({withCredentials:!0}),{add:function(e){return Ue.apply(this,arguments)},query:Te,remove:function(e){return A("order/".concat(e))},subscribe:function(e){_e.push(e)},getOrders:function(e){return Fe.apply(this,arguments)},updateOrder:function(e){return Le.apply(this,arguments)},getById:function(e){return k("order/".concat(e))},newOrder:function(e){return Me.apply(this,arguments)}});function Te(e,t){return Re.apply(this,arguments)}function Re(){return(Re=Object(m.a)(b.a.mark((function e(t,n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",k("order",{userId:t,isHost:n}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ue(){return(Ue=Object(m.a)(b.a.mark((function e(t){var n,s,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.getLoggedinUser();case 2:return n=e.sent,s={_id:n._id,fullname:n.fullname,imgUrl:n.imgUrl},a=Object(h.a)(Object(h.a)({},t),{},{user:s}),e.abrupt("return",N("order",a));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Me(){return(Me=Object(m.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.getLoggedinUser();case 2:return e.sent,console.log("new order in service",t),n=t,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fe(){return(Fe=Object(m.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={userId:t},e.abrupt("return",k("order",n));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Le(){return(Le=Object(m.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",C("order",t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ie(e){return function(){var t=Object(m.a)(b.a.mark((function t(n){var s;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,L.login(e);case 3:return s=t.sent,n({type:"SET_USER",user:s}),t.abrupt("return",s);case 8:t.prev=8,t.t0=t.catch(0),be("Cannot login"),console.log("Cannot login",t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()}function Be(e){return function(){var t=Object(m.a)(b.a.mark((function t(n){var s,a,r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.savedNotifications=[],console.log("!!!",e),s=U.getRandomIntInclusive(1,100),a=s>50?"men":"women",e.imgUrl="https://randomuser.me/api/portraits/".concat(a,"/").concat(s,".jpg"),t.next=8,L.signup(e);case 8:return r=t.sent,n({type:"SET_USER",user:r}),t.abrupt("return",r);case 13:t.prev=13,t.t0=t.catch(0),be("Cannot signup"),console.log("Cannot signup",t.t0);case 17:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e){return t.apply(this,arguments)}}()}function qe(e){return function(){var t=Object(m.a)(b.a.mark((function t(n){var s;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,console.log("this is on update",e),t.next=4,L.update(e);case 4:return s=t.sent,console.log("user in update",s),n({type:"SET_USER",user:s}),t.abrupt("return",s);case 10:t.prev=10,t.t0=t.catch(0),be("Cannot signup"),console.log("Cannot signup",t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()}function Ge(){return function(){var e=Object(m.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L.getLoggedinUser();case 3:return n=e.sent,t({type:"SET_USER",user:n}),e.abrupt("return",n);case 8:e.prev=8,e.t0=e.catch(0),be("No user found"),console.log("No user found",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()}function Ye(e){return function(){var t=Object(m.a)(b.a.mark((function t(n){var s,a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,s=L.getLoggedinUser(),a=s.savedStays.filter((function(t){return t!==e})),t.next=5,L.update(Object(h.a)(Object(h.a)({},s),{},{savedStays:a}));case 5:pe("saved stay"),n({type:"REMOVE_STAY_FROM_USER",user:s}),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),be("Cannot save stay"),console.log("Cannot save stay",t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()}function We(e){return function(){var t=Object(m.a)(b.a.mark((function t(n){var s;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("!!!!!",e),t.prev=1,t.next=4,L.getLoggedinUser();case 4:return s=t.sent,(s=Object(h.a)(Object(h.a)({},s),{},{savedNotifications:[].concat(Object(u.a)(s.savedNotifications),[e])})).savedNotifications.push(e),t.next=9,L.update(s);case 9:n({type:"SET_USER",user:s}),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(1),console.log("Cannot save notifi",t.t0);case 15:case"end":return t.stop()}}),t,null,[[1,12]])})));return function(e){return t.apply(this,arguments)}}()}window.addEventListener("storage",(function(){Te().then((function(e){!function(e){_e.forEach((function(t){return t(e)}))}(e)}))}));n.p;var Ve=n.p+"static/media/loader.3e80efae.svg";function He(){return Object(Pe.jsx)("img",{className:"loader",src:Ve,alt:""})}var Ke=function(e){Object(se.a)(n,e);var t=Object(ae.a)(n);function n(){var e;Object(te.a)(this,n);for(var s=arguments.length,a=new Array(s),r=0;r<s;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))).state={isSaved:!1},e.toggleSavedStay=function(t){console.log("toggleSavedStay"),console.log(" isSaved is",e.state.isSaved),t.preventDefault(),t.stopPropagation(),e.state.isSaved?e.saveStay(t):e.removeStay(t)},e.removeStay=function(){var t=Object(m.a)(b.a.mark((function t(n){var s;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),n.stopPropagation(),s=e.props.stay,t.next=5,L.getLoggedinUser();case 5:return t.sent,t.next=8,e.props.removeStayFromUser(s._id);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.saveStay=function(){var t=Object(m.a)(b.a.mark((function t(n){var s;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),n.stopPropagation(),s=e.props.stay,t.next=5,L.getLoggedinUser();case 5:return t.sent,t.next=8,e.props.saveStayToUser(s._id);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.getReviewsAverage=function(e){return e&&e.length?(e.reduce((function(e,t){return e+t.ratings.avg}),0)/e.length).toFixed(2):0},e}return Object(ne.a)(n,[{key:"componentDidMount",value:function(){var e=Object(m.a)(b.a.mark((function e(){var t,n,s=this;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.stay,e.next=3,L.getLoggedinUser();case 3:(n=e.sent)&&n.savedStays.forEach((function(e){n.savedStays.includes(t._id)&&s.setState({isSaved:!0})}));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props.stay,n=this.state.isSaved;return Object(Pe.jsx)("div",{className:"stay-preview",children:Object(Pe.jsxs)("div",{className:"inner-stay-preview",children:[Object(Pe.jsx)("button",{className:"stay-preview-save-btn ".concat(n?"on":"off"),onClick:function(t){t.preventDefault(),t.stopPropagation(),e.setState({isSaved:!n},(function(){console.log("isSaved after setstate***"),e.toggleSavedStay(t)}))},children:Object(Pe.jsx)(ke.a,{icon:Ne.f})}),Object(Pe.jsx)(De,{stay:t}),Object(Pe.jsxs)("div",{className:"preview-content",children:[Object(Pe.jsxs)("span",{className:"stay-rate",children:[Object(Pe.jsx)(ke.a,{icon:Ne.l}),t.avgReviewRating&&t.reviews&&Object(Pe.jsxs)("span",{className:"prev-rev-txt",children:[t.reviews&&t.reviews.length?this.getReviewsAverage(t.reviews):0," ","( ",t.reviews.length," )"]})]}),Object(Pe.jsxs)("p",{children:[t.type," \u2027 ",t.city," "]}),Object(Pe.jsxs)("p",{className:"title-prev",children:[" ",t.title]}),Object(Pe.jsxs)("p",{children:[Object(Pe.jsxs)("span",{className:"price-prev",children:["$",t.price]})," / night"]})]})]})})}}]),n}(a.a.Component);var $e={loadStays:me,filterStays:Oe,changePage:ye,saveStayToUser:function(e){return function(){var t=Object(m.a)(b.a.mark((function t(n){var s;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,console.log("stayId saveStayToUser",e),s=L.getLoggedinUser(),console.log("user saveStayToUser1",s),s.savedStays.push(e),t.next=7,L.update(s);case 7:pe("saved stay"),n({type:"SAVE_STAY_TO_USER",user:s}),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(0),be("Cannot save stay"),console.log("Cannot save stay",t.t0);case 15:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e){return t.apply(this,arguments)}}()},removeStayFromUser:Ye},Je=Object(o.b)((function(e){return{stays:e.stayModule.stays,savedStays:e.userModule.stays}}),$e)(Ke),Xe=function(e){Object(se.a)(n,e);var t=Object(ae.a)(n);function n(){var e;Object(te.a)(this,n);for(var s=arguments.length,a=new Array(s),r=0;r<s;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))).setStay=function(){var t=Object(m.a)(b.a.mark((function t(n){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.onSetCurrStay(n);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(ne.a)(n,[{key:"render",value:function(){var e=this,t=this.props.stays;return t&&t.length?(console.log("stay in stayList",t),Object(Pe.jsx)("div",{className:"stay-list",children:t.map((function(t){return Object(Pe.jsx)("span",{onClick:function(){return e.setStay(t._id)},children:Object(Pe.jsx)(i.b,{to:"/stay/".concat(t._id),children:Object(Pe.jsx)(Je,{stay:t},t._id)},t._id)},t._id)}))})):Object(Pe.jsx)(He,{})}}]),n}(a.a.Component),ze={onSetCurrStay:xe},Qe=Object(o.b)((function(e){return{}}),ze)(Xe),Ze=n(15);n(429),n(23);function et(e){return tt.apply(this,arguments)}function tt(){return(tt=Object(m.a)(b.a.mark((function e(t){var n,s,a,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"dohqnraie","n6mcjriy",n="https://api.cloudinary.com/v1_1/".concat("dohqnraie","/image/upload"),(s=new FormData).append("file",t.target.files[0]),s.append("upload_preset","n6mcjriy"),e.prev=6,e.next=9,fetch(n,{method:"POST",body:s});case 9:return a=e.sent,e.next=12,a.json();case 12:return r=e.sent,e.abrupt("return",r.url);case 16:e.prev=16,e.t0=e.catch(6),console.error(e.t0);case 19:case"end":return e.stop()}}),e,null,[[6,16]])})))).apply(this,arguments)}var nt=n(46),st=function(e){Object(se.a)(n,e);var t=Object(ae.a)(n);function n(){var e;Object(te.a)(this,n);for(var s=arguments.length,a=new Array(s),r=0;r<s;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))).state={stay:{title:"",price:0,type:"Apartment",capacity:"",city:"",desc:"",stayType:"Entire place",imgUrls:[],amenities:[],avgReviewRating:4.9,loc:{country:"France",countryCode:"FR",address:"",lat:48.864716,lng:2.349014}},tv:!1,wifi:!1,kitchen:!1,smokingAllowed:!1,petsAllowed:!1,cookingBasics:!1},e.handleChange=function(t){var n=t.target.name,s=t.target.value;e.setState({stay:Object(h.a)(Object(h.a)({},e.state.stay),{},Object(Ze.a)({},n,s))})},e.handleAddressChange=function(t){var n=t.target.name,s=t.target.value;e.setState({stay:Object(h.a)(Object(h.a)({},e.state.stay),{},{loc:Object(h.a)(Object(h.a)({},e.state.stay.loc),{},Object(Ze.a)({},n,s))})},(function(){console.log("updated address:",e.state.stay.loc)}))},e.handleChangeArray=function(t){t.target.name;var n=t.target.value;e.setState(Object(h.a)(Object(h.a)({},e.state),{},{amenities:[n]}))},e.handleImgChange=function(){var t=Object(m.a)(b.a.mark((function t(n){var s,a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("inHandelImg-start",e.state),n.target.name,t.prev=2,t.next=5,et(n);case 5:s=t.sent,(a=e.state.stay.imgUrls).push(s),e.setState((function(e){return Object(h.a)(Object(h.a)({},e.stay),{},{imgUrls:a})})),console.log("inHandelImg",e.state),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(2),console.log(t.t0);case 15:case"end":return t.stop()}}),t,null,[[2,12]])})));return function(e){return t.apply(this,arguments)}}(),e.handleChangeSelect=function(t){var n=t.target.name,s=t.target.value;e.setState((function(e){return{stay:Object(h.a)(Object(h.a)({},e.stay),{},Object(Ze.a)({},n,s))}}),(function(){console.log(e.state.stay)}))},e.handleAmenityChange=function(t){switch(t.target.name){case"tv":e.setState({tv:!e.state.tv});break;case"kitchen":e.setState({kitchen:!e.state.kitchen});break;case"wifi":e.setState({wifi:!e.state.wifi});break;case"petsAllowed":e.setState({petsAllowed:!e.state.petsAllowed});break;case"cookingBasics":e.setState({cookingBasics:!e.state.cookingBasics});break;case"smokingAllowed":e.setState({smokingAllowed:!e.state.smokingAllowed})}},e.onAddStay=function(t){t.preventDefault();var n=[];e.state.tv&&n.push("TV"),e.state.kitchen&&n.push("Kitchen"),e.state.wifi&&n.push("Wifi"),e.state.petsAllowed&&n.push("Pets allowed"),e.state.cookingBasics&&n.push("Cooking basics"),e.state.smokingAllowed&&n.push("Smoking allowed"),console.log("stayin addStay !",e.state),e.setState((function(e){return{stay:Object(h.a)(Object(h.a)({},e.stay),{},{amenities:n})}}),(function(){e.props.onAddStay(e.state.stay)}))},e.onEditStay=function(t){if(t.preventDefault(),e.state.stay.title&&e.state.stay.price&&e.state.stay.type){var n=[];e.state.tv&&n.push("TV"),e.state.kitchen&&n.push("Kitchen"),e.state.wifi&&n.push("Wifi"),e.state.petsAllowed&&n.push("Pets allowed"),e.state.cookingBasics&&n.push("Cooking basics"),e.state.smokingAllowed&&n.push("Smoking allowed"),e.setState((function(e){return{stay:Object(h.a)(Object(h.a)({},e.stay),{},{amenities:n})}}),(function(){e.props.onUpdateStay(e.state.stay)}))}},e.isChecked=function(){},e.clearState=function(){e.setState(Object(h.a)({},{stay:{title:"",price:0,type:"Apartment",capacity:"",city:"",desc:"",stayType:"Entire place",imgUrls:[],amenities:[],loc:{country:"United States",countryCode:"US",address:"New York, United States",lat:40.66696007901832,lng:-73.93152486102896}},tv:!1,wifi:!1,kitchen:!1,smokingAllowed:!1,petsAllowed:!1,cookingBasics:!1}))},e}return Object(ne.a)(n,[{key:"componentDidMount",value:function(){if(this.props.stay){var e=this.props.stay[0];e.amenities.length>0&&e.amenities.includes("TV")&&this.setState({tv:!0}),e.amenities.length>0&&e.amenities.includes("Wifi")&&this.setState({wifi:!0}),e.amenities.length>0&&e.amenities.includes("Kitchen")&&this.setState({kitchen:!0}),e.amenities.length>0&&e.amenities.includes("Smoking allowed")&&this.setState({smokingAllowed:!0}),e.amenities.length>0&&e.amenities.includes("Pets allowed")&&this.setState({petsAllowed:!0}),e.amenities.length>0&&e.amenities.includes("Cooking basics")&&this.setState({cookingBasics:!0}),this.setState({stay:this.props.stay[0]})}}},{key:"render",value:function(){var e=this.state.stay,t=e.title,n=e.price,s=e.type,a=(e.imgUrls,e.amenities,e.capacity),r=e.city,c=e.stayType,i=e.desc,o=this.state,l=o.tv,d=o.kitchen,u=o.wifi,h=o.smokingAllowed,j=o.cookingBasics,p=o.petsAllowed,b=this.props,m=b.isEdit,O=(b.stay,b.user);return Object(Pe.jsxs)("div",{children:[!m&&Object(Pe.jsxs)("form",{className:"add-stay",onSubmit:this.onAddStay,children:[Object(Pe.jsxs)("div",{className:"add-stay-form-header",children:[Object(Pe.jsx)("p",{className:"add-stay-title",children:Object(Pe.jsx)("input",{type:"text",name:"title",id:"stay-title",value:t,onChange:this.handleChange,required:!0,placeholder:"Stay name"})}),Object(Pe.jsxs)("div",{className:"stay-short-info",children:[Object(Pe.jsxs)("div",{className:"stay-short-info-details",children:[Object(Pe.jsx)("span",{className:"stay-rate",children:Object(Pe.jsx)(ke.a,{className:"star",icon:Ne.l})}),Object(Pe.jsx)("span",{children:"new"})," ",Object(Pe.jsx)("p",{children:"( 0 reviews )"}),Object(Pe.jsx)("span",{className:"span-dot",children:"\xb7"}),Object(Pe.jsxs)("p",{children:["city:"," ",Object(Pe.jsx)("input",{type:"city",name:"city",value:r,onChange:this.handleChange,id:"stay-city",required:!0})]}),Object(Pe.jsxs)("p",{children:["address:"," ",Object(Pe.jsx)("input",{type:"address",name:"address",value:this.state.stay.loc.address,onChange:this.handleAddressChange,id:"stay-address",required:!0})]})]}),Object(Pe.jsxs)("div",{className:"action-btns",children:[Object(Pe.jsxs)("a",{children:[Object(Pe.jsx)(ke.a,{className:"action-icon",icon:Ne.d}),"Share"]}),Object(Pe.jsxs)("a",{children:[Object(Pe.jsx)(ke.a,{className:"action-icon",icon:nt.c}),"Save"]})]})]})]}),Object(Pe.jsxs)("section",{className:"stay-gallery",children:[Object(Pe.jsx)("div",{className:"img-upload-container",style:{backgroundImage:"url(".concat(this.state.stay.imgUrls[0],")")},children:Object(Pe.jsxs)("label",{className:"img-upload-label",children:[Object(Pe.jsx)("p",{children:"Upload Image"}),Object(Pe.jsx)("input",{type:"file",onChange:this.handleImgChange,name:"img",placeholder:"Enter img",id:"img",className:"img-upload-input"})]})}),Object(Pe.jsx)("div",{className:"img-upload-container",style:{backgroundImage:"url(".concat(this.state.stay.imgUrls[1],")")},children:Object(Pe.jsxs)("label",{className:"img-upload-label",children:[Object(Pe.jsx)("p",{children:"Upload Image"}),Object(Pe.jsx)("input",{type:"file",onChange:this.handleImgChange,name:"img",placeholder:"Enter img",id:"img",className:"img-upload-input"})]})}),Object(Pe.jsx)("div",{className:"img-upload-container",style:{backgroundImage:"url(".concat(this.state.stay.imgUrls[2],")")},children:Object(Pe.jsxs)("label",{className:"img-upload-label",children:[Object(Pe.jsx)("p",{children:"Upload Image"}),Object(Pe.jsx)("input",{type:"file",onChange:this.handleImgChange,name:"img",placeholder:"Enter img",id:"img",className:"img-upload-input"})]})}),Object(Pe.jsx)("div",{className:"img-upload-container",style:{backgroundImage:"url(".concat(this.state.stay.imgUrls[3],")")},children:Object(Pe.jsxs)("label",{className:"img-upload-label",children:[Object(Pe.jsx)("p",{children:"Upload Image"}),Object(Pe.jsx)("input",{type:"file",onChange:this.handleImgChange,name:"img",placeholder:"Enter img",id:"img",className:"img-upload-input"})]})}),Object(Pe.jsx)("div",{className:"img-upload-container",style:{backgroundImage:"url(".concat(this.state.stay.imgUrls[4],")")},children:Object(Pe.jsxs)("label",{className:"img-upload-label",children:[Object(Pe.jsx)("p",{children:"Upload Image"}),Object(Pe.jsx)("input",{type:"file",onChange:this.handleImgChange,name:"img",placeholder:"Enter img",id:"img",className:"img-upload-input"})]})})]}),Object(Pe.jsxs)("section",{className:"add-stay-info-container",children:[Object(Pe.jsxs)("div",{className:"add-stay-info-details",children:[Object(Pe.jsx)("div",{className:"add-stay-info-details-header",children:Object(Pe.jsxs)("div",{children:[Object(Pe.jsx)("span",{children:"Capacity:"})," ",Object(Pe.jsx)("input",{type:"number",name:"capacity",value:a,onChange:this.handleChange,required:!0}),Object(Pe.jsx)("span",{children:"Stay Type:"}),Object(Pe.jsxs)("select",{name:"stayType",onChange:this.handleChangeSelect,children:[Object(Pe.jsx)("option",{value:"Entire place",children:"Entire place"}),Object(Pe.jsx)("option",{value:"Private room",children:"Private room"})]}),Object(Pe.jsx)("span",{children:"Property Type:"}),Object(Pe.jsxs)("select",{name:"type",onChange:this.handleChangeSelect,value:s,children:[Object(Pe.jsx)("option",{value:"Apartment",children:"Apartment"}),Object(Pe.jsx)("option",{value:"Villa",children:"Villa"}),Object(Pe.jsx)("option",{value:"Studio",children:"Studio"}),Object(Pe.jsx)("option",{value:"Loft",children:"Loft"}),Object(Pe.jsx)("option",{value:"Room",children:"Room"})]})]})}),Object(Pe.jsxs)("div",{className:"stay-features-container",children:[Object(Pe.jsxs)("div",{className:"stay-features-details",children:[Object(Pe.jsx)(ke.a,{icon:Ne.g}),Object(Pe.jsxs)("div",{children:[Object(Pe.jsx)("h3",{children:"Entire Place"}),Object(Pe.jsx)("h4",{children:"You'll have the place to yourself."})]})]}),Object(Pe.jsxs)("div",{className:"stay-features-details",children:[Object(Pe.jsx)(ke.a,{icon:Ne.b}),Object(Pe.jsxs)("div",{children:[Object(Pe.jsx)("h3",{children:"House Rules"}),Object(Pe.jsxs)("h4",{children:[" ","This place isn\u2019t suitable for children under 12 and the host doesn\u2019t allow pets."]})]})]}),Object(Pe.jsxs)("div",{className:"stay-features-details",children:[Object(Pe.jsx)(ke.a,{icon:Ne.i}),Object(Pe.jsxs)("div",{children:[Object(Pe.jsxs)("h3",{children:[O.fullname," is A Superhost"]}),Object(Pe.jsxs)("h4",{children:[" ","Superhosts are experienced, highly rated hosts who are committed to providing great stays for guests."]})]})]}),Object(Pe.jsxs)("div",{className:"stay-features-details",children:[Object(Pe.jsx)(ke.a,{icon:Ne.c}),Object(Pe.jsxs)("div",{children:[Object(Pe.jsx)("h3",{children:"Wifi"}),Object(Pe.jsx)("h4",{children:"Guests often search for this popular amenity"})]})]})]}),Object(Pe.jsxs)("div",{className:"stay-desc-container",children:[Object(Pe.jsx)("p",{children:"Description"}),Object(Pe.jsx)("textarea",{value:i,name:"desc",onChange:this.handleChange,className:"desc-textarea"})]}),Object(Pe.jsxs)("div",{className:"add-stay-amenities",children:[Object(Pe.jsx)("p",{children:"Amenities"}),Object(Pe.jsxs)("div",{className:"add-stay-amenities-item",children:[Object(Pe.jsx)("input",{type:"checkbox",name:"tv",checked:l,onChange:this.handleAmenityChange}),Object(Pe.jsx)("label",{for:"TV",children:"TV"})]}),Object(Pe.jsxs)("div",{className:"add-stay-amenities-item",children:[Object(Pe.jsx)("input",{type:"checkbox",name:"wifi",checked:u,onChange:this.handleAmenityChange}),Object(Pe.jsx)("label",{for:"Wifi",children:"Wifi"})]}),Object(Pe.jsxs)("div",{className:"add-stay-amenities-item",children:[Object(Pe.jsx)("input",{type:"checkbox",name:"kitchen",checked:d,onChange:this.handleAmenityChange}),Object(Pe.jsx)("label",{for:"Kitchen",children:"Kitchen"})]}),Object(Pe.jsxs)("div",{className:"add-stay-amenities-item",children:[Object(Pe.jsx)("input",{type:"checkbox",name:"smokingAllowed",checked:h,onChange:this.handleAmenityChange}),Object(Pe.jsx)("label",{for:"Smoking allowed",children:"Smoking allowed"})]}),Object(Pe.jsxs)("div",{className:"add-stay-amenities-item",children:[Object(Pe.jsx)("input",{type:"checkbox",name:"petsAllowed",checked:p,onChange:this.handleAmenityChange}),Object(Pe.jsx)("label",{for:"Pets allowed",children:"Pet allowed"})]}),Object(Pe.jsxs)("div",{className:"add-stay-amenities-item",children:[Object(Pe.jsx)("input",{type:"checkbox",name:"cookingBasics",checked:j,onChange:this.handleAmenityChange}),Object(Pe.jsx)("label",{for:"Cooking basics",children:"Cooking basics"})]})]})]}),Object(Pe.jsxs)("div",{className:"add-stay-price-container",children:[Object(Pe.jsx)("span",{children:"Price:"}),Object(Pe.jsx)("input",{type:"number",name:"price",value:n,onChange:this.handleChange,required:!0}),Object(Pe.jsx)("span",{children:"/ night"})]})]}),Object(Pe.jsx)("button",{className:"add-stay-save-btn",type:"submit",children:"Enter!"})]}),m&&Object(Pe.jsxs)("form",{className:"add-stay",onSubmit:this.onEditStay,children:[Object(Pe.jsxs)("div",{className:"add-stay-form-header",children:[Object(Pe.jsx)("p",{className:"add-stay-title",children:Object(Pe.jsx)("input",{type:"text",name:"title",id:"stay-title",value:t,onChange:this.handleChange,required:!0,placeholder:"Stay name"})}),Object(Pe.jsxs)("div",{className:"stay-short-info",children:[Object(Pe.jsxs)("div",{className:"stay-short-info-details",children:[Object(Pe.jsx)("span",{className:"stay-rate",children:Object(Pe.jsx)(ke.a,{className:"star",icon:Ne.l})}),Object(Pe.jsx)("span",{children:"new"})," ",Object(Pe.jsx)("p",{children:"( 0 reviews )"}),Object(Pe.jsx)("span",{className:"span-dot",children:"\u25cf"}),Object(Pe.jsxs)("p",{children:["address:"," ",Object(Pe.jsx)("input",{type:"city",name:"city",value:r,onChange:this.handleChange,id:"stay-city",required:!0})]})]}),Object(Pe.jsxs)("div",{className:"action-btns",children:[Object(Pe.jsxs)("a",{children:[Object(Pe.jsx)(ke.a,{className:"action-icon",icon:Ne.d}),"Share"]}),Object(Pe.jsxs)("a",{children:[Object(Pe.jsx)(ke.a,{className:"action-icon",icon:nt.c}),"Save"]})]})]})]}),Object(Pe.jsxs)("section",{className:"add-stay-info-container",children:[Object(Pe.jsxs)("div",{className:"add-stay-info-details",children:[Object(Pe.jsx)("div",{className:"add-stay-info-details-header",children:Object(Pe.jsxs)("div",{children:[Object(Pe.jsx)("span",{children:"Capacity:"})," ",Object(Pe.jsx)("input",{type:"number",name:"capacity",value:a,onChange:this.handleChange,required:!0}),Object(Pe.jsx)("span",{children:"Stay Type:"}),Object(Pe.jsxs)("select",{name:"stay-type",value:c,onChange:this.handleChangeSelect,children:[Object(Pe.jsx)("option",{value:"Entire place",children:"Entire place"}),Object(Pe.jsx)("option",{value:"Private room",children:"Private room"})]}),Object(Pe.jsx)("span",{children:"Property Type:"}),Object(Pe.jsxs)("select",{name:"property-type",onChange:this.handleChangeSelect,value:s,children:[Object(Pe.jsx)("option",{value:"Apartment",children:"Apartment"}),Object(Pe.jsx)("option",{value:"Villa",children:"Villa"}),Object(Pe.jsx)("option",{value:"Studio",children:"Studio"}),Object(Pe.jsx)("option",{value:"Loft",children:"Loft"}),Object(Pe.jsx)("option",{value:"Room",children:"Room"})]})]})}),Object(Pe.jsxs)("div",{className:"stay-features-container",children:[Object(Pe.jsxs)("div",{className:"stay-features-details",children:[Object(Pe.jsx)(ke.a,{icon:Ne.g}),Object(Pe.jsxs)("div",{children:[Object(Pe.jsx)("h3",{children:"Entire Place"}),Object(Pe.jsx)("h4",{children:"You'll have the place to yourself."})]})]}),Object(Pe.jsxs)("div",{className:"stay-features-details",children:[Object(Pe.jsx)(ke.a,{icon:Ne.b}),Object(Pe.jsxs)("div",{children:[Object(Pe.jsx)("h3",{children:"House Rules"}),Object(Pe.jsxs)("h4",{children:[" ","This place isn\u2019t suitable for children under 12 and the host doesn\u2019t allow pets."]})]})]}),Object(Pe.jsxs)("div",{className:"stay-features-details",children:[Object(Pe.jsx)(ke.a,{icon:Ne.i}),Object(Pe.jsxs)("div",{children:[Object(Pe.jsxs)("h3",{children:[O.fullname," is A Superhost"]}),Object(Pe.jsxs)("h4",{children:[" ","Superhosts are experienced, highly rated hosts who are committed to providing great stays for guests."]})]})]}),Object(Pe.jsxs)("div",{className:"stay-features-details",children:[Object(Pe.jsx)(ke.a,{icon:Ne.c}),Object(Pe.jsxs)("div",{children:[Object(Pe.jsx)("h3",{children:"Wifi"}),Object(Pe.jsx)("h4",{children:"Guests often search for this popular amenity"})]})]})]}),Object(Pe.jsxs)("div",{className:"stay-desc-container",children:[Object(Pe.jsx)("p",{children:"Description"}),Object(Pe.jsx)("textarea",{value:i,name:"desc",onChange:this.handleChange,className:"desc-textarea"})]}),Object(Pe.jsxs)("div",{className:"add-stay-amenities",children:[Object(Pe.jsx)("p",{children:"Amenities"}),Object(Pe.jsxs)("div",{className:"add-stay-amenities-item",children:[Object(Pe.jsx)("input",{type:"checkbox",name:"tv",checked:l,onChange:this.handleAmenityChange}),Object(Pe.jsx)("label",{for:"TV",children:"TV"})]}),Object(Pe.jsxs)("div",{className:"add-stay-amenities-item",children:[Object(Pe.jsx)("input",{type:"checkbox",name:"wifi",checked:u,onChange:this.handleAmenityChange}),Object(Pe.jsx)("label",{for:"Wifi",children:"Wifi"})]}),Object(Pe.jsxs)("div",{className:"add-stay-amenities-item",children:[Object(Pe.jsx)("input",{type:"checkbox",name:"kitchen",checked:d,onChange:this.handleAmenityChange}),Object(Pe.jsx)("label",{for:"Kitchen",children:"Kitchen"})]}),Object(Pe.jsxs)("div",{className:"add-stay-amenities-item",children:[Object(Pe.jsx)("input",{type:"checkbox",name:"smokingAllowed",checked:h,onChange:this.handleAmenityChange}),Object(Pe.jsx)("label",{for:"Smoking allowed",children:"Smoking allowed"})]}),Object(Pe.jsxs)("div",{className:"add-stay-amenities-item",children:[Object(Pe.jsx)("input",{type:"checkbox",name:"petsAllowed",checked:p,onChange:this.handleAmenityChange}),Object(Pe.jsx)("label",{for:"Pets allowed",children:"Pet allowed"})]}),Object(Pe.jsxs)("div",{className:"add-stay-amenities-item",children:[Object(Pe.jsx)("input",{type:"checkbox",name:"cookingBasics",checked:j,onChange:this.handleAmenityChange}),Object(Pe.jsx)("label",{for:"Cooking basics",children:"Cooking basics"})]})]})]}),Object(Pe.jsxs)("div",{className:"add-stay-price-container",children:[Object(Pe.jsx)("span",{children:"Price:"}),Object(Pe.jsx)("input",{type:"number",name:"price",value:n,onChange:this.handleChange,required:!0}),Object(Pe.jsx)("span",{children:"/ night"})]})]}),Object(Pe.jsx)("button",{className:"add-stay-save-btn",type:"submit",children:"Enter!"})]})]})}}]),n}(a.a.Component);var at={onAddStay:ve,onUpdateStay:ge},rt=Object(o.b)((function(e){return{stays:e.stayModule.stays}}),at)(st),ct=function(e){Object(se.a)(n,e);var t=Object(ae.a)(n);function n(){var e;Object(te.a)(this,n);for(var s=arguments.length,a=new Array(s),r=0;r<s;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))).state={locSearch:""},e.onRemoveStay=function(t){e.props.onRemoveStay(t)},e.onAddStay=function(t){e.props.onAddStay(t)},e}return Object(ne.a)(n,[{key:"componentDidMount",value:function(){window.scrollTo(0,0),this.props.changePage("home")}},{key:"render",value:function(){return this.props.stays?Object(Pe.jsxs)("section",{className:"home-page main-container",children:[Object(Pe.jsxs)("div",{className:"hero main-container full top-fold",children:[Object(Pe.jsx)("h2",{children:"Not sure where to go? Perfect."}),Object(Pe.jsx)(i.b,{to:"/explore",className:"nav-link",children:Object(Pe.jsxs)("button",{children:[" ",Object(Pe.jsx)("a",{className:"im-flexible-btn",children:" I'm flexible "})]})})]}),Object(Pe.jsx)("div",{className:"bottom-fold",children:Object(Pe.jsxs)("div",{className:"nearby",children:[Object(Pe.jsx)("h3",{children:"Explore nearby"}),Object(Pe.jsxs)("div",{className:"gallery",children:[Object(Pe.jsxs)("div",{children:[Object(Pe.jsx)(i.b,{to:"/explore?city=".concat("Tel Aviv-Yafo"),children:Object(Pe.jsx)("img",{src:"https://a0.muscache.com/im/pictures/be4d3ba5-08d7-4afe-95a7-f2da6453886a.jpg?im_q=medq&im_w=240",alt:""})}),Object(Pe.jsxs)("div",{className:"city",children:[Object(Pe.jsx)("h6",{children:"Tel Aviv-Yafo"}),Object(Pe.jsx)("p",{children:"Israel"})]})]}),Object(Pe.jsxs)("div",{children:[Object(Pe.jsx)(i.b,{to:"/explore?city=".concat("Jerusalem"),children:Object(Pe.jsx)("img",{src:"https://a0.muscache.com/im/pictures/7253e011-7c22-48fd-b75d-d0da35372397.jpg?im_q=medq&im_w=240",alt:""})}),Object(Pe.jsxs)("div",{className:"city",children:[Object(Pe.jsx)("h6",{children:"Jerusalem"}),Object(Pe.jsx)("p",{children:"Israel"})]})]}),Object(Pe.jsxs)("div",{children:[Object(Pe.jsx)(i.b,{to:"/explore?city=".concat("London"),children:Object(Pe.jsx)("img",{src:"https://a0.muscache.com/im/pictures/52e8083e-2de2-446d-a860-534eab250541.jpg?im_q=medq&im_w=240",alt:""})}),Object(Pe.jsxs)("div",{className:"city",children:[Object(Pe.jsx)("h6",{children:"London"}),Object(Pe.jsx)("p",{children:"England"})]})]}),Object(Pe.jsxs)("div",{children:[Object(Pe.jsx)(i.b,{to:"/explore?city=".concat("New York"),children:Object(Pe.jsx)("img",{src:"https://a0.muscache.com/im/pictures/20e74de0-0eb8-4fca-afb8-b111875acdf5.jpg?im_q=medq&im_w=240",alt:""})}),Object(Pe.jsxs)("div",{className:"city",children:[Object(Pe.jsx)("h6",{children:"New-York"}),Object(Pe.jsx)("p",{children:"United States"})]})]}),Object(Pe.jsxs)("div",{children:[Object(Pe.jsx)(i.b,{to:"/explore?city=".concat("Barcelona"),children:Object(Pe.jsx)("img",{src:"https://a0.muscache.com/im/pictures/e639b7ab-aee3-48ee-9743-216684a51319.jpg?im_q=medq&im_w=240",alt:""})}),Object(Pe.jsxs)("div",{className:"city",children:[Object(Pe.jsx)("h6",{children:"Barcelona"}),Object(Pe.jsx)("p",{children:"Spain"})]})]}),Object(Pe.jsxs)("div",{children:[Object(Pe.jsx)(i.b,{to:"/explore?city=".concat("Los Angeles"),children:Object(Pe.jsx)("img",{src:"https://a0.muscache.com/im/pictures/ca3737ef-0faf-46ba-b055-b4a2d99e2cea.jpg?im_q=medq&im_w=240",alt:""})}),Object(Pe.jsxs)("div",{className:"city",children:[Object(Pe.jsx)("h6",{children:"Los Angeles"}),Object(Pe.jsx)("p",{children:"United States"})]})]}),Object(Pe.jsxs)("div",{children:[Object(Pe.jsx)(i.b,{to:"/explore?city=".concat("Paris"),children:Object(Pe.jsx)("img",{src:"https://a0.muscache.com/im/pictures/585d1e53-e2e1-4baf-a34e-36301dd1e2da.jpg?im_q=medq&im_w=240",alt:""})}),Object(Pe.jsxs)("div",{className:"city",children:[Object(Pe.jsx)("h6",{children:"Paris"}),Object(Pe.jsx)("p",{children:"France"})]})]}),Object(Pe.jsxs)("div",{children:[Object(Pe.jsx)(i.b,{to:"/explore?city=".concat("Amsterdam"),children:Object(Pe.jsx)("img",{src:"https://a0.muscache.com/im/pictures/7c309a70-bc93-4603-8d3b-9d4cd9bf75b2.jpg?im_q=medq&im_w=240",alt:""})}),Object(Pe.jsxs)("div",{className:"city",children:[Object(Pe.jsx)("h6",{children:"Amsterdam"}),Object(Pe.jsx)("p",{children:"Netherlands"})]})]})]})]})}),Object(Pe.jsxs)("div",{children:[Object(Pe.jsx)("h3",{children:"Live anywhere"}),Object(Pe.jsxs)("div",{className:"anywhere",children:[Object(Pe.jsx)("div",{children:Object(Pe.jsxs)(i.b,{to:"/explore",children:[" ",Object(Pe.jsx)("img",{src:"https://a0.muscache.com/im/pictures/2f13349d-879d-43c6-83e3-8e5679291d53.jpg?im_w=320",alt:""}),Object(Pe.jsx)("h4",{children:"Outdoor getaways"})]})}),Object(Pe.jsx)("div",{children:Object(Pe.jsxs)(i.b,{to:"/explore",children:[Object(Pe.jsx)("img",{src:"https://a0.muscache.com/im/pictures/36f53e61-db8d-403c-9122-5b761c0e4264.jpg?im_w=320",alt:""}),Object(Pe.jsx)("h4",{children:"Unique stays"})]})}),Object(Pe.jsx)("div",{children:Object(Pe.jsxs)(i.b,{to:"/explore",children:[Object(Pe.jsx)("img",{src:"https://a0.muscache.com/im/pictures/7d82ca14-56e5-4465-8218-dcfa7d69b6ac.jpg?im_w=320",alt:""}),Object(Pe.jsx)("h4",{children:"Entire homes"})]})}),Object(Pe.jsx)("div",{children:Object(Pe.jsxs)(i.b,{to:"/explore",children:[Object(Pe.jsx)("img",{src:"https://a0.muscache.com/im/pictures/10a638e1-6aff-4313-8033-1275cec83987.jpg?im_w=320",alt:""}),Object(Pe.jsx)("h4",{children:"Pets allowed"})]})})]}),Object(Pe.jsx)("div",{className:"Outdoor-getaways",children:Object(Pe.jsx)("h4",{})}),Object(Pe.jsxs)("div",{className:"want-to-be-host",children:[Object(Pe.jsx)("img",{src:"https://res.cloudinary.com/dohqnraie/image/upload/v1633442777/5b4dc94a-0b4c-4c27-b50f-9c5a5b93c775_eq7kar.webp",alt:""}),Object(Pe.jsxs)("div",{className:"text-on-img",children:[Object(Pe.jsx)("h1",{children:"Try hosting"}),Object(Pe.jsx)("p",{children:"Try hosting Earn extra income and unlock new"}),Object(Pe.jsx)("p",{children:"opportunities by sharing your space."}),Object(Pe.jsx)("button",{children:"Learn more"})]})]})]})]}):Object(Pe.jsx)("p",{children:"loading..."})}}]),n}(a.a.Component);var it={loadStays:me,onAddStay:ve,onRemoveStay:fe,onUpdateStay:ge,changePage:ye},ot=Object(o.b)((function(e){return{stays:e.stayModule.stays}}),it)(ct);function lt(e){var t=e.order,n=e.onRemoveOrder,s=function(e){return e?new Date(e).toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"}):"Add dates"};if(t)return Object(Pe.jsxs)("div",{className:"order-preview",children:[Object(Pe.jsxs)("section",{className:"order-gallery",children:[Object(Pe.jsx)("img",{src:t.stay.imgUrls[0],className:"order-img"}),Object(Pe.jsx)("img",{src:t.stay.imgUrls[1],className:"order-img"}),Object(Pe.jsx)("img",{src:t.stay.imgUrls[2],className:"order-img"})]}),Object(Pe.jsxs)("div",{className:"order-prev-text",children:[Object(Pe.jsx)("h6",{className:"order-prev-title",children:t.stay.title}),Object(Pe.jsxs)("p",{children:["$",t.stay.totalPrice]}),Object(Pe.jsx)("p",{children:t.status}),Object(Pe.jsx)("p",{className:"non-refundable",children:"Non-refundable"}),Object(Pe.jsx)("p",{className:"order-prev-dates check-in",children:s(t.checkIn)}),Object(Pe.jsxs)("p",{className:"order-prev-dates check-out",children:[" ",s(t.checkOut)]}),t.checkIn>Date.now()&&Object(Pe.jsx)("button",{onClick:function(e){n(t._id,e)},children:"Cancel order"})]})]})}function dt(e){var t=e.orders,n=e.onRemoveOrder;return console.log("orders in orderList",t),Object(Pe.jsx)("div",{className:"order-list",children:t.map((function(e){return Object(Pe.jsxs)(i.b,{to:{pathname:"/stay/".concat(e.stay._id),orderId:e._id},children:[" ",Object(Pe.jsx)(lt,{order:e,onRemoveOrder:n},e._id)]},e._id)}))})}function ut(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(){var n=Object(m.a)(b.a.mark((function n(s){var a;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Ee.query(e,t);case 2:a=n.sent;try{s({type:"SET_ORDER",orders:a})}catch(r){be("Cannot load orders"),console.log("Cannot load orders",r)}case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}var ht=function(e){Object(se.a)(n,e);var t=Object(ae.a)(n);function n(){var e;Object(te.a)(this,n);for(var s=arguments.length,a=new Array(s),r=0;r<s;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))).state={orders:[],sortBy:"",isUpcomingShown:!0},e.onRemoveOrder=function(){var t=Object(m.a)(b.a.mark((function t(n,s){var a,r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s.preventDefault(),t.next=3,L.getLoggedinUser();case 3:return a=t.sent,t.next=6,e.props.onRemoveOrder(n);case 6:return t.next=8,e.props.loadOrders(a._id,!1);case 8:r=e.props.orders,e.setState({orders:r}),e.onSetFilterOrders("upcoming");case 11:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.onSetSortOrders=function(t){var n=e.state,s=(n.sortBy,n.orders);console.log("onSetFrontSort sort",t);var a=[];"title"===t&&(console.log("sort by title"),a=s.sort((function(t,n){return e.sortByTxt(t.stay.title,n.stay.title)}))),"status"===t&&(console.log("sort by status"),a=s.sort((function(t,n){return e.sortByTxt(t.status,n.status)}))),"checkIn"===t&&(console.log("sort by checkIn"),a=s.sort((function(t,n){return e.sortByTxt(t.checkIn,n.checkIn)}))),"checkOut"===t&&(console.log("sort by checkIn"),a=s.sort((function(t,n){return e.sortByTxt(t.checkIn,n.checkIn)}))),"price"===t&&(console.log("sort by price"),a=s.sort((function(e,t){return e.stay.totalPrice-t.stay.totalPrice}))),console.log("ordersToDisplay",a),e.setState(Object(h.a)(Object(h.a)({},e.state),{},{orders:a}),(function(){console.log("this.state.orders SORTED",e.state.orders)}))},e.sortByTxt=function(e,t){return e>t?1:t>e?-1:0},e.onSetFilterOrders=function(t){e.props.orders;console.log("onSetFilterOrders: ",t);var n=Date.now();console.log("currDate",n);var s=e.props.orders;console.log("ordersToDisplay",s),"upcoming"===t&&(s=s.filter((function(e){return e.checkIn>n}))),"past"===t&&(console.log("filterby past"),console.log("ordersToDisplay in filterby past1***",s),s=s.filter((function(e){return e.checkIn<n})),console.log("ordersToDisplay in filterby past2",s)),console.log("ordersToDisplay in onSetFilterOrders",s),e.setState(Object(h.a)(Object(h.a)({},e.state),{},{orders:s}),(function(){console.log("this.state.orders FILTERED",e.state.orders)}))},e}return Object(ne.a)(n,[{key:"componentDidMount",value:function(){var e=Object(m.a)(b.a.mark((function e(){var t,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.orders,console.log("componentDidMount in orderPage"),window.scrollTo(0,0),this.props.changePage("order"),e.next=6,L.getLoggedinUser();case 6:if(n=e.sent){e.next=10;break}return this.props.history.push("/"),e.abrupt("return");case 10:return e.next=12,this.props.loadOrders(n._id,!1);case 12:this.setState({orders:t}),this.onSetFilterOrders("upcoming");case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,n=t.orders,s=t.isUpcomingShown;return n&&n.length?Object(Pe.jsxs)("section",{className:"order-page main-container",children:[Object(Pe.jsx)("h1",{children:"Trips"}),Object(Pe.jsxs)("div",{className:"trips-page-header",children:[Object(Pe.jsxs)("div",{className:"left-btns",children:[Object(Pe.jsx)("button",{className:s?"order-active":"",onClick:function(){e.setState({isUpcomingShown:!0},(function(){e.onSetFilterOrders("upcoming")}))},children:"Upcoming"}),Object(Pe.jsx)("button",{className:s?"":"order-active",onClick:function(){e.setState({isUpcomingShown:!1},(function(){e.onSetFilterOrders("past")}))},children:"Past"})]}),Object(Pe.jsxs)("div",{className:"right-btns",children:[Object(Pe.jsx)("button",{onClick:function(){e.onSetSortOrders("title")},children:"Stay name"}),Object(Pe.jsx)("button",{onClick:function(){e.onSetSortOrders("checkIn")},children:"Check in"}),Object(Pe.jsx)("button",{onClick:function(){e.onSetSortOrders("checkOut")},children:"Check out"}),Object(Pe.jsx)("button",{onClick:function(){e.onSetSortOrders("price")},children:"Price"}),Object(Pe.jsx)("button",{onClick:function(){e.onSetSortOrders("status")},children:"Status"})]})]}),Object(Pe.jsx)(dt,{orders:n,onRemoveOrder:this.onRemoveOrder})]}):Object(Pe.jsx)(He,{})}}]),n}(a.a.Component);var jt={loadOrders:ut,onRemoveOrder:function(e){return function(){var t=Object(m.a)(b.a.mark((function t(n){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Ee.remove(e);case 3:return pe("Order removed"),t.abrupt("return",n({type:"REMOVE_ORDER",orderId:e}));case 7:t.prev=7,t.t0=t.catch(0),be("Cannot remove order"),console.log("Cannot remove order",t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},loadOrdersFromUser:function(){return console.log("loadOrdersFromUser"),function(){var e=Object(m.a)(b.a.mark((function e(t){var n,s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L.getLoggedinUser();case 3:return n=e.sent,e.next=6,Ee.getOrders(n._id);case 6:return s=e.sent,t({type:"LOAD_ORDERS_FROM_USER",orders:s}),e.abrupt("return",s);case 11:e.prev=11,e.t0=e.catch(0),console.log("UserActions: err in loadOrdersFromUser",e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()},changePage:ye,onRemoveOrderFromUser:function(e){return function(){var t=Object(m.a)(b.a.mark((function t(n){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Ee.remove(e);case 3:return pe("Order removed"),t.abrupt("return",n({type:"REMOVE_ORDER_FROM_USER",orderId:e}));case 7:t.prev=7,t.t0=t.catch(0),be("Cannot remove order"),console.log("Cannot remove order",t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}},pt=Object(o.b)((function(e){return{orders:e.orderModule.orders}}),jt)(ht),bt=(n(47),n(818),n(77)),mt=n.n(bt),Ot=function(e){Object(se.a)(n,e);var t=Object(ae.a)(n);function n(){var e;Object(te.a)(this,n);for(var s=arguments.length,a=new Array(s),r=0;r<s;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))).state={ratings:{avg:0,cleanliness:0,communication:0,checkIn:0,accuracy:0,location:0,value:0},isLoading:!0},e.getAverage=function(e,t){return e.reduce((function(e,n){return console.log(t,n.ratings[t]),e+n.ratings[t]}),0)/e.length},e}return Object(ne.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.reviews;t&&this.setState((function(n){return Object(h.a)(Object(h.a)({},n),{},{ratings:{cleanliness:e.getAverage(t,"cleanliness"),communication:e.getAverage(t,"communication"),checkIn:e.getAverage(t,"checkIn"),accuracy:e.getAverage(t,"accuracy"),location:e.getAverage(t,"location"),value:e.getAverage(t,"value")}})})),this.setState({isLoading:!1})}},{key:"render",value:function(){var e=this.props,t=e.isEdit,n=e.ratingChanged,s=(e.values,this.state.ratings),a=s.cleanliness,r=s.communication,c=s.accuracy,i=s.location,o=s.value,l=s.checkIn;return this.state.isLoading?Object(Pe.jsx)(He,{}):Object(Pe.jsxs)("div",{className:"review-rating-container",children:[Object(Pe.jsxs)("div",{className:"review-rating-item",children:[Object(Pe.jsx)("div",{children:Object(Pe.jsx)("h3",{children:"Location"})}),Object(Pe.jsx)(mt.a,{name:"location",count:5,onChange:function(e){return n(e,"location")},size:24,activeColor:"#FF385C",edit:t,value:i})]}),Object(Pe.jsxs)("div",{className:"review-rating-item",children:[Object(Pe.jsx)("h3",{children:"Accessibility"}),Object(Pe.jsx)(mt.a,{name:"value",count:5,onChange:function(e){return n(e,"value")},size:24,activeColor:"#FF385C",edit:t,value:o})]}),Object(Pe.jsxs)("div",{className:"review-rating-item",children:[Object(Pe.jsx)("h3",{children:"Accuracy"}),Object(Pe.jsx)(mt.a,{name:"accuracy",count:5,onChange:function(e){return n(e,"accuracy")},size:24,activeColor:"#FF385C",edit:t,value:c})]}),Object(Pe.jsxs)("div",{className:"review-rating-item",children:[Object(Pe.jsx)("h3",{children:"Check-in"}),Object(Pe.jsx)(mt.a,{name:"checkIn",count:5,onChange:function(e){return n(e,"checkIn")},size:24,activeColor:"#FF385C",edit:t,value:l})]}),Object(Pe.jsxs)("div",{className:"review-rating-item",children:[Object(Pe.jsx)("h3",{children:"Communication"}),Object(Pe.jsx)(mt.a,{name:"communication",count:5,onChange:function(e){return n(e,"communication")},size:24,activeColor:"#FF385C",edit:t,value:r})]}),Object(Pe.jsxs)("div",{className:"review-rating-item",children:[Object(Pe.jsx)("h3",{children:"Cleanliness-in"}),Object(Pe.jsx)(mt.a,{name:"cleanliness",count:5,onChange:function(e){return n(e,"cleanliness")},size:24,activeColor:"#FF385C",edit:t,value:a})]})]})}}]),n}(a.a.Component),ft=function(e){Object(se.a)(n,e);var t=Object(ae.a)(n);function n(){var e;Object(te.a)(this,n);for(var s=arguments.length,a=new Array(s),r=0;r<s;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))).state={msg:null},e}return Object(ne.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.removeEvent=he.on("show-user-msg",(function(t){e.setState({msg:t}),setTimeout((function(){e.setState({msg:null})}),2500)}))}},{key:"componentWillUnmount",value:function(){this.removeEvent()}},{key:"render",value:function(){if(!this.state.msg)return Object(Pe.jsx)("span",{});var e=this.state.msg.type||"";return Object(Pe.jsx)("section",{className:"user-msg "+e,children:this.state.msg.txt})}}]),n}(a.a.Component),vt=function(e){Object(se.a)(n,e);var t=Object(ae.a)(n);function n(){var e;Object(te.a)(this,n);for(var s=arguments.length,a=new Array(s),r=0;r<s;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))).state={review:{txt:"",ratings:{avg:0,cleanliness:0,communication:0,checkIn:0,accuracy:0,location:0,value:0},date:null,by:null},isUserMsgShown:!1},e.ratingChanged=function(t,n){e.setState((function(e){return Object(h.a)(Object(h.a)({},e),{},{review:Object(h.a)(Object(h.a)({},e.review),{},{ratings:Object(h.a)(Object(h.a)({},e.review.ratings),{},Object(Ze.a)({},n,t))})})}))},e.onHandleChange=function(t){var n=t.target.name,s=t.target.value;e.setState({review:Object(h.a)(Object(h.a)({},e.state.review),{},Object(Ze.a)({},n,s))})},e.clearState=Object(m.a)(b.a.mark((function t(){var n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,L.getLoggedinUser();case 2:n=t.sent,e.setState((function(e){return{review:{txt:"",ratings:{avg:0,cleanliness:0,communication:0,checkIn:0,accuracy:0,location:0,value:0},date:null,by:Object(h.a)(Object(h.a)({},e.by),{},{_id:n._id,fullname:n.fullname,imgUrl:n.imgUrl})},isUserMsgShown:!1}}));case 4:case"end":return t.stop()}}),t)}))),e.toggleMessage=function(){e.setState({showUserMsg:!0})},e}return Object(ne.a)(n,[{key:"componentDidMount",value:function(){var e=Object(m.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.getLoggedinUser();case 2:(t=e.sent)&&this.setState((function(e){return Object(h.a)(Object(h.a)({},e),{},{review:{by:{_id:t._id,fullname:t.fullname,imgUrl:t.imgUrl}}})}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state.review.txt,n=(this.state.isUserMsgShown,this.state.review.by);return n?Object(Pe.jsxs)("div",{className:"add-review",children:[Object(Pe.jsx)("h1",{children:"Add Review"}),Object(Pe.jsxs)("div",{className:"add-review-header",children:[!n&&Object(Pe.jsx)("img",{src:"https://home-and-go.herokuapp.com/static/media/avatar.e582e4ba.png"}),n&&Object(Pe.jsx)("img",{src:n.imgUrl}),Object(Pe.jsxs)("div",{children:[n?Object(Pe.jsx)("h3",{children:n.fullname}):Object(Pe.jsx)("h3",{children:"Guest"}),Object(Pe.jsx)("h4",{children:new Date(Date.now()).toLocaleDateString("en-GB")})]})]}),Object(Pe.jsx)(Ot,{isEdit:!0,ratingChanged:this.ratingChanged}),Object(Pe.jsxs)("form",{className:"add-review-input",onSubmit:function(t){t.preventDefault(),e.setState({review:Object(h.a)(Object(h.a)({},e.state.review),{},{txt:e.state.review.txt,ratings:e.state.review.ratings,date:Date.now()})},Object(m.a)(b.a.mark((function t(){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,L.getLoggedinUser();case 2:if(t.sent){t.next=7;break}return console.log("LOGIN"),pe("Please Login"),t.abrupt("return");case 7:return t.next=9,e.props.onAddReview(e.state.review);case 9:e.clearState();case 10:case"end":return t.stop()}}),t)}))))},children:[Object(Pe.jsx)("textarea",{className:"add-review-txtarea",name:"txt",type:"text",placeholder:"Write your opinion about this stay...",value:t,onChange:this.onHandleChange,required:!0}),Object(Pe.jsx)("button",{children:"Send"})]})]}):Object(Pe.jsx)("h4",{children:"You need to log in to write a review"})}}]),n}(a.a.Component),gt=n(76);function xt(e){var t=e.amenities,n=function(e){switch(e){case"TV":return Object(Pe.jsx)(ke.a,{className:"amenity-icon",icon:Ne.m});case"Wifi":return Object(Pe.jsx)(ke.a,{className:"amenity-icon",icon:Ne.o});case"Kitchen":return Object(Pe.jsx)(ke.a,{className:"amenity-icon",icon:gt.a});case"Pets allowed":return Object(Pe.jsx)(ke.a,{className:"amenity-icon",icon:Ne.j});case"Cooking basics":return Object(Pe.jsx)(ke.a,{className:"amenity-icon",icon:Ne.a});case"Smoking allowed":return Object(Pe.jsx)(ke.a,{className:"amenity-icon",icon:nt.e})}},s=function(e){return t.includes(e)?"":"cross-amenity"},a=function(e){return t.includes(e)?"":"strikethrough"};return Object(Pe.jsx)("div",{className:"amenities",children:Object(Pe.jsx)("ul",{children:["TV","Wifi","Kitchen","Pets allowed","Cooking basics","Smoking allowed"].map((function(e,t){return Object(Pe.jsxs)("li",{className:s(e),children:[Object(Pe.jsxs)("span",{className:a(e),children:[" ",n(e)," "]}),e]},t)}))})})}function yt(e){var t=e.guests,n=e.updateNumOfGuests;return Object(Pe.jsxs)("div",{className:"guests-modal",children:[Object(Pe.jsxs)("div",{className:"modal-row",children:[Object(Pe.jsxs)("div",{className:"modal-text-container",children:[Object(Pe.jsx)("p",{children:"Adults"}),Object(Pe.jsx)("p",{children:"Ages 13 or above"})]}),Object(Pe.jsxs)("div",{className:"modal-btns-container",children:[Object(Pe.jsx)("button",{className:"modal-btn",onClick:function(e){return n(-1,"adults",e)},children:"-"}),Object(Pe.jsx)("span",{children:t.adults}),Object(Pe.jsx)("button",{className:"modal-btn",onClick:function(e){return n(1,"adults",e)},children:"+"})]})]}),Object(Pe.jsxs)("div",{className:"modal-row",children:[Object(Pe.jsxs)("div",{className:"modal-text-container",children:[Object(Pe.jsx)("p",{children:"Kids"}),Object(Pe.jsx)("p",{children:"Ages 2-12"})]}),Object(Pe.jsxs)("div",{className:"modal-btns-container",children:[Object(Pe.jsx)("button",{className:"modal-btn",onClick:function(e){return n(-1,"kids",e)},children:"-"}),Object(Pe.jsx)("span",{children:t.kids}),Object(Pe.jsx)("button",{className:"modal-btn",onClick:function(e){return n(1,"kids",e)},children:"+"})]})]})]})}var wt=n(343),St=(n(835),n(836),function(e){Object(se.a)(n,e);var t=Object(ae.a)(n);function n(){var e;Object(te.a)(this,n);for(var s=arguments.length,a=new Array(s),r=0;r<s;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))).state={startDate:Date.now(),endDate:Date.now()},e.handleSelect=function(t){var n=t.selection,s=n.startDate,a=n.endDate;e.setState({startDate:s,endDate:a},(function(){e.props.setDates(s,a)}))},e}return Object(ne.a)(n,[{key:"render",value:function(){var e=this.state,t={startDate:e.startDate,endDate:e.endDate,key:"selection"},n=this.props.relativePos,s=n.left,a=n.top;return Object(Pe.jsxs)("div",{className:"date-range-container",style:{left:s,top:a},children:[Object(Pe.jsx)(wt.DateRangePicker,{className:"date-range",ranges:[t],onChange:this.handleSelect,months:1,direction:"horizontal",showSelectionPreview:!0,moveRangeOnFirstSelection:!1}),Object(Pe.jsx)("button",{className:"date-range-close-btn",type:"button",onClick:this.props.toggleDateCmp,children:"Close"})]})}}]),n}(a.a.Component));var kt=Object(o.b)((function(e){return{relativePos:e.pageModule.relativePos}}),{})(St),Nt=function(e){Object(se.a)(n,e);var t=Object(ae.a)(n);function n(){var e;Object(te.a)(this,n);for(var s=arguments.length,a=new Array(s),r=0;r<s;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))).handleLoginToDemo=function(){e.props.onLogin({username:"u101",password:"secret"})},e}return Object(ne.a)(n,[{key:"render",value:function(){var e=this.props.isLoginModal;return Object(Pe.jsxs)("div",{className:e?"login-modal shown":"login-modal",children:[Object(Pe.jsx)("h1",{children:"Please login first"}),Object(Pe.jsxs)("div",{className:"login-modal-actions",children:[Object(Pe.jsx)("button",{className:"login-modal-demo-btn",onClick:this.handleLoginToDemo,children:"Login to demo user"}),Object(Pe.jsx)(i.b,{to:"/login",className:"login-modal-login-btn",children:"Login page"})]})]})}}]),n}(a.a.Component);var Ct={onLogin:Ie},At=Object(o.b)((function(e){return{user:e.userModule.user}}),Ct)(Nt),Pt=function(e){Object(se.a)(n,e);var t=Object(ae.a)(n);function n(){var e;Object(te.a)(this,n);for(var s=arguments.length,a=new Array(s),r=0;r<s;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))).state={newOrderFromForm:{totalPrice:0,checkIn:"",checkOut:"",guests:{adults:0,kids:0},stay:{_id:e.props.stay._id,title:e.props.stay.title,totalPrice:e.props.stay.price,imgUrls:e.props.stay.imgUrls}},isOrderSum:!1,isDatesCmpShow:!1,x:0,y:0,rect:0,isReserveOrder:!1,isLoginModal:!1},e.handleChange=function(t){var n=t.target.name,s=t.target.value;e.setState((function(e){return{newOrder:Object(h.a)(Object(h.a)({},e.newOrder),{},Object(Ze.a)({},n,s))}}))},e.handleChangeNew=function(t){var n=t.target.name,s=t.target.value;e.setState((function(e){return{newOrderFromForm:Object(h.a)(Object(h.a)({},e.newOrderFromForm),{},Object(Ze.a)({},n,s))}}))},e.onAddOrder=function(t){if(t.preventDefault(),e.state.newOrderFromForm.checkIn&&e.state.newOrderFromForm.checkOut&&e.state.newOrderFromForm.guests)if(L.getLoggedinUser()){var n=e.getNumOfDays(),s=e.props.stay,a=e.getTotalPrice(s.price,n);e.setState((function(e){return{newOrderFromForm:Object(h.a)(Object(h.a)({},e.newOrderFromForm),{},{totalPrice:a})}}),(function(){var t=e.state.newOrderFromForm;e.setState({isOrderSum:!0}),e.props.orderId?(t._id=e.props.orderId,e.props.onEditOrder(t)):e.props.onAddOrder(t)}))}else e.setState({isLoginModal:!0},(function(){setTimeout((function(){e.setState({isLoginModal:!1})}),4e3)}))},e.clearState=function(){e.setState(Object(h.a)({},{newOrder:{totalPrice:0,checkIn:"",checkOut:"",guests:{adults:0,kids:0}}}))},e.handleHover=function(t){e.setState({x:t.clientX,y:t.clientY,rect:t.target.getBoundingClientRect()})},e.getNumOfDays=function(){var t=e.state.newOrderFromForm,n=t.checkOut,s=t.checkIn;if(s&&n)return Math.abs(Math.floor((n-s)/864e5))},e.getTotalPrice=function(e,t){return e*t},e.toggleButton=function(){var t=e.state.newOrderFromForm;t.checkIn&&t.checkOut&&t.guests.adults+t.guests.kids!==0?e.setState({isReserveOrder:!0,isOrderSum:!0}):console.log("missing fields!")},e.toggleDateCmp=function(){e.setState({isDatesCmpShow:!e.state.isDatesCmpShow})},e.setDates=function(t,n){var s=Date.parse(t),a=Date.parse(n);e.setState((function(e){return{newOrderFromForm:Object(h.a)(Object(h.a)({},e.newOrderFromForm),{},{checkIn:s,checkOut:a})}}))},e.formattedDates=function(e){return e?new Date(e).toLocaleDateString("en-GB"):"Add dates"},e}return Object(ne.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.newOrder;this.state.newOrderFromForm;this.setState((function(e){return{newOrderFromForm:Object(h.a)(Object(h.a)({},e.newOrderFromForm),{},{checkIn:t.checkIn,checkOut:t.checkOut,guests:t.guests})}})),window.addEventListener("scroll",(function(){e.setState({isDatesCmpShow:!1,isGuestsModalShown:!1})}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.x,s=t.y,a=t.isOrderSum,r=(t.rect,t.isReserveOrder),c=(t.newOrderFromForm,t.isDatesCmpShow),i=this.state,o=(i.isGuestsModalShown,i.isLoginModal),l=this.state.newOrderFromForm,d=l.checkIn,u=l.checkOut,h=l.guests,j=this.props,p=j.stay,b=j.updateNumOfGuests,m=(j.updateDates,this.props.relativePos),O=m.left,f=m.top;return Object(Pe.jsxs)("div",{className:"order-form-container",id:"Form",children:[Object(Pe.jsxs)("div",{className:"sticky-form-container",children:[Object(Pe.jsxs)("div",{className:"sticky-form",children:[Object(Pe.jsxs)("div",{className:"order-header",children:[Object(Pe.jsxs)("p",{children:[Object(Pe.jsxs)("span",{className:"order-header-price",children:["$",p.price," "]}),Object(Pe.jsx)("span",{children:"/ night"})]}),Object(Pe.jsxs)("span",{className:"stay-rate",children:[Object(Pe.jsx)(ke.a,{className:"star",icon:Ne.l}),Object(Pe.jsx)("span",{children:this.props.reviewsAvg}),Object(Pe.jsxs)("p",{children:["(",p.reviews?p.reviews.length:0," reviews)"]})]})]}),Object(Pe.jsx)("p",{className:"price-vary",children:"Price may vary by date"}),Object(Pe.jsxs)("form",{className:"order-form",onSubmit:this.onAddOrder,children:[Object(Pe.jsxs)("div",{className:"order-form-dates-input",children:[Object(Pe.jsxs)("label",{className:"checkin-label",htmlFor:"order-checkIn",children:[Object(Pe.jsx)("span",{children:"checkIn:"}),Object(Pe.jsx)("input",{type:"text",name:"checkIn",id:"order-checkIn",value:this.formattedDates(d),onChange:this.handleChangeNew,onClick:function(t){var n=t.pageX-80,s=t.pageY+25;e.props.setPos({left:n,top:s}),e.toggleDateCmp()},required:!0,placeholder:"check In"})]}),Object(Pe.jsxs)("label",{className:"checkout-label",htmlFor:"order-checkOut",children:[Object(Pe.jsx)("span",{children:"checkOut:"}),Object(Pe.jsx)("input",{type:"checkOut",name:"checkOut",value:this.formattedDates(u),onClick:function(t){var n=t.pageX-50,s=t.pageY+25;e.props.setPos({left:n,top:s}),e.toggleDateCmp()},onChange:this.handleChangeNew,id:"order-checkOut",required:!0,placeholder:"check In"})]})]}),Object(Pe.jsxs)("label",{className:"guests-label",children:[Object(Pe.jsx)("span",{children:"Guests:"}),Object(Pe.jsx)("input",{name:"guests",value:h.kids+h.adults,onChange:this.handleChangeNew,id:"order-guests",autoComplete:"off",required:!0,onClick:function(t){var n=t.pageX-50,s=t.pageY+30;e.props.setPos({left:n,top:s}),e.props.onToggleModal()}})]}),!r&&Object(Pe.jsx)("button",{className:"form-btn",style:{backgroundPosition:"-".concat(n,"% -").concat(s,"%")},onMouseMove:this.handleHover,onClick:this.toggleButton,type:"button",children:"Check Availability"}),r&&Object(Pe.jsx)("button",{className:"form-btn",style:{backgroundPosition:"-".concat(n,"% -").concat(s,"%")},onMouseMove:this.handleHover,type:"submit",children:"Reserve"}),a&&Object(Pe.jsxs)("div",{className:"order-sum-details",children:[Object(Pe.jsx)("h4",{children:"You won't be charged yet"}),Object(Pe.jsxs)("div",{children:[Object(Pe.jsxs)("p",{children:["$",p.price," X ",this.getNumOfDays()," nights"]}),Object(Pe.jsxs)("span",{children:["$",this.getTotalPrice(p.price,this.getNumOfDays()).toLocaleString()]})]}),Object(Pe.jsxs)("div",{children:[Object(Pe.jsx)("p",{children:"Cleaning fee"}),Object(Pe.jsx)("span",{children:"$40"})]}),Object(Pe.jsxs)("div",{children:[Object(Pe.jsx)("p",{children:"Service fee"}),Object(Pe.jsx)("span",{children:"$100"})]}),Object(Pe.jsxs)("div",{className:"order-sum-total",children:[Object(Pe.jsx)("p",{children:"Total"}),Object(Pe.jsxs)("p",{children:["$",(this.getTotalPrice(p.price,this.getNumOfDays())+100+40).toLocaleString()]})]})]})]})]}),Object(Pe.jsxs)("span",{className:"report-listing",children:[Object(Pe.jsx)(ke.a,{icon:nt.b}),"Report this listing"]})]}),o&&Object(Pe.jsx)(At,{isLoginModal:o}),c&&Object(Pe.jsx)(kt,{toggleDateCmp:this.toggleDateCmp,setDates:this.setDates}),this.props.isGuestsModalShown&&Object(Pe.jsx)("div",{className:"guests-modal-div-container",style:{left:O,top:f},children:Object(Pe.jsx)(yt,{guests:h,updateNumOfGuests:b})})]})}}]),n}(a.a.Component);var Dt={setModalPos:we,setPos:Se},_t=Object(o.b)((function(e){return{currPage:e.pageModule.currPage,relativePos:e.pageModule.relativePos}}),Dt)(Pt);function Et(e){var t,n=e.review;return Object(Pe.jsxs)("div",{className:"review-preview",children:[Object(Pe.jsxs)("div",{className:"review-header",children:[Object(Pe.jsx)("img",{src:n.by.imgUrl}),Object(Pe.jsxs)("div",{children:[Object(Pe.jsx)("h3",{children:n.by.fullname}),Object(Pe.jsx)("h4",{children:(t=n.date,t||(t=Date.now()),new Date(t).toLocaleDateString("en-GB"))})]})]}),Object(Pe.jsx)("div",{className:"review-content",children:Object(Pe.jsx)("p",{children:n.txt})})]})}function Tt(e){var t=e.reviews;return Object(Pe.jsx)("section",{className:"review-list",children:t?t.map((function(e,t){return Object(Pe.jsx)(Et,{review:e},t)})):Object(Pe.jsx)("h1",{children:"No Reviews!"})})}var Rt=n(128),Ut=function(e){Object(se.a)(n,e);var t=Object(ae.a)(n);function n(){var e;Object(te.a)(this,n);for(var s=arguments.length,a=new Array(s),r=0;r<s;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))).state={center:{lat:null,lng:null,address:null},isInfoWindowOn:!0},e}return Object(ne.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.location;this.setState({center:e})}},{key:"render",value:function(){var e=this.state.center;return e?Object(Pe.jsxs)("div",{className:"stay-map",children:[Object(Pe.jsx)("h3",{children:e.address}),Object(Pe.jsxs)(Rt.Map,{google:this.props.google,zoom:5,initialCenter:e,center:e,style:{width:"100%"},children:[Object(Pe.jsx)(Rt.Marker,{position:e,name:"Current Location",onClick:this.onMarkerClicked}),Object(Pe.jsx)(Rt.InfoWindow,{position:e,visible:this.state.isInfoWindowOn,children:Object(Pe.jsx)("div",{children:Object(Pe.jsx)("h1",{children:"Your next trip is here!"})})})]})]}):Object(Pe.jsx)("div",{children:"Loading..."})}}]),n}(s.Component),Mt=Object(Rt.GoogleApiWrapper)({apiKey:"AIzaSyBcHbsl6HTfMsdpKO2d3xY9UYQdF4BIUG4"})(Ut),Ft=f.a.create({withCredentials:!0}),Lt={add:function(e,t){return It.apply(this,arguments)},query:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return v.query("review",{params:e})},remove:function(e){return v.remove("review",e)}};function It(){return(It=Object(m.a)(b.a.mark((function e(t,n){var s,a,r,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.getLoggedinUser();case 2:return e.sent,s=n.ratings,a=s.cleanliness+s.communication+s.checkIn+s.accuracy+s.location+s.value,r=a/6,s.avg=r,c={id:U.makeId(),txt:n.txt,date:n.date,ratings:n.ratings,by:n.by},t.reviews.push(c),e.abrupt("return",Ft.put("http://localhost:3030/api/stay",t).then((function(e){return e.data})));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(m.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.query("review");case 2:t=e.sent,window.addEventListener("storage",Object(m.a)(b.a.mark((function e(){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Storage updated"),e.next=3,v.query("review");case 3:(n=e.sent).length===t.length+1&&(console.log("Review Added - localStorage updated from another browser"),R.emit("review-added",n[n.length-1])),t=n;case 6:case"end":return e.stop()}}),e)}))));case 4:case"end":return e.stop()}}),e)})))();var Bt=function(e){Object(se.a)(n,e);var t=Object(ae.a)(n);function n(){var e;Object(te.a)(this,n);for(var s=arguments.length,a=new Array(s),r=0;r<s;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))).getReviewsAverage=function(e){return e&&e.length?(e.reduce((function(e,t){return e+t.ratings.avg}),0)/e.length).toFixed(2):0},e}return Object(ne.a)(n,[{key:"render",value:function(){var e=this.props.currStay;return e?(console.log("***************",this.props),Object(Pe.jsx)("section",{className:"details-header-container",children:Object(Pe.jsx)("header",{className:"details-container",children:Object(Pe.jsxs)("div",{className:"details-header",children:[Object(Pe.jsxs)("ul",{className:"details-header-nav",children:[Object(Pe.jsx)("li",{children:Object(Pe.jsx)("a",{href:"#Photos",children:"Photos"})}),Object(Pe.jsx)("li",{children:Object(Pe.jsx)("a",{href:"#Amenities",children:"Amenities"})}),Object(Pe.jsx)("li",{children:Object(Pe.jsx)("a",{href:"#Reviews",children:"Reviews"})}),Object(Pe.jsx)("li",{children:Object(Pe.jsx)("a",{href:"#Location",children:"Location"})})]}),Object(Pe.jsxs)("div",{className:"mini-form",children:[Object(Pe.jsxs)("div",{className:"mini-form-details",children:[Object(Pe.jsxs)("p",{children:[Object(Pe.jsxs)("span",{className:"mini-order-header-price",children:["$",e.price," "]}),Object(Pe.jsx)("span",{className:"mini-order-text",children:"/ night"})]}),Object(Pe.jsxs)("span",{className:"mini-stay-rate",children:[Object(Pe.jsx)(ke.a,{className:"star",icon:Ne.l}),Object(Pe.jsx)("span",{className:"mini-reviews-avg",children:this.getReviewsAverage(e.reviews)}),Object(Pe.jsxs)("p",{className:"mini-reviews-num",children:["(",e.reviews?e.reviews.length:0," reviews)"]})]})]}),Object(Pe.jsxs)("a",{href:"#Form",children:[" ",Object(Pe.jsx)("button",{className:"mini-form-btn",children:"Check availability"})," "]})]})]})})})):Object(Pe.jsx)(He,{})}}]),n}(a.a.Component),qt=Object(o.b)((function(e){return{currStay:e.stayModule.currStay}}),{})(Bt),Gt=function(e){Object(se.a)(n,e);var t=Object(ae.a)(n);function n(){var e;Object(te.a)(this,n);for(var s=arguments.length,a=new Array(s),r=0;r<s;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))).state={stay:null,reviews:[],newOrder:{checkIn:null,checkOut:null,guests:{adults:0,kids:0}},isGuestsModalShown:!1},e.componentDidMount=function(){window.scrollTo(0,0),e.props.changePage("details");var t=e.props.match.params.stayId;t?ie.getById(t).then((function(t){e.setState({stay:t}),R.setup(),R.emit("setHost",t.host._id)})):e.props.history.push("/")},e.onCloseModal=function(){e.setState({isGuestsModalShown:!1})},e.formattedDates=function(e){return e?new Date(e).toLocaleDateString("en-GB"):"Add dates"},e.onAddOrder=function(){var t=Object(m.a)(b.a.mark((function t(n){var s,a,r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,L.getLoggedinUser();case 2:return s=t.sent,a=e.state.stay,r=Object(h.a)(Object(h.a)({},n),{},{status:"pending",user:s,host:a.host}),t.t0=h.a,t.t1={},t.next=9,e.props.onAddOrder(r,s._id);case 9:t.t2=t.sent,(0,t.t0)(t.t1,t.t2);case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onRemoveOrder=function(t){e.props.onRemoveOrder(t)},e.onAddReview=function(){var t=Object(m.a)(b.a.mark((function t(n){var s;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,s=e.state.stay,t.next=4,e.props.addReview(s,n);case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.log("login first");case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}(),e.getReviewsAverage=function(e){return e&&e.length?(e.reduce((function(e,t){return e+t.ratings.avg}),0)/e.length).toFixed(2):0},e.updateNumOfGuests=function(t,n,s){s.preventDefault(),s.stopPropagation();var a=Object(h.a)({},e.props.newOrder);a.guests.adults+a.guests.kids+t>e.state.stay.capacity||a.guests[n]+t<0||(a.guests[n]+=t,e.props.setGuests(a))},e.onToggleModal=function(){var t=e.state.isGuestsModalShown;console.log("this is on toggle modal"),e.setState({isGuestsModalShown:!t})},e}return Object(ne.a)(n,[{key:"render",value:function(){var e=this,t=this.state,n=t.stay,s=(t.reviews,t.isGuestsModalShown),a=this.props;a.checkIn,a.checkOut;return n?Object(Pe.jsx)("section",{className:"details-container",children:Object(Pe.jsxs)("main",{className:"stay-details",children:[Object(Pe.jsxs)("section",{className:"stay-details-header",children:[Object(Pe.jsx)("h1",{className:"stay-title ",children:n.title}),Object(Pe.jsxs)("div",{className:"stay-short-info",children:[Object(Pe.jsxs)("div",{className:"stay-short-info-details",children:[Object(Pe.jsx)("span",{className:"stay-rate-details",children:Object(Pe.jsx)(ke.a,{className:"star",icon:Ne.l})}),Object(Pe.jsx)("span",{children:this.getReviewsAverage(n.reviews)})," ",Object(Pe.jsxs)("p",{children:["( ",n.reviews?n.reviews.length:0," reviews )"]}),Object(Pe.jsx)("span",{className:"span-dot",children:"\u25cf"}),Object(Pe.jsx)("p",{children:n.loc.address})]}),Object(Pe.jsxs)("div",{className:"action-btns",children:[Object(Pe.jsxs)("a",{children:[Object(Pe.jsx)(ke.a,{className:"action-icon",icon:Ne.d}),"Share"]}),Object(Pe.jsxs)("a",{children:[Object(Pe.jsx)(ke.a,{className:"action-icon",icon:nt.c}),"Save"]})]})]})]}),Object(Pe.jsx)("section",{className:"stay-gallery",id:"Photos",children:n.imgUrls.map((function(e){return Object(Pe.jsx)("img",{src:e})}))}),Object(Pe.jsxs)("section",{className:"stay-info-container",children:[Object(Pe.jsxs)("div",{className:"stay-info",children:[Object(Pe.jsxs)("div",{className:"stay-info-header",children:[Object(Pe.jsxs)("div",{children:[Object(Pe.jsxs)("h3",{children:[n.type," hosted by ",n.host.fullname]}),Object(Pe.jsxs)("p",{className:"stay-info-header-subtitle",children:[n.capacity," Guests ",Object(Pe.jsx)("span",{className:"span-dot",children:"\u25cf"})," ",n.stayType," ",Object(Pe.jsx)("span",{className:"span-dot",children:"\u25cf"})," ",n.type]})]}),Object(Pe.jsx)("img",{src:n.host.imgUrl})]}),Object(Pe.jsxs)("div",{className:"stay-features-container",children:[Object(Pe.jsxs)("div",{className:"stay-features-details",children:[Object(Pe.jsx)(ke.a,{icon:Ne.g}),Object(Pe.jsxs)("div",{children:[Object(Pe.jsx)("h3",{children:"Entire Place"}),Object(Pe.jsx)("h4",{children:"You'll have the place to yourself."})]})]}),Object(Pe.jsxs)("div",{className:"stay-features-details",children:[Object(Pe.jsx)(ke.a,{icon:Ne.b}),Object(Pe.jsxs)("div",{children:[Object(Pe.jsx)("h3",{children:"House Rules"}),Object(Pe.jsxs)("h4",{children:[" ","This place isn\u2019t suitable for children under 12 and the host doesn\u2019t allow pets."]})]})]}),Object(Pe.jsxs)("div",{className:"stay-features-details",children:[Object(Pe.jsx)(ke.a,{icon:Ne.i}),Object(Pe.jsxs)("div",{children:[Object(Pe.jsxs)("h3",{children:[n.host.fullname," is A Superhost"]}),Object(Pe.jsxs)("h4",{children:[" ","Superhosts are experienced, highly rated hosts who are committed to providing great stays for guests."]})]})]}),Object(Pe.jsxs)("div",{className:"stay-features-details",children:[Object(Pe.jsx)(ke.a,{icon:Ne.c}),Object(Pe.jsxs)("div",{children:[Object(Pe.jsx)("h3",{children:"Wifi"}),Object(Pe.jsx)("h4",{children:"Guests often search for this popular amenity"})]})]})]}),Object(Pe.jsxs)("div",{className:"stay-description",children:[Object(Pe.jsx)("h2",{children:"Description"}),Object(Pe.jsx)("p",{children:n.desc})]}),Object(Pe.jsxs)("div",{className:"stay-amenities",id:"Amenities",children:[Object(Pe.jsx)("h2",{children:"Amenities"}),Object(Pe.jsx)(xt,{amenities:n.amenities})]})]}),Object(Pe.jsx)(_t,{stay:n,newOrder:this.props.newOrder,onAddOrder:this.onAddOrder,onRemoveOrder:this.onRemoveOrder,updateNumOfGuests:this.updateNumOfGuests,isGuestsModalShown:s,updateDates:this.updateDates,onToggleModal:this.onToggleModal,reviewsAvg:this.getReviewsAverage(n.reviews),orderId:this.props.location.orderId,onEditOrder:this.props.onEditOrder,capacity:n.capacity})]}),Object(Pe.jsxs)("div",{className:"reviews-header",id:"Reviews",children:[Object(Pe.jsxs)("div",{className:"reviews-header-rate",children:[Object(Pe.jsx)("span",{className:"stay-rate",children:Object(Pe.jsx)(ke.a,{className:"star",icon:Ne.l})}),Object(Pe.jsxs)("p",{children:[" ",this.getReviewsAverage(n.reviews)]}),Object(Pe.jsxs)("p",{children:["( ",n.reviews?n.reviews.length:0," reviews )"]})]}),Object(Pe.jsx)(Ot,{isEdit:!1,reviews:n.reviews})]}),Object(Pe.jsx)(Tt,{reviews:n.reviews}),Object(Pe.jsx)(vt,{onAddReview:function(t){return e.onAddReview(t)}}),Object(Pe.jsxs)("section",{id:"Location",className:"map-container",children:[Object(Pe.jsx)("h2",{children:"Location"}),Object(Pe.jsx)(Mt,{location:n.loc})]})]})}):Object(Pe.jsx)(He,{})}}]),n}(a.a.Component);var Yt={onAddOrder:function(e){return function(){var t=Object(m.a)(b.a.mark((function t(n){var s;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ee.add(e);case 2:return s=t.sent,t.prev=3,n({type:"ADD_ORDER",order:s}),R.emit("sendMsg","You recieved a new order : ".concat(e.stay.title)),pe("\u2713  Your order has been recieved  "),t.abrupt("return",s);case 10:t.prev=10,t.t0=t.catch(3),be("\u2717  Your Order not received,please try again "),console.log("Cannot add order",t.t0);case 14:case"end":return t.stop()}}),t,null,[[3,10]])})));return function(e){return t.apply(this,arguments)}}()},addReview:function(e,t){return function(){var n=Object(m.a)(b.a.mark((function n(s){var a;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Lt.add(e,t);case 3:a=n.sent,s({type:"ADD_REVIEW",review:a}),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),console.log("ReviewActions: err in addReview",n.t0);case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(e){return n.apply(this,arguments)}}()},loadReviews:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return function(){var t=Object(m.a)(b.a.mark((function t(n){var s;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:"SET_LOADER"}),t.next=4,Lt.query(e);case 4:s=t.sent,n({type:"SET_REVIEWS",reviews:s}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log("ReviewActions: err in loadReviews",t.t0);case 11:return t.prev=11,n({type:"SET_LOADER"}),t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[0,8,11,14]])})));return function(e){return t.apply(this,arguments)}}()},setGuests:function(e){return function(){var t=Object(m.a)(b.a.mark((function t(n){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.abrupt("return",n({type:"SET_GUESTS",order:e}));case 4:t.prev=4,t.t0=t.catch(0),console.log("Cannot set guests in order",t.t0);case 7:case"end":return t.stop()}}),t,null,[[0,4]])})));return function(e){return t.apply(this,arguments)}}()},changePage:ye,onEditOrder:function(e){return function(){var t=Object(m.a)(b.a.mark((function t(n){var s;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{s=Ee.updateOrder(e),n({type:"UPDATE_ORDER",order:s}),pe("Order updated")}catch(a){be("Cannot update order"),console.log("Cannot save order",a)}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},saveNotifiToUser:We},Wt=Object(o.b)((function(e){return{newOrder:e.orderModule.newOrder,orders:e.userModule.orders,reviews:e.reviewModule.reviews}}),Yt)(Gt),Vt=function(e){Object(se.a)(n,e);var t=Object(ae.a)(n);function n(){var e;Object(te.a)(this,n);for(var s=arguments.length,a=new Array(s),r=0;r<s;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))).state={filterBy:{stayType:""}},e.SetFilterStayType=function(t){console.log("SetFilterStayType");var n=e.props.stays;return console.log(" stays in dropdowntype",n),n.filter((function(e){return e.stayType===t}))},e}return Object(ne.a)(n,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props,t=(e.modalPos,e.onSetFrontFilter),n=this.props.modalPos.left;this.state.filterBy;return console.log("this.props.modalPos in stayType",this.props.modalPos),Object(Pe.jsx)("div",{className:"drop-down-stay-type",style:{left:n},children:Object(Pe.jsxs)("ul",{children:[Object(Pe.jsx)("li",{className:"li-type-item",onClick:function(){t("stayType","Entire place")},children:"Entire Place"}),Object(Pe.jsx)("li",{className:"li-type-item",onClick:function(){t("stayType","Private room")},children:"Private Room"})]})})}}]),n}(a.a.Component);var Ht={loadStays:me},Kt=Object(o.b)((function(e){return{stays:e.stayModule.stays,filterBy:e.stayModule.filterBy,modalPos:e.pageModule.modalPos}}),Ht)(Vt),$t=function(e){Object(se.a)(n,e);var t=Object(ae.a)(n);function n(){var e;Object(te.a)(this,n);for(var s=arguments.length,a=new Array(s),r=0;r<s;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))).state={filterBy:{type:""}},e.SetFilterStayType=function(t){var n={type:t};e.props.loadStays(n)},e}return Object(ne.a)(n,[{key:"render",value:function(){var e=this.props,t=(e.stays,e.onSetFrontFilter),n=this.props.modalPos.left;this.state.filterBy;return Object(Pe.jsx)("div",{className:"drop-down-property-type",style:{left:n},children:Object(Pe.jsxs)("ul",{children:[Object(Pe.jsx)("li",{className:"li-type-item",onClick:function(){t("type","Apartment")},children:"Appartment"}),Object(Pe.jsx)("li",{className:"li-type-item",onClick:function(){t("type","Studio")},children:"Studio"}),Object(Pe.jsx)("li",{className:"li-type-item",onClick:function(){t("type","Loft")},children:"Loft"}),Object(Pe.jsx)("li",{className:"li-type-item",onClick:function(){t("type","Room")},children:"Room"}),Object(Pe.jsx)("li",{className:"li-type-item",onClick:function(){t("type","Villa")},children:"Villa"})]})})}}]),n}(a.a.Component);var Jt={loadStays:me},Xt=Object(o.b)((function(e){return{stays:e.stayModule.stays,filterBy:e.stayModule.filterBy,modalPos:e.pageModule.modalPos}}),Jt)($t),zt=function(e){Object(se.a)(n,e);var t=Object(ae.a)(n);function n(){var e;Object(te.a)(this,n);for(var s=arguments.length,a=new Array(s),r=0;r<s;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))).state={TV:!1,Wifi:!1,Kitchen:!1,"Pets allowed":!1,"Cooking basics":!1,"Smoking allowed":!1},e}return Object(ne.a)(n,[{key:"render",value:function(){var e=this,t=this.state,n=t.TV,s=t.Wifi,a=t.Kitchen,r=this.props.modalPos.left;return Object(Pe.jsx)("div",{className:"drop-down-amenity",style:{left:r},children:Object(Pe.jsxs)("ul",{children:[Object(Pe.jsx)("li",{className:"li-type-item ".concat(n&&"amenity-active"),onClick:function(){e.setState({TV:!e.state.TV},(function(){e.props.onSetFrontFilter("amenities",e.state)}))},children:"TV"}),Object(Pe.jsx)("li",{className:"li-type-item ".concat(s&&"amenity-active"),onClick:function(){e.setState({Wifi:!e.state.Wifi},(function(){e.props.onSetFrontFilter("amenities",e.state)}))},children:"Wifi"}),Object(Pe.jsx)("li",{className:"li-type-item ".concat(a&&"amenity-active"),onClick:function(){e.setState({Kitchen:!e.state.Kitchen},(function(){e.props.onSetFrontFilter("amenities",e.state)}))},children:"Kitchen"}),Object(Pe.jsx)("li",{className:"li-type-item ".concat(this.state["Pets allowed"]&&"amenity-active"),onClick:function(){e.setState({"Pets allowed":!e.state["Pets allowed"]},(function(){e.props.onSetFrontFilter("amenities",e.state)}))},children:"Pets allowed"}),Object(Pe.jsx)("li",{className:"li-type-item ".concat(this.state["Cooking basics"]&&"amenity-active"),onClick:function(){e.setState({"Cooking basics":!e.state["Cooking basics"]},(function(){e.props.onSetFrontFilter("amenities",e.state)}))},children:"Cooking basics"}),Object(Pe.jsx)("li",{className:"li-type-item ".concat(this.state["Smoking allowed"]&&"amenity-active"),onClick:function(){e.setState({"Smoking allowed":!e.state["Smoking allowed"]},(function(){e.props.onSetFrontFilter("amenities",e.state)}))},children:"Smoking allowed"})]})})}}]),n}(a.a.Component);var Qt={loadStays:me},Zt=Object(o.b)((function(e){return{stays:e.stayModule.stays,filterBy:e.stayModule.filterBy,modalPos:e.pageModule.modalPos}}),Qt)(zt),en=n(348),tn=n(897),nn=n(49),sn=n(900),an=n(899),rn=["children"],cn=Object(nn.a)(tn.b)((function(e){var t=e.theme;return{color:"#3a8589",height:3,padding:"13px 0","& .MuiSlider-thumb":{height:27,width:27,backgroundColor:"#fff",border:"1px solid currentColor","&:hover":{boxShadow:"0 0 0 8px rgba(58, 133, 137, 0.16)"},"& .airbnb-bar":{height:9,width:1,backgroundColor:"currentColor",marginLeft:1,marginRight:1}},"& .MuiSlider-track":{height:3},"& .MuiSlider-rail":{color:"dark"===t.palette.mode?"#bfbfbf":"#d8d8d8",opacity:"dark"===t.palette.mode?void 0:1,height:3}}}));function on(e){var t=e.children,n=Object(en.a)(e,rn);return Object(Pe.jsxs)(tn.a,Object(h.a)(Object(h.a)({},n),{},{children:[t,Object(Pe.jsx)("span",{className:"airbnb-bar"}),Object(Pe.jsx)("span",{className:"airbnb-bar"}),Object(Pe.jsx)("span",{className:"airbnb-bar"})]}))}var ln=function(e){Object(se.a)(n,e);var t=Object(ae.a)(n);function n(){return Object(te.a)(this,n),t.apply(this,arguments)}return Object(ne.a)(n,[{key:"render",value:function(){return Object(Pe.jsxs)(an.a,{sx:{width:320},children:[Object(Pe.jsx)(an.a,{sx:{m:2}}),Object(Pe.jsx)(sn.a,{gutterBottom:!0,children:"Price"}),Object(Pe.jsx)(cn,{components:{Thumb:on},getAriaLabel:function(e){return 0===e?"Minimum price":"Maximum price"},defaultValue:[50,1920],onChange:this.props.handleChange,min:0,max:2e3})]})}}]),n}(s.Component),dn=function(e){Object(se.a)(n,e);var t=Object(ae.a)(n);function n(){var e;Object(te.a)(this,n);for(var s=arguments.length,a=new Array(s),r=0;r<s;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))).state={price:[200,500],valuetext:"0",minPrice:50,maxPrice:1920},e.handleChange=function(t){var n=t.target.value[0],s=t.target.value[1];e.setState({minPrice:n},(function(){e.props.onSetFrontFilter("price",{minPrice:n,maxPrice:s})})),e.setState({maxPrice:s},(function(){e.props.onSetFrontFilter("price",{minPrice:n,maxPrice:s})}))},e}return Object(ne.a)(n,[{key:"render",value:function(){var e=this.state,t=(e.filterBy,e.price),n=(e.valuetext,this.props.modalPos.left);return Object(Pe.jsxs)("div",{className:"drop-down-stay-price",style:{left:n},children:[Object(Pe.jsx)(ln,{min:this.state.minPrice,max:this.state.maxPrice,value:t,handleChange:this.handleChange}),Object(Pe.jsxs)("div",{className:"price-range price-min",children:["min price: $",this.state.minPrice," "]}),Object(Pe.jsxs)("div",{className:"price-range price-max",children:["max price: $",this.state.maxPrice]})]})}}]),n}(a.a.Component);var un={loadStays:me},hn=Object(o.b)((function(e){return{stays:e.stayModule.stays,filterBy:e.stayModule.filterBy,modalPos:e.pageModule.modalPos}}),un)(dn),jn=function(e){Object(se.a)(n,e);var t=Object(ae.a)(n);function n(){var e;Object(te.a)(this,n);for(var s=arguments.length,a=new Array(s),r=0;r<s;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))).state={stays:[],filterBy:{city:""},frontFilter:{},bottom:null,left:null,isStayTypeShown:!1,isPropertyTypeShown:!1,isAmenitiesShown:!1,isDropDownPriceShown:!1,isLoaded:!1},e.staysToDisplay=function(){var t=e.state.stays,n=e.urlParamCity;if(!n)return t;e.props.loadStays(n)},e.onFilterBy=function(){var t=e.state.filterBy.city;e.setState((function(e){return{isLoaded:!0,filterBy:Object(h.a)(Object(h.a)({},e.filterBy),{},{city:t})}}))},e.onSetFrontFilter=function(t,n){console.log("onSetFrontFilter"),console.log("filterKey:",t),console.log("value:",n),e.setState(Object(h.a)(Object(h.a)({},e.state),{},{stays:e.props.stays}));var s=e.state,a=(s.stays,s.frontFilter);a[t]===n&&(n=""),e.setState({frontFilter:Object(h.a)(Object(h.a)({},e.state.frontFilter),{},Object(Ze.a)({},t,n))},(function(){console.log("frontFilter in onSetFrontFilter",a);var t=ie.queryFront(e.props.stays,e.state.frontFilter);console.log("staysToDisplay: ",t),e.setState(Object(h.a)(Object(h.a)({},e.state),{},{stays:t}),(function(){}))}))},e.onClearFrontFilter=function(){console.log("onClearFrontFilter"),e.setState({frontFilter:{stayType:"",type:"",price:{min:0,max:1/0},amenities:{TV:!1,Wifi:!1,Kitchen:!1,"Pets allowed":!1,"Cooking basics":!1,"Smoking allowed":!1}}})},e.onChange=function(e){alert("changed check the console log"),console.log(e)},e}return Object(ne.a)(n,[{key:"componentDidMount",value:function(){var e=Object(m.a)(b.a.mark((function e(){var t,n,s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return window.scrollTo(0,0),this.props.changePage("explore"),t=this.urlParamCity,n={city:t},e.next=6,this.props.loadStays(n);case 6:this.setState((function(e){return{isLoaded:!0,filterBy:Object(h.a)(Object(h.a)({},e.filterBy),{},{city:t})}})),s=this.props.stays,this.setState({stays:s}),this.onClearFrontFilter();case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"urlParamCity",get:function(){return console.log("this.props.location.search",this.props.location),new URLSearchParams(this.props.location.search).get("city")}},{key:"componentWillUnmount",value:function(){this.setState({isLoaded:!1})}},{key:"render",value:function(){var e=this,t=this.state.filterBy.city,n=this.state.stays,s=this.state,a=(s.bottom,s.left,this.state),r=(a.isSaved,a.isLoaded,a.isStayTypeShown),c=a.isPropertyTypeShown,i=a.isAmenitiesShown,o=a.isDropDownPriceShown;return n&&n.length?Object(Pe.jsxs)("section",{className:"explore-page main-container",children:[Object(Pe.jsxs)("p",{className:"stays-num",children:[n.length," stays"]}),t?Object(Pe.jsxs)("h1",{children:["Stays in ",Object(Pe.jsx)("span",{className:"city-title",children:t})]}):Object(Pe.jsx)("h1",{children:"Find a place to stay "}),Object(Pe.jsxs)("section",{className:"stay-filter",children:[Object(Pe.jsx)("button",{onClick:function(t){var n=t.target.getBoundingClientRect().left;e.props.setModalPos({left:n}),console.log(t.target.getBoundingClientRect()),e.setState({isStayTypeShown:!r})},children:"Type of place"}),r&&Object(Pe.jsx)(Kt,{onSetFrontFilter:this.onSetFrontFilter}),Object(Pe.jsx)("button",{onClick:function(t){var n=t.target.getBoundingClientRect().left;e.props.setModalPos({left:n}),console.log(t.target.getBoundingClientRect()),e.setState({isPropertyTypeShown:!c})},children:"Property type"}),c&&Object(Pe.jsx)(Xt,{onSetFrontFilter:this.onSetFrontFilter}),Object(Pe.jsx)("button",{onClick:function(t){var n=t.target.getBoundingClientRect().left;e.props.setModalPos({left:n}),e.setState({isDropDownPriceShown:!o})},children:"Price"}),o&&Object(Pe.jsx)(hn,{onSetFrontFilter:this.onSetFrontFilter}),Object(Pe.jsx)("button",{onClick:function(t){var n=t.target.getBoundingClientRect().left;e.props.setModalPos({left:n}),e.setState({isAmenitiesShown:!i})},children:"Amenities"}),i&&Object(Pe.jsx)(Zt,{onSetFrontFilter:this.onSetFrontFilter}),Object(Pe.jsx)("button",{onClick:function(){e.setState(Object(h.a)(Object(h.a)({},e.state),{},{stays:e.props.stays}))},children:"Clear"})]}),Object(Pe.jsx)(Qe,{stays:n})]}):Object(Pe.jsx)(He,{})}}]),n}(a.a.Component);var pn={loadStays:me,filterStays:Oe,changePage:ye,setModalPos:we},bn=Object(o.b)((function(e){return{stays:e.stayModule.stays,filterBy:e.stayModule.filterBy}}),pn)(jn),mn=function(e){Object(se.a)(n,e);var t=Object(ae.a)(n);function n(){var e;Object(te.a)(this,n);for(var s=arguments.length,a=new Array(s),r=0;r<s;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))).state={credentials:{username:"",password:"",email:"",fullname:"",savedStays:[]},isSignup:!1},e.toggleSignup=function(){e.setState({isSignup:!e.state.isSignup})},e.handleChange=function(t){var n=t.target.name,s=t.target.value;e.setState({credentials:Object(h.a)(Object(h.a)({},e.state.credentials),{},Object(Ze.a)({},n,s))})},e.clearState=function(){e.setState({clearTemplate:{credentials:{username:"",password:"",fullname:""},isSignup:!1}})},e.onLogin=Object(m.a)(b.a.mark((function t(){var n,s,a=arguments;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((n=a.length>0&&void 0!==a[0]?a[0]:null)&&n.preventDefault(),e.state.credentials.username&&e.state.credentials.password){t.next=4;break}return t.abrupt("return");case 4:return t.prev=4,t.next=7,e.props.onLogin(e.state.credentials);case 7:(s=t.sent).isHost&&(R.setup(),R.emit("setHost",s._id),R.on("setNotification",function(){var t=Object(m.a)(b.a.mark((function t(n){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("msg host",n),s=Object(h.a)(Object(h.a)({},s),{},{savedNotifications:[].concat(Object(u.a)(s.savedNotifications),[{date:U.formattedDates(Date.now()),msg:n,isRead:!1}])}),console.log("user after socket: ",s),e.props.onUpdateUser(s);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),s&&e.props.history.push("/"),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(4),console.log("error:",t.t0);case 15:e.clearState();case 16:case"end":return t.stop()}}),t,null,[[4,12]])}))),e.onSignup=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(e.state.credentials.username&&e.state.credentials.password&&e.state.credentials.fullname){t&&t.preventDefault();try{var n=e.props.onSignup(e.state.credentials);n&&e.props.history.push("/")}catch(s){console.log("error:",s)}e.clearState()}},e}return Object(ne.a)(n,[{key:"componentDidMount",value:function(){window.scrollTo(0,0),this.props.changePage("login"),this.props.user&&this.props.history.push("/")}},{key:"render",value:function(){var e=this.state,t=e.username,n=e.fullname,s=e.password,a=e.email,r=e.isSignup;return Object(Pe.jsx)("section",{className:"login-page main-container",children:Object(Pe.jsxs)("div",{className:"login-page-container",children:[!r&&Object(Pe.jsx)("div",{className:"login-form-container",children:Object(Pe.jsxs)("form",{className:"login-form",onSubmit:this.onLogin,children:[Object(Pe.jsx)("div",{className:"login-header",children:Object(Pe.jsx)("h2",{children:"Log in"})}),Object(Pe.jsxs)("div",{className:"login-content",children:[Object(Pe.jsx)("h1",{children:"Welcome back"}),Object(Pe.jsx)("input",{className:"login-form-input",type:"text",name:"username",placeholder:"Username",autoComplete:"off",value:t,onChange:this.handleChange,required:!0}),Object(Pe.jsx)("input",{className:"login-form-input",type:"password",name:"password",placeholder:"Password",autoComplete:"off",value:s,onChange:this.handleChange,required:!0}),Object(Pe.jsx)("button",{type:"submit",className:"login-btn",children:"submit"})]}),Object(Pe.jsxs)("div",{className:"login-form-actions",children:[Object(Pe.jsx)("button",{onClick:this.toggleSignup,children:"New User?"}),Object(Pe.jsx)("button",{children:"Forgot Password?"})]})]})}),r&&Object(Pe.jsx)("div",{className:"login-form-container",children:Object(Pe.jsxs)("form",{className:"login-form",onSubmit:this.onSignup,children:[Object(Pe.jsx)("div",{className:"login-header",children:Object(Pe.jsx)("h2",{children:"Log in"})}),Object(Pe.jsxs)("div",{className:"login-content",children:[Object(Pe.jsx)("h1",{children:"Welcome to Travel & Live"}),Object(Pe.jsx)("input",{className:"login-form-input",type:"text",name:"fullname",placeholder:"Full name",autoComplete:"off",value:n,onChange:this.handleChange,required:!0}),Object(Pe.jsx)("input",{className:"login-form-input",type:"password",name:"password",placeholder:"Password",autoComplete:"off",value:s,onChange:this.handleChange,required:!0}),Object(Pe.jsx)("input",{className:"login-form-input",type:"text",name:"username",placeholder:"Username",autoComplete:"off",value:t,onChange:this.handleChange,required:!0}),Object(Pe.jsx)("input",{className:"login-form-input",type:"email",name:"email",placeholder:"Email",autoComplete:"off",value:a,onChange:this.handleChange,required:!0}),Object(Pe.jsx)("button",{type:"submit",className:"login-btn",children:"sign up"})]}),Object(Pe.jsx)("div",{className:"login-form-actions",children:Object(Pe.jsx)("button",{onClick:this.toggleSignup,children:"I already have an account"})})]})})]})})}}]),n}(s.Component);var On={onLogin:Ie,onSignup:Be,changePage:ye,onUpdateUser:qe},fn=Object(o.b)((function(e){return{user:e.userModule.user}}),On)(mn),vn=function(e){Object(se.a)(n,e);var t=Object(ae.a)(n);function n(){var e;Object(te.a)(this,n);for(var s=arguments.length,a=new Array(s),r=0;r<s;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))).state={credentials:{username:"",fullname:"",email:"",imgUrl:""},isEdit:!1},e.handleChange=function(t){var n=t.target.name,s=t.target.value;e.setState({credentials:Object(h.a)(Object(h.a)({},e.state.credentials),{},Object(Ze.a)({},n,s))})},e.toggleEdit=function(){var t=e.state.isEdit;e.setState({isEdit:!t}),t&&e.onSave()},e.onSave=function(){e.props.onUpdateUser(e.state.credentials)},e}return Object(ne.a)(n,[{key:"componentDidMount",value:function(){this.props.changePage("details"),window.scrollTo(0,0);var e=this.props.user;e||this.props.history.push("/"),this.setState({credentials:e})}},{key:"render",value:function(){var e=this.state.isEdit,t=this.state.credentials,n=t.username,s=t.fullname,a=t.email,r=t.imgUrl;return Object(Pe.jsxs)("section",{className:"account-info-page main-container",children:[Object(Pe.jsx)("h1",{children:"Personal info"}),Object(Pe.jsxs)("div",{className:"user-details",children:[!e&&Object(Pe.jsxs)("div",{className:"user-details-content",children:[Object(Pe.jsxs)("div",{className:"user-details-header",children:[Object(Pe.jsx)("img",{src:r}),Object(Pe.jsxs)("div",{children:[Object(Pe.jsxs)("h4",{children:["Hello ",s]}),Object(Pe.jsx)("p",{children:"It's nice to have you with us"})]})]}),Object(Pe.jsxs)("div",{className:"user-info",children:[Object(Pe.jsx)("h4",{children:"Full Name"}),Object(Pe.jsx)("p",{children:s})]}),Object(Pe.jsxs)("div",{className:"user-info",children:[Object(Pe.jsx)("h4",{children:"Username"}),Object(Pe.jsx)("p",{children:n})]}),Object(Pe.jsxs)("div",{className:"user-info",children:[Object(Pe.jsx)("h4",{children:"Email"}),Object(Pe.jsx)("p",{children:a})]}),Object(Pe.jsx)("button",{onClick:this.toggleEdit,children:"Edit"})]}),e&&Object(Pe.jsxs)("div",{className:"user-details-content",children:[Object(Pe.jsxs)("div",{className:"user-details-header",children:[Object(Pe.jsx)("img",{src:r}),Object(Pe.jsxs)("div",{children:[Object(Pe.jsxs)("h4",{children:["Hello ",s]}),Object(Pe.jsx)("p",{children:"It's nice to have you with us"})]})]}),Object(Pe.jsxs)("div",{className:"user-info",children:[Object(Pe.jsx)("h4",{children:"Full Name"}),Object(Pe.jsx)("p",{children:Object(Pe.jsx)("input",{type:"text",name:"fullname",placeholder:"Full name",autoComplete:"off",value:s,onChange:this.handleChange,required:!0})})]}),Object(Pe.jsxs)("div",{className:"user-info",children:[Object(Pe.jsx)("h4",{children:"Username"}),Object(Pe.jsx)("p",{children:Object(Pe.jsx)("input",{type:"text",name:"username",placeholder:"Username",autoComplete:"off",value:n,onChange:this.handleChange,required:!0})})]}),Object(Pe.jsxs)("div",{className:"user-info",children:[Object(Pe.jsx)("h4",{children:"Email"}),Object(Pe.jsx)("p",{children:Object(Pe.jsx)("input",{type:"email",name:"email",placeholder:"Email",autoComplete:"off",value:a,onChange:this.handleChange,required:!0})})]}),Object(Pe.jsx)("button",{onClick:this.toggleEdit,children:"save"})]}),Object(Pe.jsxs)("div",{className:"info-container",children:[Object(Pe.jsxs)("div",{children:[Object(Pe.jsx)("img",{src:"https://home-and-go.herokuapp.com/static/media/user-lock.b5a4d298.PNG"}),Object(Pe.jsx)("h3",{children:"Which details can be edited?"}),Object(Pe.jsx)("p",{children:"Details Airbnb uses to verify your identity can\u2019t be changed. Contact info and some personal details can be edited, but we may ask you verify your identity the next time you book or create a listing."})]}),Object(Pe.jsxs)("div",{children:[Object(Pe.jsx)("img",{src:"https://home-and-go.herokuapp.com/static/media/user-card.45d2a01a.PNG"}),Object(Pe.jsx)("h3",{children:"What info is shared with others?"}),Object(Pe.jsx)("p",{children:"Airbnb only releases contact information for hosts and guests after a reservation is confirmed."})]})]})]})]})}}]),n}(s.Component);var gn={onUpdateUser:qe,getCurrentUser:Ge,changePage:ye},xn=Object(o.b)((function(e){return{user:e.userModule.user}}),gn)(vn);var yn={onRemoveStay:fe},wn=Object(o.b)((function(e){return{stays:e.stayModule.stays}}),yn)((function(e){var t=e.stays,n=e.onEditStay,s=e.onRemoveStay,a=e.userId;return t=t.filter((function(e){return e.host._id===a})),console.log("stays in hostliststsays",t),Object(Pe.jsx)("div",{className:"host-stay-list",children:Object(Pe.jsxs)("table",{children:[Object(Pe.jsxs)("thead",{children:[Object(Pe.jsx)("th",{children:"Name"}),Object(Pe.jsx)("th",{children:"Type"}),Object(Pe.jsx)("th",{children:"Price"}),Object(Pe.jsx)("th",{children:"Actions"})]}),t.map((function(e){return Object(Pe.jsxs)("tr",{children:[Object(Pe.jsx)("td",{children:e.title}),Object(Pe.jsx)("td",{children:e.type}),Object(Pe.jsxs)("td",{children:["$",e.price]})," ",Object(Pe.jsxs)("td",{children:[Object(Pe.jsx)("button",{onClick:function(){return s(e._id)},children:"Delete"}),Object(Pe.jsx)("button",{onClick:function(){return n(e._id)},children:"Edit"})]})]})}))]})})})),Sn=function(e){Object(se.a)(n,e);var t=Object(ae.a)(n);function n(){var e;Object(te.a)(this,n);for(var s=arguments.length,a=new Array(s),r=0;r<s;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))).changeOrderStatus=function(){var t=Object(m.a)(b.a.mark((function t(n,s){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.onUpdateOrder(n,s);case 2:R.emit("sendMsg","your order:".concat(n.stay.title," status has change to:").concat(s));case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.formattedDates=function(e){return e?new Date(e).toLocaleDateString("en-GB"):"Add dates"},e.getUserImg=function(){var e=Object(m.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.getById(t);case 2:return n=e.sent,console.log(typeof n.imgUrl),e.abrupt("return",n.imgUrl);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e}return Object(ne.a)(n,[{key:"componentDidMount",value:function(){var e=Object(m.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.getLoggedinUser();case 2:t=e.sent,{userId:null,hostId:t._id},this.props.loadOrders(t._id,!0);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props.orders;return console.log("orders:",t),t&&t.length?Object(Pe.jsx)("div",{className:"host-orders-list",children:Object(Pe.jsxs)("table",{children:[Object(Pe.jsxs)("thead",{children:[Object(Pe.jsx)("th",{children:"Name"}),Object(Pe.jsx)("th",{}),Object(Pe.jsx)("th",{children:"Property Name"}),Object(Pe.jsx)("th",{children:"Check In"}),Object(Pe.jsx)("th",{children:"Check Out"}),Object(Pe.jsx)("th",{children:"Status"}),Object(Pe.jsx)("th",{children:"Actions"})]}),t.map((function(t){return Object(Pe.jsxs)("tr",{children:[Object(Pe.jsx)("td",{children:t.user.fullname}),Object(Pe.jsx)("td",{children:Object(Pe.jsx)("img",{className:"host-orders-img",src:t.stay.imgUrls[0]})}),Object(Pe.jsx)("td",{children:t.stay.title}),Object(Pe.jsx)("td",{children:e.formattedDates(t.checkIn)}),Object(Pe.jsx)("td",{children:e.formattedDates(t.checkOut)}),Object(Pe.jsx)("td",{children:Object(Pe.jsx)("span",{className:t.status,children:t.status})})," ",Object(Pe.jsxs)("td",{children:[Object(Pe.jsx)("button",{className:"host-accept-btn",onClick:function(){e.changeOrderStatus(t,"accepted")},children:"Accept"}),Object(Pe.jsx)("button",{className:"host-decline-btn",onClick:function(){e.changeOrderStatus(t,"declined")},children:"Decline"})]})]})}))]})}):Object(Pe.jsx)(He,{})}}]),n}(a.a.Component);var kn={loadOrders:ut,onUpdateOrder:function(e,t){return function(){var n=Object(m.a)(b.a.mark((function n(s){return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,e.status=t,n.next=4,Ee.updateOrder(e);case 4:s({type:"UPDATE_ORDER_STATUS",order:e}),pe("Order updated"),n.next=12;break;case 8:n.prev=8,n.t0=n.catch(0),be("Cannot update order"),console.log("Cannot save order",n.t0);case 12:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(e){return n.apply(this,arguments)}}()}},Nn=Object(o.b)((function(e){return{orders:e.orderModule.orders}}),kn)(Sn),Cn=n(347),An=function(){return Object(Pe.jsx)("div",{className:"host-charts",style:{width:"100%"},children:Object(Pe.jsx)(Cn.a,{data:{labels:["\u272d","\u272d\u272d","\u272d\u272d\u272d","\u272d\u272d\u272d\u272d","\u272d\u272d\u272d\u272d\u272d"],datasets:[{label:"# of Votes",data:[12,19,5,70,50],backgroundColor:["rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)","rgba(55, 206, 86, 0.2)","rgba(155, 206, 86, 0.2)"],borderColor:["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(55, 206, 86, 0.2)","rgba(155, 206, 86, 0.2)"],borderWidth:3}]}})})},Pn=function(e){Object(se.a)(n,e);var t=Object(ae.a)(n);function n(){return Object(te.a)(this,n),t.apply(this,arguments)}return Object(ne.a)(n,[{key:"render",value:function(){return Object(Pe.jsx)("div",{className:"host-rates",children:Object(Pe.jsx)(An,{})})}}]),n}(a.a.Component);var Dn=Object(o.b)((function(e){return{}}))(Pn),_n=function(e){Object(se.a)(n,e);var t=Object(ae.a)(n);function n(){var e;Object(te.a)(this,n);for(var s=arguments.length,a=new Array(s),r=0;r<s;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))).state={earnings:0,totalRate:0},e.getTotalEarnings=function(){var t=e.props.orders;return t&&t.length?t.reduce((function(e,t){return t.totalPrice?e+t.totalPrice:0}),0):0},e.getRandomNum=function(){return U.getRandomIntInclusive(1,5)},e.getAccepted=function(){var t=e.props.orders;return t&&t.length?t.filter((function(e){return e.status.includes("accepted")})).length:0},e.getDeclined=function(){var t=e.props.orders;return t&&t.length?t.filter((function(e){return e.status.includes("declined")})).length:0},e.getPending=function(){var t=e.props.orders;return t&&t.length?t.filter((function(e){return e.status.includes("pending")})).length:0},e.getNumOfOrders=function(){var t=e.props.orders;return t&&t.length?t.reduce((function(e,t){return e+1}),0):0},e}return Object(ne.a)(n,[{key:"componentDidMount",value:function(){var e=Object(m.a)(b.a.mark((function e(){var t,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.user,e.next=3,this.props.loadOrders(t._id,!0);case 3:n=this.getTotalEarnings(),this.setState({earnings:n});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.earnings;e.totalRate;return Object(Pe.jsxs)("section",{className:"host-header",children:[Object(Pe.jsxs)("div",{className:"card-item",children:[Object(Pe.jsx)("p",{children:"Average Rate"}),Object(Pe.jsxs)("div",{children:[Object(Pe.jsxs)("span",{children:[" ",Object(Pe.jsx)(ke.a,{className:"star",icon:Ne.l}),"4.5/5"]}),Object(Pe.jsxs)("span",{className:"percent",children:[this.getRandomNum(),"%",Object(Pe.jsx)(ke.a,{className:"arrow",icon:Ne.h})]})]})]}),Object(Pe.jsxs)("div",{className:"card-item",children:[Object(Pe.jsx)("p",{children:"Monthly Earnings"}),Object(Pe.jsxs)("span",{children:["$",t.toLocaleString()]})]}),Object(Pe.jsxs)("div",{className:"card-item",children:[Object(Pe.jsx)("p",{children:"Orders"}),Object(Pe.jsxs)("div",{className:"reviews-numbers",children:[Object(Pe.jsx)("span",{children:this.getNumOfOrders()}),Object(Pe.jsxs)("div",{className:"reviews-colors-container",children:[Object(Pe.jsx)("span",{className:"circle green-circle"}),Object(Pe.jsx)("p",{children:this.getAccepted()}),Object(Pe.jsx)("span",{className:"circle yellow-circle"}),Object(Pe.jsx)("p",{children:this.getPending()}),Object(Pe.jsx)("span",{className:"circle red-circle"}),Object(Pe.jsx)("p",{children:this.getDeclined()})]})]})]})]})}}]),n}(a.a.Component);var En={getCurrentUser:Ge,loadOrders:ut},Tn=Object(o.b)((function(e){return{user:e.userModule.user,orders:e.orderModule.orders}}),En)(_n),Rn=function(e){Object(se.a)(n,e);var t=Object(ae.a)(n);function n(){var e;Object(te.a)(this,n);for(var s=arguments.length,a=new Array(s),r=0;r<s;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))).state={add:!1,places:!1,orders:!1,rates:!1,user:L.getLoggedinUser(),isEdit:!1,stay:null},e.ColoredLine=function(e){var t=e.color;return Object(Pe.jsx)("hr",{style:{color:t,backgroundColor:t,height:2,width:100}})},e.changeCmp=function(t){switch(t){case"add":e.setState({add:!0}),e.setState({places:!1}),e.setState({orders:!1}),e.setState({rates:!1});break;case"places":e.setState({places:!0}),e.setState({orders:!1}),e.setState({rates:!1}),e.setState({add:!1});break;case"orders":e.setState({orders:!0}),e.setState({places:!1}),e.setState({rates:!1}),e.setState({add:!1});break;case"rates":e.setState({rates:!0}),e.setState({orders:!1}),e.setState({places:!1}),e.setState({add:!1})}},e.onEditStay=function(t){var n=e.props.stays,s=Object(h.a)({},n.filter((function(e){return e._id===t})));e.setState({isEdit:!0,stay:s},(function(){e.changeCmp("add")}))},e}return Object(ne.a)(n,[{key:"componentDidMount",value:function(){var e=Object(m.a)(b.a.mark((function e(){var t,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return window.scrollTo(0,0),this.props.changePage("host"),this.props.loadStays(),e.next=5,L.getLoggedinUser();case 5:t=e.sent,this.setState(t),n=this.props.stays,n.filter((function(e){return e.host._id===t._id})),this.changeCmp("orders");case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props.stays,n=this.state,s=n.user,a=n.isEdit,r=n.stay;return t&&t.length?Object(Pe.jsx)("section",{className:"host-page main-container",children:Object(Pe.jsxs)("div",{className:"host-page-container",children:[Object(Pe.jsxs)("div",{className:"nav-side",children:[Object(Pe.jsxs)("div",{className:"actions-line",children:[Object(Pe.jsxs)("div",{className:"icons",children:[Object(Pe.jsx)("span",{children:Object(Pe.jsx)(ke.a,{className:"building",icon:nt.a})}),Object(Pe.jsx)("span",{children:Object(Pe.jsx)(ke.a,{className:"home",icon:Ne.g})}),Object(Pe.jsx)("span",{children:Object(Pe.jsx)(ke.a,{className:"open-book",icon:Ne.b})}),Object(Pe.jsx)("span",{children:Object(Pe.jsx)(ke.a,{className:"star",icon:Ne.l})})]}),Object(Pe.jsxs)("div",{className:"actions",children:[Object(Pe.jsx)("span",{children:Object(Pe.jsx)("button",{onClick:function(){return e.changeCmp("add")},children:"Add Place"})}),Object(Pe.jsx)("span",{children:Object(Pe.jsx)("button",{onClick:function(){return e.changeCmp("places")},children:"My Places"})}),Object(Pe.jsx)("span",{children:Object(Pe.jsxs)("button",{onClick:function(){return e.changeCmp("orders")},children:["Orders"," "]})}),Object(Pe.jsx)("span",{children:Object(Pe.jsx)("button",{onClick:function(){return e.changeCmp("rates")},children:"Rates"})})]})]}),Object(Pe.jsxs)("div",{className:"info",children:[Object(Pe.jsx)(ke.a,{className:"money",icon:nt.d}),Object(Pe.jsx)("h3",{children:"Make All Payments Through Travel & Live"}),Object(Pe.jsx)("p",{children:"Always pay and communicate through Travel & Live to ensure you're protected under our Terms of Service, Payments Terms of Service, cancellation, and other safeguards."})]})]}),Object(Pe.jsxs)("section",{className:"host-page-content",children:[Object(Pe.jsx)(Tn,{}),this.state.add&&Object(Pe.jsx)("section",{className:"add place",children:Object(Pe.jsx)(rt,{isEdit:a,stay:r,user:s})}),this.state.places&&Object(Pe.jsxs)("section",{className:"places",children:[" ",Object(Pe.jsx)(wn,{stays:t,onRemovehost:this.onRemovehost,onEditStay:this.onEditStay,ColoredLine:this.ColoredLine,userId:s._id})]}),this.state.orders&&Object(Pe.jsx)("section",{className:"orders",children:Object(Pe.jsx)(Nn,{ColoredLine:this.ColoredLine})}),this.state.rates&&Object(Pe.jsx)("section",{className:"rates",children:Object(Pe.jsx)(Dn,{})}),this.state.rates&&Object(Pe.jsx)("section",{className:"rates"})]})]})}):Object(Pe.jsx)(He,{})}}]),n}(a.a.Component);var Un={loadStays:me,changePage:ye},Mn=Object(o.b)((function(e){return{stays:e.stayModule.stays}}),Un)(Rn),Fn=function(e){Object(se.a)(n,e);var t=Object(ae.a)(n);function n(){var e;Object(te.a)(this,n);for(var s=arguments.length,a=new Array(s),r=0;r<s;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))).state={userSavedStay:null,isSaved:!0,currStay:null},e.onRemoveSaveStay=function(){var t=Object(m.a)(b.a.mark((function t(n){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),n.stopPropagation(),e.setState({isSaved:!e.state.isSaved}),t.next=5,e.props.onRemoveSavedStay(e.state.currStay._id);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(ne.a)(n,[{key:"componentDidMount",value:function(){var e=Object(m.a)(b.a.mark((function e(){var t,n,s=this;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("WishListPreview"),t=this.props.stayId,e.next=4,ie.getById(t);case 4:n=e.sent,this.setState({currStay:n}),console.log("currStay**********************",n,t),this.setState({userSavedStay:n},(function(){console.log("userSavedStay in wishList Preview",s.userSavedStay)}));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.userSavedStay;e.isSaved;return t?Object(Pe.jsx)("div",{className:"wishlist-preview",children:Object(Pe.jsxs)("div",{className:"inner-wishlist-preview",children:[Object(Pe.jsx)("button",{className:"stay-preview-save-btn on",children:Object(Pe.jsx)(ke.a,{icon:Ne.f})}),Object(Pe.jsx)(De,{stay:t}),Object(Pe.jsxs)("div",{className:"preview-content",children:[Object(Pe.jsxs)("span",{className:"stay-rate",children:[Object(Pe.jsx)(ke.a,{icon:Ne.l}),t.avgReviewRating&&t.reviews&&Object(Pe.jsxs)("span",{className:"prev-rev-txt",children:[t.avgReviewRating," ( ",t.reviews.length," )"]})]}),Object(Pe.jsxs)("p",{children:[t.type," \u2027 ",t.city,"  "]}),Object(Pe.jsxs)("p",{className:"title-prev",children:[" ",t.title]}),Object(Pe.jsxs)("p",{children:[Object(Pe.jsxs)("span",{className:"price-prev",children:["$",t.price]})," / night"]})]})]})}):Object(Pe.jsx)("h2",{children:" "})}}]),n}(a.a.Component);var Ln={removeStayFromUser:Ye},In=Object(o.b)((function(e){return{}}),Ln)(Fn);function Bn(e){var t=e.userSavedStays,n=e.onRemoveSavedStay;return Object(Pe.jsx)("div",{className:"wish-list",children:t.map((function(e){return Object(Pe.jsx)(In,{stayId:e,onRemoveSavedStay:n},e)}))})}var qn=function(e){Object(se.a)(n,e);var t=Object(ae.a)(n);function n(){var e;Object(te.a)(this,n);for(var s=arguments.length,a=new Array(s),r=0;r<s;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))).state={userSavedStays:[]},e.onRemoveSavedStay=function(){var t=Object(m.a)(b.a.mark((function t(n){var s;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.props.removeStayFromUser(n),t.next=3,e.props.loadStaysFromUser();case 3:s=t.sent,console.log("userSavedStays in onRemoveSavedStay",s),e.setState({userSavedStays:s},(function(){}));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(ne.a)(n,[{key:"componentDidMount",value:function(){var e=Object(m.a)(b.a.mark((function e(){var t,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return window.scrollTo(0,0),t=this.props.savedStays,this.setState({userSavedStays:t}),e.next=5,L.getLoggedinUser();case 5:if(e.sent){e.next=9;break}return this.props.history.push("/"),e.abrupt("return");case 9:return e.next=11,this.props.loadStaysFromUser();case 11:n=e.sent,this.setState({userSavedStays:n},(function(){}));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.userSavedStays;return e?Object(Pe.jsxs)("section",{className:"wishlist-page main-container",children:[Object(Pe.jsx)("h1",{children:"Wish List"}),Object(Pe.jsx)(Bn,{userSavedStays:e,onRemoveSavedStay:this.onRemoveSavedStay})]}):Object(Pe.jsx)("h2",{children:"loading..."})}}]),n}(a.a.Component);var Gn={loadStays:me,filterStays:Oe,changePage:ye,loadStaysFromUser:function(){return function(){var e=Object(m.a)(b.a.mark((function e(t){var n,s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L.getLoggedinUser();case 3:return n=e.sent,s=n.savedStays,t({type:"LOAD_USER_STAYS",stays:s}),e.abrupt("return",s);case 9:e.prev=9,e.t0=e.catch(0),console.log("UserActions: err in loadStaysFromUser",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()},removeStayFromUser:Ye},Yn=Object(o.b)((function(e){return{savedStays:e.userModule.savedStays}}),Gn)(qn),Wn=function(e){Object(se.a)(n,e);var t=Object(ae.a)(n);function n(){var e;Object(te.a)(this,n);for(var s=arguments.length,a=new Array(s),r=0;r<s;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))).handleClick=function(){var t=L.getLoggedinUser();t||e.props.history.push("/login"),t.isHost=!0,e.props.onUpdateUser(t),e.props.history.push("/host/".concat(t._id))},e}return Object(ne.a)(n,[{key:"componentDidMount",value:function(){window.scrollTo(0,0),this.props.changePage("become-host")}},{key:"render",value:function(){return Object(Pe.jsxs)("section",{className:"become-host",children:[Object(Pe.jsx)("div",{className:"become-txt",children:Object(Pe.jsxs)("div",{className:"txt",children:[Object(Pe.jsx)("h1",{children:"Hosting"}),Object(Pe.jsx)("h1",{children:"makes Travel & Live,"}),Object(Pe.jsx)("h1",{children:" Travel & Live"}),Object(Pe.jsx)("button",{onClick:this.handleClick,children:"Try hosting"})]})}),Object(Pe.jsx)("div",{className:"become-img",children:Object(Pe.jsx)("img",{src:"https://res.cloudinary.com/dohqnraie/image/upload/v1633436517/airbnb-host-greeting-guest_matj9w.jpg",alt:""})})]})}}]),n}(a.a.Component);var Vn={changePage:ye,onUpdateUser:qe},Hn=Object(o.b)((function(e){return{stays:e.stayModule.stays,user:e.userModule.user}}),Vn)(Wn),Kn=(n(875),function(e){Object(se.a)(n,e);var t=Object(ae.a)(n);function n(){return Object(te.a)(this,n),t.apply(this,arguments)}return Object(ne.a)(n,[{key:"componentDidMount",value:function(){var e=Object(m.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.props.changePage("notifications"),console.log("user in notifi",this.props.user);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){var e=this.props.user;e&&(e.savedNotifcations=e.savedNotifications.map((function(e){return e.isRead=!0,e})),this.props.onUpdateUser(e))}},{key:"render",value:function(){var e=this.props.user;if(!e)return Object(Pe.jsx)(He,{});var t=e.savedNotifications;return t&&t.length?Object(Pe.jsxs)("section",{className:"notifications main-container",children:[Object(Pe.jsx)("h1",{children:"Notifications"}),t.map((function(e){return Object(Pe.jsxs)("div",{className:"notifi",children:[Object(Pe.jsx)("img",{src:"https://forakyafrica-drilling.com/wp-content/uploads/2020/12/man-300x300-1.png",alt:""}),Object(Pe.jsxs)("div",{className:"notifi-txt",children:[Object(Pe.jsx)("p",{className:e.isRead?"":"notRead",children:e.msg}),Object(Pe.jsx)("p",{children:e.date})]})]})}))]}):Object(Pe.jsx)(He,{})}}]),n}(a.a.Component));var $n={changePage:ye,onUpdateUser:qe},Jn=[{path:"/",component:ot,label:"Home"},{path:"/stay",component:ot,label:"Stays"},{path:"/stay/:stayId",component:Wt,label:"StayDetails"},{path:"/host",component:Hn,label:"Become a Host"},{path:"/host/:userId",component:Mn,label:"Dashboard"},{path:"/user/:userId",component:xn,label:"Account"},{path:"/notifications/:userId",component:Object(o.b)((function(e){return{user:e.userModule.user}}),$n)(Kn),label:"Notification"},{path:"/login",component:fn,label:"Login"},{path:"/orders",component:pt,label:"Order"},{path:"/explore",component:bn,label:"Explore"},{path:"/wishlist",component:Yn,label:"WishListPage"}],Xn=n(71),zn=(a.a.Component,function(e){Object(se.a)(n,e);var t=Object(ae.a)(n);function n(){var e;Object(te.a)(this,n);for(var s=arguments.length,a=new Array(s),r=0;r<s;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))).state={city:""},e}return Object(ne.a)(n,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props.addCityToSearch;this.state.city;return Object(Pe.jsx)("div",{className:"drop-down-city",children:Object(Pe.jsxs)("ul",{children:[Object(Pe.jsxs)("li",{className:"li-city-item",children:[Object(Pe.jsx)("img",{src:"https://a0.muscache.com/im/pictures/20e74de0-0eb8-4fca-afb8-b111875acdf5.jpg?im_q=medq&im_w=240"}),Object(Pe.jsx)("span",{onClick:function(){e("New York")},children:"New York"})]}),Object(Pe.jsxs)("li",{className:"li-city-item",children:[Object(Pe.jsx)("img",{src:"https://a0.muscache.com/im/pictures/52e8083e-2de2-446d-a860-534eab250541.jpg?im_q=medq&im_w=240"}),Object(Pe.jsx)("span",{onClick:function(){e("London")},children:"London"})]}),Object(Pe.jsxs)("li",{className:"li-city-item",children:[Object(Pe.jsx)("img",{src:"https://a0.muscache.com/im/pictures/7c309a70-bc93-4603-8d3b-9d4cd9bf75b2.jpg?im_q=medq&im_w=240"}),Object(Pe.jsx)("span",{onClick:function(){e("Amsterdam")},children:"Amsterdam"})]}),Object(Pe.jsxs)("li",{className:"li-city-item",children:[Object(Pe.jsx)("img",{src:"https://a0.muscache.com/im/pictures/ca3737ef-0faf-46ba-b055-b4a2d99e2cea.jpg?im_q=medq&im_w=240"}),Object(Pe.jsx)("span",{onClick:function(){e("Los Angeles")},children:"Los Angeles"})]}),Object(Pe.jsxs)("li",{className:"li-city-item",children:[Object(Pe.jsx)("img",{src:"https://a0.muscache.com/im/pictures/e639b7ab-aee3-48ee-9743-216684a51319.jpg?im_q=medq&im_w=240"}),Object(Pe.jsx)("span",{onClick:function(){e("Barcelona")},children:"Barcelona"})]}),Object(Pe.jsxs)("li",{className:"li-city-item",children:[Object(Pe.jsx)("img",{src:"https://a0.muscache.com/im/pictures/585d1e53-e2e1-4baf-a34e-36301dd1e2da.jpg?im_q=medq&im_w=240"}),Object(Pe.jsx)("span",{onClick:function(){e("Paris")},children:"Paris"})]}),Object(Pe.jsxs)("li",{className:"li-city-item",children:[Object(Pe.jsx)("img",{src:"https://a0.muscache.com/im/pictures/be4d3ba5-08d7-4afe-95a7-f2da6453886a.jpg?im_q=medq&im_w=240"}),Object(Pe.jsx)("span",{onClick:function(){e("Tel Aviv-Yafo")},children:"Tel Aviv-Yafo"})]}),Object(Pe.jsxs)("li",{className:"li-city-item",children:[Object(Pe.jsx)("img",{src:"https://a0.muscache.com/im/pictures/7253e011-7c22-48fd-b75d-d0da35372397.jpg?im_q=medq&im_w=240"}),Object(Pe.jsx)("span",{onClick:function(){e("Jerusalem")},children:"Jerusalem"})]})]})})}}]),n}(a.a.Component)),Qn=function(e){Object(se.a)(n,e);var t=Object(ae.a)(n);function n(){var e;Object(te.a)(this,n);for(var s=arguments.length,a=new Array(s),r=0;r<s;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))).state={addCityToSearch:"",scrollyPos:!1,numOfNotifications:0,filterBy:{city:""},newOrder:{checkIn:"",checkOut:"",guests:{adults:0,kids:0}},isLoggedIn:!1,isMenueOpen:!1,isGuestsModalShown:!1,isDateRangeShown:!1,isCityDropDownShown:!1,isScrolled:!1},e.formattedDates=function(e){return e?new Date(e).toLocaleDateString("en-GB"):"Add dates"},e.updateNumOfGuests=function(t,n,s){s.preventDefault(),s.stopPropagation();var a=e.state.newOrder.guests;a[n]+t<0||(a[n]+=t,e.setState((function(e){return{newOrder:Object(h.a)(Object(h.a)({},e.newOrder),{},{guests:a})}})))},e.onCloseModal=function(){e.setState({isMenuOpen:!1}),e.setState({isGuestsModalShown:!1}),e.setState({isDateRangeShown:!1}),e.setState({isCityDropDownShown:!1})},e.onNewOrder=function(){e.props.newOrder(e.state.newOrder)},e.onSearch=function(){e.props.filterStays(e.state),e.clearState()},e.clearState=function(){e.setState(Object(h.a)({},{filterBy:{city:""},checkIn:"",checkOut:"",guests:{adults:0,kids:0}}))},e.handleChange=function(t){var n=t.target.name,s=t.target.value;e.setState((function(e){return{newOrder:Object(h.a)(Object(h.a)({},e.newOrder),{},Object(Ze.a)({},n,s))}}))},e.addCityToSearch=function(t){e.setState((function(e){return{filterBy:Object(h.a)(Object(h.a)({},e.filterBy),{},{city:t})}}))},e.handleChangeSearch=function(t){t.target.name;var n=t.target.value;e.setState((function(e){return{filterBy:Object(h.a)(Object(h.a)({},e.filterBy),{},{city:n})}}))},e.toggleMenu=function(){e.setState({isMenuOpen:!e.state.isMenuOpen})},e.onLogin=function(e){},e.onSignup=function(t){e.props.onSignup(t)},e.onLogout=function(){e.props.onLogout(),e.setState({isLoggedIn:!1})},e.handleDates=function(e){},e.scrollPos=function(){document.addEventListener("scroll",function(e){var t=window.scrollY;t>80?this.setState({scrollyPos:!0}):this.setState({scrollyPos:!1}),t>1520?this.setState({isScrolled:!0}):this.setState({isScrolled:!1})}.bind(Object(Xn.a)(e)))},e.toggleDateCmp=function(){e.setState({isDateRangeShown:!e.state.isDateRangeShown})},e.setDates=function(t,n){var s=Date.parse(t),a=Date.parse(n);e.setState((function(e){return{newOrder:Object(h.a)(Object(h.a)({},e.newOrder),{},{checkIn:s,checkOut:a})}}))},e.formattedDates=function(e){return e?new Date(e).toLocaleDateString("en-GB"):"Add dates"},e.getReviewsAverage=function(e){return(e.reduce((function(e,t){return e+t.ratings.avg}),0)/e.length).toFixed(2)},e}return Object(ne.a)(n,[{key:"componentDidMount",value:function(){var e=Object(m.a)(b.a.mark((function e(){var t=this;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.getCurrentUser();case 2:e.sent&&this.setState({isLoggedIn:!0}),this.scrollPos(),window.addEventListener("scroll",(function(){t.setState({isDateRangeShown:!1,isGuestsModalShown:!1})})),R.setup(),R.on("get notification",this.msgFromAdmin);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t=this,n=this.state,s=n.isModalOpen,a=n.filterBy,r=n.isMenuOpen,c=n.isGuestsModalShown,o=n.isDateRangeShown,l=n.isCityDropDownShown,d=n.scrollyPos,u=n.isScrolled,h=(n.isNotifiSeen,n.isLoggedIn,this.state.newOrder),j=h.checkIn,p=h.checkOut,b=h.guests,m=this.props,O=m.user,f=m.currPage;(console.log("#####",O),O&&O.savedNotifications.length)?e=O.savedNotifications.filter((function(e){return!e.isRead})):e=!1;var v=this.props.relativePos,g=v.left,x=v.top;return Object(Pe.jsxs)("section",{children:[u&&"details"===f&&Object(Pe.jsx)(qt,{}),("details"!==f||"details"===f&&!u)&&Object(Pe.jsxs)("header",{className:"details"===f?"mini-header details-container":!d&&"home"===f||""===f?"app-header main-container":"mini-header main-container",children:[Object(Pe.jsxs)(i.b,{to:"/",className:"logo",children:["Travel ",Object(Pe.jsx)(ke.a,{className:"airbnb",icon:gt.a})," Live"]}),Object(Pe.jsx)("nav",{children:Object(Pe.jsxs)("div",{className:"nav-links",children:[Object(Pe.jsx)(i.b,{to:"/explore",className:"nav-link-explore",children:"Explore"}),!O&&Object(Pe.jsx)(i.b,{to:"/login",className:"nav-link-become",children:"Become a Host"}),O&&O.isHost&&Object(Pe.jsx)(i.b,{to:"/host/".concat(O._id),className:"nav-link-become",children:"Switch to hosting"}),O&&!O.isHost&&Object(Pe.jsx)(i.b,{to:"/host",className:"nav-link-become",children:"Switch to hosting"}),Object(Pe.jsxs)("div",{className:"menu",children:[O&&Object(Pe.jsx)("span",{className:e.length?"notifiShown":"notifiNotShown",children:e.length}),Object(Pe.jsxs)("button",{className:e.length?"btn-menu-toggle":"btn-menu",onClick:this.toggleMenu,children:["\u2630 ",Object(Pe.jsx)(ke.a,{className:"user",icon:Ne.n})]}),Object(Pe.jsxs)("ul",{className:"user-menu ".concat(r?"open":"closed"),children:[Object(Pe.jsx)("li",{className:"drop-down-item ".concat(O?"show":"not-show"),children:O&&Object(Pe.jsx)(i.b,{to:"/notifications/".concat(O._id),className:"nav-link",children:"Notifications"})}),Object(Pe.jsx)("li",{className:"drop-down-item ".concat(O?"show":"not-show"),children:O&&Object(Pe.jsx)(i.b,{to:"/orders",className:"nav-link",children:"Trips"})}),Object(Pe.jsx)("li",{className:"drop-down-item ".concat(O?"show":"not-show"),children:O&&Object(Pe.jsx)(i.b,{to:"/wishList",className:"nav-link",children:"Wishlists"})}),Object(Pe.jsx)("li",{className:"drop-down-item ".concat(O?"show":"not-show"),children:O&&Object(Pe.jsx)(i.b,{to:"/host/".concat(O._id),className:"nav-link",children:"Dashboard"})}),Object(Pe.jsxs)("li",{className:"drop-down-item ".concat(O?"show":"not-show"),children:[O&&Object(Pe.jsx)(i.b,{to:"/user/".concat(O._id),className:"nav-link",children:"Account"})," "]}),!O&&Object(Pe.jsx)("li",{className:"drop-down-item login-btn",onClick:this.onLogin,children:Object(Pe.jsx)(i.b,{to:"/login",className:"nav-link",children:"Login"})}),!O&&Object(Pe.jsx)("li",{className:"drop-down-item",onClick:this.onLogin,children:Object(Pe.jsx)(i.b,{to:"",className:"nav-link",children:"Host your home"})}),!O&&Object(Pe.jsx)("li",{className:"drop-down-item",onClick:this.onLogin,children:Object(Pe.jsx)(i.b,{to:"",className:"nav-link",children:"About"})}),Object(Pe.jsx)("li",{className:"drop-down-item",onClick:this.onLogin,children:Object(Pe.jsx)(i.b,{to:"",className:"nav-link",children:"Help"})}),O&&Object(Pe.jsx)("li",{className:"drop-down-item ".concat(O?"show":"not-show"),onClick:this.onLogout,children:Object(Pe.jsx)("p",{className:"logout-btn",children:" Log Out "})})]})]})]})}),Object(Pe.jsxs)("form",{className:"mini-header-search",children:[Object(Pe.jsxs)("span",{className:"mini-search-item",children:[" ",a.city?a.city:"Start your search"]}),Object(Pe.jsx)("button",{className:"mini-search-btn",children:Object(Pe.jsx)(ke.a,{icon:Ne.k})})]}),Object(Pe.jsxs)("form",{className:"header-search",onSubmit:this.onSearch,children:[Object(Pe.jsxs)("label",{className:"search-item mini",htmlFor:"city",children:["Location",Object(Pe.jsx)("input",{className:"search-item",type:"text",name:"city",id:"city",value:a.city,placeholder:"Where are you going?",autoComplete:"off",onChange:this.handleChangeSearch,onClick:function(){t.setState({isCityDropDownShown:!l})}})]}),l&&Object(Pe.jsx)(zn,{addCityToSearch:this.addCityToSearch}),Object(Pe.jsxs)("label",{className:"search-item",htmlFor:"search-checkIn",children:["Check in",Object(Pe.jsx)("input",{className:"search-item",type:"text",name:"checkIn",value:this.formattedDates(j),onChange:this.handleChange,id:"search-checkIn",placeholder:"Add Dates",autoComplete:"off",onClick:function(e){var n=e.screenX-50,s=e.screenY-70;t.props.setPos({left:n,top:s}),t.setState({isDateRangeShown:!o})}})]}),Object(Pe.jsxs)("label",{className:"search-item",htmlFor:"search-checkOut",children:["Check out",Object(Pe.jsx)("input",{className:"search-item",type:"text",name:"checkOut",value:this.formattedDates(p),onChange:this.handleChange,id:"search-checkOut",placeholder:"Add Dates",autoComplete:"off",onClick:function(e){var n=e.screenX-20,s=e.screenY-70;t.props.setPos({left:n,top:s}),t.setState({isDateRangeShown:!o})}})]}),Object(Pe.jsxs)("label",{className:"search-item guests-search",htmlFor:"search-guests",onClick:function(e){var n=e.clientX-35,s=e.clientY+25;t.props.setPos({left:n,top:s}),t.setState((function(e){return{isGuestsModalShown:!e.isGuestsModalShown}}))},children:["Guests",Object(Pe.jsx)("input",{name:"guests",value:b.kids+b.adults,onChange:this.handleChange,id:"order-guests",required:!0})]}),Object(Pe.jsx)(i.b,{to:"/explore?city=".concat(this.state.filterBy.city),children:Object(Pe.jsxs)("button",{className:"search-item search-btn",onClick:function(){t.onNewOrder()},children:[" ",Object(Pe.jsx)(ke.a,{icon:Ne.k})]})}),Object(Pe.jsx)("span",{className:"stay-rate"})]})]}),(r||c||o||s||l)&&Object(Pe.jsx)("div",{className:"screen",onClick:this.onCloseModal}),o&&Object(Pe.jsx)(kt,{toggleDateCmp:this.toggleDateCmp,setDates:this.setDates}),c&&Object(Pe.jsx)("div",{className:"guests-modal-div-container",style:{left:g,top:x},children:Object(Pe.jsx)(yt,{guests:b,updateNumOfGuests:this.updateNumOfGuests})}),Object(Pe.jsx)(ft,{})]})}}]),n}(a.a.Component);var Zn={onLogin:Ie,onSignup:Be,onLogout:function(){return function(){var e=Object(m.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L.logout();case 3:t({type:"SET_USER",user:null}),pe("Goodbye my friend"),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),be("Cannot logout"),console.log("Cannot logout",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},getCurrentUser:Ge,loadStays:me,newOrder:function(e){return function(){var t=Object(m.a)(b.a.mark((function t(n){var s;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Ee.newOrder(e);case 3:return s=t.sent,t.abrupt("return",n({type:"NEW_ORDER",newOrder:s}));case 7:t.prev=7,t.t0=t.catch(0),console.log("Cannot remove order",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},changePage:ye,saveNotifiToUser:We,setModalPos:we,setPos:Se},es=Object(o.b)((function(e){var t;return t={users:e.userModule.users,user:e.userModule.user,count:e.userModule.count,notifiStatus:e.userModule.notifiStatus,isLoading:e.systemModule.isLoading,stays:e.stayModule.stays,filterBy:e.stayModule.filterBy,newOrder:e.orderModule.newOrder,currPage:e.pageModule.currPage},Object(Ze.a)(t,"currPage",e.pageModule.currPage),Object(Ze.a)(t,"modalPos",e.pageModule.modalPos),Object(Ze.a)(t,"relativePos",e.pageModule.relativePos),t}),Zn)(Qn),ts=function(e){Object(se.a)(n,e);var t=Object(ae.a)(n);function n(){var e;Object(te.a)(this,n);for(var s=arguments.length,a=new Array(s),r=0;r<s;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))).state={stays:[]},e}return Object(ne.a)(n,[{key:"componentDidMount",value:function(){var e=Object(m.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.loadStays();case 2:t=e.sent,this.setState({stays:t});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,n=(t.isModalOpen,t.msg,this.state.stays),s=["Israel","Israel","England","United States","Spain","United States","France","Netherlands"],a=this.props.currPage;return console.log(a),Object(Pe.jsxs)("footer",{className:"details"===a?"app-footer details-container":"app-footer main-container",children:[Object(Pe.jsxs)("section",{className:"footer-container",children:[Object(Pe.jsxs)("div",{className:"footer-links-list",children:[Object(Pe.jsx)("p",{children:"Top Rated"}),n.slice(0,8).map((function(t){return Object(Pe.jsxs)(i.b,{className:"footer-links-item",to:"/stay/".concat(t._id),onClick:Object(m.a)(b.a.mark((function n(){return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.props.onSetCurrStay(t._id);case 2:case"end":return n.stop()}}),n)}))),children:[Object(Pe.jsx)("p",{children:t.title}),Object(Pe.jsx)("p",{children:t.loc.address})]},t._id)}))]}),Object(Pe.jsxs)("div",{className:"footer-links-list",children:[Object(Pe.jsx)("p",{children:"Nearby"}),n.slice(0,8).map((function(t){return Object(Pe.jsxs)(i.b,{className:"footer-links-item",to:"/stay/".concat(t._id),onClick:Object(m.a)(b.a.mark((function n(){return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.props.onSetCurrStay(t._id);case 2:case"end":return n.stop()}}),n)}))),children:[Object(Pe.jsx)("p",{children:t.title}),Object(Pe.jsx)("p",{children:t.loc.address})]},t._id)}))]}),Object(Pe.jsxs)("div",{className:"footer-links-list",children:[Object(Pe.jsx)("p",{children:"Cities"}),["Tel Aviv-Yafo","Jerusalem","London","New York","Barcelona","Los Angeles","Paris","Amsterdam"].map((function(e,t){return Object(Pe.jsxs)(i.b,{to:"/explore?city=".concat("city"),className:"footer-links-item",children:[Object(Pe.jsx)("p",{children:e}),Object(Pe.jsx)("p",{children:s[t]})]},t)}))]})]}),Object(Pe.jsxs)("div",{className:"footer-bottom",children:[Object(Pe.jsxs)("div",{children:[Object(Pe.jsx)("p",{children:"\xa9 2021 Travel&Live, Inc."}),Object(Pe.jsx)("span",{className:"small-dot",children:"\xb7"}),Object(Pe.jsx)(i.b,{className:"link",children:Object(Pe.jsx)("p",{children:"About"})}),Object(Pe.jsx)("span",{children:"\xb7"}),Object(Pe.jsx)(i.b,{to:"/login",className:"link",children:Object(Pe.jsx)("p",{children:"Login"})}),Object(Pe.jsx)("span",{children:"\xb7"}),Object(Pe.jsx)(i.b,{to:"/host",className:"link",children:Object(Pe.jsx)("p",{children:"Become a host"})})]}),Object(Pe.jsxs)("div",{className:"media-container",children:[Object(Pe.jsxs)("p",{children:[Object(Pe.jsx)("span",{children:Object(Pe.jsx)(ke.a,{className:"amenity-icon",icon:Ne.e})}),Object(Pe.jsx)("span",{children:"English (US)"}),Object(Pe.jsx)("span",{children:"$US"})]}),Object(Pe.jsxs)("p",{children:[Object(Pe.jsx)("span",{className:"social-media-icon",children:Object(Pe.jsx)(ke.a,{className:"amenity-icon",icon:gt.d})}),Object(Pe.jsx)("span",{className:"social-media-icon",children:Object(Pe.jsx)(ke.a,{className:"amenity-icon",icon:gt.b})}),Object(Pe.jsx)("span",{className:"social-media-icon",children:Object(Pe.jsx)(ke.a,{className:"amenity-icon",icon:gt.c})})]})]})]})]})}}]),n}(a.a.Component);var ns={loadStays:me,onSetCurrStay:xe},ss=Object(o.b)((function(e){return{stays:e.stayModule.stays,currPage:e.pageModule.currPage}}),ns)(ts),as=function(e){Object(se.a)(n,e);var t=Object(ae.a)(n);function n(){return Object(te.a)(this,n),t.apply(this,arguments)}return Object(ne.a)(n,[{key:"componentDidMount",value:function(){window.scrollTo(0,0),this.props.changePage("user")}},{key:"render",value:function(){return Object(Pe.jsx)("section",{className:"user-details main-container",children:Object(Pe.jsx)("h1",{children:"User Details"})})}}]),n}(s.Component),rs={changePage:ye},cs=(Object(o.b)((function(e){return{}}),rs)(as),function(e){Object(se.a)(n,e);var t=Object(ae.a)(n);function n(){return Object(te.a)(this,n),t.apply(this,arguments)}return Object(ne.a)(n,[{key:"render",value:function(){return Object(Pe.jsxs)("div",{className:"RootCmp",children:[Object(Pe.jsx)(es,{}),Object(Pe.jsx)("main",{children:Object(Pe.jsx)(re.c,{children:Jn.map((function(e){return Object(Pe.jsx)(re.a,{exact:!0,component:e.component,path:e.path},e.path)}))})}),Object(Pe.jsx)(ss,{})]})}}]),n}(a.a.Component));n(877);c.a.render(Object(Pe.jsx)(a.a.StrictMode,{children:Object(Pe.jsx)(o.a,{store:ee,children:Object(Pe.jsx)(i.a,{children:Object(Pe.jsx)(cs,{})})})}),document.getElementById("root"))}},[[878,1,2]]]);
//# sourceMappingURL=main.d041c8f4.chunk.js.map