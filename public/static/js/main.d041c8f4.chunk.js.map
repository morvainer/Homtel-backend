{"version":3,"sources":["store/stay.reducer.js","services/async-storage.service.js","services/http.service.js","services/socket.service.js","services/util.service.js","services/user.service.js","store/user.reducer.js","store/review.reducer.js","store/system.reducer.js","store/order.reducer.js","store/page.reducer.js","store/store.js","services/stay.service.js","services/event-bus.service.js","store/stay.actions.js","store/page.actions.js","cmps/ImgSlider.jsx","services/order.service.js","store/user.actions.js","assets/img/brooklynLoft.jpg","assets/img/loader.svg","cmps/Loader.jsx","cmps/StayPreview.jsx","cmps/StayList.jsx","services/cloudinary-service.js","cmps/AddStay.jsx","pages/HomePage.jsx","cmps/OrderPreview.jsx","cmps/OrderList.jsx","store/order.actions.js","pages/OrderPage.jsx","cmps/RatingStars.jsx","cmps/UserMsg.jsx","cmps/AddReview.jsx","cmps/Amenities.jsx","cmps/GuestsModal.jsx","cmps/DateRange.jsx","cmps/LoginModal.jsx","cmps/OrderForm.jsx","cmps/ReviewPreview.jsx","cmps/ReviewList.jsx","cmps/StayMap.jsx","services/review.service.js","cmps/StayDetailsHeader.jsx","pages/StayDetails.jsx","store/review.actions.js","cmps/DropDownStayType.jsx","cmps/DropDownPropertyType.jsx","cmps/DropDownAmenities.jsx","cmps/PriceSlider.jsx","cmps/DropDownStayPrice.jsx","pages/ExplorePage.jsx","pages/LoginPage.jsx","pages/AccountPage.jsx","cmps/HostStaysList.jsx","cmps/HostOrdersList.jsx","cmps/HostCharts.jsx","cmps/HostRates.jsx","cmps/HostHeader.jsx","pages/HostPage.jsx","cmps/WishListPreview.jsx","cmps/UserWishList.jsx","pages/WishListPage.jsx","pages/BecomeHost.jsx","cmps/Notifications.jsx","routes.js","cmps/DropDownCity.jsx","cmps/LoginSignup.jsx","cmps/AppHeader.jsx","cmps/AppFooter.jsx","pages/UserDetails.jsx","root-cmp.jsx","index.js"],"names":["initialState","stays","currStay","filterBy","city","storageService","query","get","entityType","entityId","then","entities","find","entity","_id","post","newEntity","_makeId","push","_save","put","updatedEntity","idx","findIndex","splice","remove","postMany","newEntities","map","delay","JSON","parse","localStorage","getItem","userId","filter","order","user","hostId","host","Promise","resolve","reject","setTimeout","setItem","stringify","length","text","possible","i","charAt","Math","floor","random","BASE_URL","axios","Axios","create","withCredentials","httpService","endpoint","data","ajax","a","method","url","params","res","console","log","dir","response","status","sessionStorage","clear","window","location","assign","SOCKET_EVENT_USER_UPDATED","socketService","socket","setup","io","on","eventName","cb","off","removeAllListeners","emit","terminate","createSocketService","review","utilService","makeId","txt","makeLorem","size","words","getRandomIntInclusive","min","max","ceil","ms","formattedDates","chosenDate","Date","toLocaleDateString","STORAGE_KEY_LOGGEDIN_USER","gWatchedUser","userService","login","logout","signup","getLoggedinUser","getById","update","_saveLocalUser","userCred","removeItem","addEventListener","freshUsers","watchedUser","u","score","loggedUser","savedNotifications","notifiStatus","reviews","isLoading","orders","newOrder","checkIn","checkOut","guests","adults","kids","currPage","modalPos","modalBottom","modalLeft","relativePos","left","top","rootReducer","combineReducers","stayModule","state","action","newState","type","stay","stayId","userModule","users","orderId","notifi","savedStays","systemModule","reviewModule","reviewId","orderModule","orderState","pageModule","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","thunk","listeners","stayService","save","subscribe","listener","getUserStays","queryFront","frontFilter","staysToDisplay","stayType","price","minPrice","maxPrice","Infinity","isStay","amenity","amenities","includes","Object","values","userSavedStays","fullname","imgUrl","cs","forEach","_notifySubscribersStaysChanged","eventBusService","callListener","detail","removeEventListener","dispatchEvent","CustomEvent","showUserMsg","showSuccessMsg","showErrorMsg","loadStays","dispatch","filterStays","onRemoveStay","getState","catch","err","onAddStay","savedStay","onUpdateStay","updatedStay","onSetCurrStay","changePage","pageName","setModalPos","setPos","myBus","ImgSlider","this","props","className","dots","infinite","speed","slidesToShow","slidesToScroll","src","imgUrls","Component","orderService","add","getOrders","updateOrder","isHost","miniUser","orderToSave","addedOrder","onLogin","credentials","onSignup","randomNum","gender","onUpdateUser","getCurrentUser","removeStayFromUser","saveNotifiToUser","_notifySubscribersOrdersChanged","Loader","loader","alt","_StayPreview","isSaved","toggleSavedStay","ev","preventDefault","stopPropagation","saveStay","removeStay","saveStayToUser","getReviewsAverage","reduce","sum","value","ratings","avg","toFixed","setState","onClick","icon","faHeart","faStar","avgReviewRating","title","React","mapDispatchToProps","StayPreview","connect","_StayList","setStay","to","StayList","uploadImg","UPLOAD_URL","formData","FormData","append","target","files","fetch","body","json","error","_AddStay","capacity","desc","loc","country","countryCode","address","lat","lng","tv","wifi","kitchen","smokingAllowed","petsAllowed","cookingBasics","handleChange","field","name","handleAddressChange","handleChangeArray","handleImgChange","prevState","handleChangeSelect","handleAmenityChange","amenityObj","onEditStay","isChecked","clearState","stayToSave","isEdit","onSubmit","id","onChange","required","placeholder","faExternalLinkAlt","style","backgroundImage","faHome","faBookOpen","faMedal","faBookmark","checked","for","AddStay","_HomePage","locSearch","scrollTo","HomePage","OrderPreview","onRemoveOrder","weekday","year","month","day","totalPrice","now","OrderList","pathname","loadOrders","_OrderPage","sortBy","isUpcomingShown","onSetFilterOrders","onSetSortOrders","sort","ordersToDisplay","order1","order2","sortByTxt","txt1","txt2","currDate","history","loadOrdersFromUser","onRemoveOrderFromUser","OrderPage","RatingStar","cleanliness","communication","accuracy","getAverage","ratingChanged","count","activeColor","edit","UserMsg","msg","removeEvent","msgClass","AddReview","date","by","isUserMsgShown","onHandleChange","toggleMessage","onAddReview","Amenities","getIcon","faTv","faWifi","faAirbnb","faPaw","faBlender","faSnowflake","isAmenityExists","isSideCross","GuestsModal","updateNumOfGuests","_DateRange","startDate","endDate","handleSelect","ranges","selection","setDates","selectionRange","key","months","direction","showSelectionPreview","moveRangeOnFirstSelection","toggleDateCmp","DateRange","_LoginModal","handleLoginToDemo","username","password","isLoginModal","LoginModal","_OrderForm","newOrderFromForm","isOrderSum","isDatesCmpShow","x","y","rect","isReserveOrder","handleChangeNew","onAddOrder","days","getNumOfDays","getTotalPrice","onEditOrder","handleHover","clientX","clientY","getBoundingClientRect","abs","toggleButton","start","end","startDay","endDay","isGuestsModalShown","updateDates","reviewsAvg","htmlFor","pageX","pageY","autoComplete","onToggleModal","backgroundPosition","onMouseMove","toLocaleString","faFlag","OrderForm","ReviewPreview","ReviewList","_StayMap","center","isInfoWindowOn","google","zoom","initialCenter","width","position","onMarkerClicked","visible","StayMap","GoogleApiWrapper","apiKey","reviewService","average","newReview","freshReviews","_StayDetailsHeader","href","StayDetailsHeader","_StayDetails","componentDidMount","match","onCloseModal","orderObj","addReview","diff","setGuests","img","addedReview","loadReviews","savedOrder","StayDetails","_DropDownStayType","SetFilterStayType","onSetFrontFilter","DropDownStayType","_DropDownPropertyType","DropDownPropertyType","_DropDownAmenities","TV","Wifi","Kitchen","DropDownAmenities","AirbnbSlider","styled","Slider","theme","color","height","padding","backgroundColor","border","boxShadow","marginLeft","marginRight","palette","mode","opacity","undefined","AirbnbThumbComponent","children","other","PriceSlider","Box","sx","m","Typography","gutterBottom","components","Thumb","getAriaLabel","index","defaultValue","_DropDownStayPrice","valuetext","DropDownStayPrice","_ExplorePage","bottom","isStayTypeShown","isPropertyTypeShown","isAmenitiesShown","isDropDownPriceShown","isLoaded","urlParamCity","onFilterBy","prevstate","filterKey","onClearFrontFilter","alert","URLSearchParams","search","ExplorePage","_LoginPage","email","isSignup","toggleSignup","clearTemplate","isRead","LoginPage","_AccountPage","toggleEdit","onSave","AccountPage","HostStayList","_HostOrdersList","changeOrderStatus","onUpdateOrder","getUserImg","newStatus","HostOrdersList","HostCharts","labels","datasets","label","borderColor","borderWidth","_HostRates","HostRates","_HostHeader","earnings","totalRate","getTotalEarnings","getRandomNum","getAccepted","getDeclined","getPending","getNumOfOrders","acc","faLongArrowAltUp","HostHeader","_HostPage","places","rates","ColoredLine","changeCmp","cmp","stayToEdit","faBuilding","faMoneyBillAlt","onRemovehost","HostPage","_WishListPreview","userSavedStay","onRemoveSaveStay","onRemoveSavedStay","WishListPreview","UserWishList","_WishListPage","loadStaysFromUser","WishListPage","_BecomeHost","handleClick","BecomeHost","_Notifications","savedNotifcations","notification","routes","path","component","DropDownCity","addCityToSearch","_AppHeader","scrollyPos","numOfNotifications","isLoggedIn","isMenueOpen","isDateRangeShown","isCityDropDownShown","isScrolled","isMenuOpen","onNewOrder","onSearch","handleChangeSearch","toggleMenu","onLogout","handleDates","time","scrollPos","document","e","pos","scrollY","bind","msgFromAdmin","notifications","isModalOpen","isNotifiSeen","savedNotification","faUserCircle","faSearch","screenX","screenY","AppHeader","_AppFooter","countries","slice","faGlobe","faTwitter","faFacebook","faInstagram","AppFooter","_UserDetails","RootCmp","route","exact","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.d041c8f4.chunk.js","sourcesContent":["const initialState = {\r\n  stays: [],\r\n  currStay: null,\r\n  filterBy: {\r\n    city: ''\r\n    // stayType: ''\r\n  }\r\n};\r\nexport function stayReducer(state = initialState, action) {\r\n  var newState = state;\r\n  var stays;\r\n  switch (action.type) {\r\n    case 'SET_STAYS':\r\n      newState = { ...state, stays: action.stays };\r\n      break;\r\n    case 'REMOVE_STAY':\r\n      \r\n      stays = state.stays.filter((stay) => stay._id !== action.stayId);\r\n      newState = { ...state, stays };\r\n      break;\r\n    case 'ADD_STAY':\r\n      newState = { ...state, stays: [...state.stays, action.stay] };\r\n      break;\r\n    case 'UPDATE_STAY':\r\n      \r\n      stays = state.stays.map((stay) => {\r\n        return stay._id === action._id ? action : stay;\r\n      });\r\n      newState = { ...state, stays };\r\n      break;\r\n    \r\n    case 'SET_CURR_STAY':\r\n      newState = { ...state, currStay: action.currStay };\r\n      break;\r\n    case 'FILTER_STAYS':\r\n      newState = { ...state, filterBy: action.filter   };\r\n      break;\r\n\r\n    default:\r\n  }\r\n  return newState;\r\n}\r\n","export const storageService = {\r\n  query,\r\n  get,\r\n  post,\r\n  put,\r\n  remove,\r\n  postMany,\r\n};\r\n\r\nfunction query(entityType, filterBy = null, delay = 1200) {\r\n  var entities = JSON.parse(localStorage.getItem(entityType)) || [];\r\n  if (filterBy) {\r\n    if (filterBy.userId) {\r\n      entities = entities.filter((order) => {\r\n        return order.user._id === filterBy.userId;\r\n      });\r\n    }\r\n    if (filterBy.hostId) {\r\n      entities = entities.filter((order) => {\r\n        return order.host._id === filterBy.hostId;\r\n      });\r\n    }\r\n  }\r\n\r\n  return new Promise((resolve, reject) => {\r\n    setTimeout(() => {\r\n      resolve(entities);\r\n    }, delay);\r\n  });\r\n}\r\n\r\nfunction get(entityType, entityId) {\r\n  return query(entityType).then((entities) =>\r\n    entities.find((entity) => entity._id === entityId)\r\n  );\r\n}\r\n\r\nfunction post(entityType, newEntity) {\r\n  newEntity._id = _makeId();\r\n  return query(entityType).then((entities) => {\r\n    entities.push(newEntity);\r\n    _save(entityType, entities);\r\n    return newEntity;\r\n  });\r\n}\r\n\r\nfunction put(entityType, updatedEntity) {\r\n  return query(entityType).then((entities) => {\r\n    const idx = entities.findIndex(\r\n      (entity) => entity._id === updatedEntity._id\r\n    );\r\n    entities.splice(idx, 1, updatedEntity);\r\n    _save(entityType, entities);\r\n    return updatedEntity;\r\n  });\r\n}\r\n\r\nfunction remove(entityType, entityId) {\r\n  return query(entityType).then((entities) => {\r\n    const idx = entities.findIndex((entity) => entity._id === entityId);\r\n    entities.splice(idx, 1);\r\n    _save(entityType, entities);\r\n  });\r\n}\r\n\r\nfunction _save(entityType, entities) {\r\n  localStorage.setItem(entityType, JSON.stringify(entities));\r\n}\r\n\r\nfunction _makeId(length = 5) {\r\n  var text = '';\r\n  var possible =\r\n    'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\r\n  for (var i = 0; i < length; i++) {\r\n    text += possible.charAt(Math.floor(Math.random() * possible.length));\r\n  }\r\n  return text;\r\n}\r\n\r\nfunction postMany(entityType, newEntities) {\r\n  return query(entityType).then((entities) => {\r\n    newEntities = newEntities.map((entity) => ({ ...entity, _id: _makeId() }));\r\n    entities.push(...newEntities);\r\n    _save(entityType, entities);\r\n    return entities;\r\n  });\r\n}\r\n","import Axios from 'axios'\r\n\r\nconst BASE_URL = process.env.NODE_ENV === 'production'\r\n    ? '/api/'\r\n    : '//localhost:3030/api/'\r\n\r\n\r\nvar axios = Axios.create({\r\n    withCredentials: true\r\n})\r\n\r\nexport const httpService = {\r\n    get(endpoint, data) {\r\n        return ajax(endpoint, 'GET', data)\r\n    },\r\n    post(endpoint, data) {\r\n        return ajax(endpoint, 'POST', data)\r\n    },\r\n    put(endpoint, data) {\r\n        return ajax(endpoint, 'PUT', data)\r\n    },\r\n    delete(endpoint, data) {\r\n        return ajax(endpoint, 'DELETE', data)\r\n    }\r\n}\r\n\r\nasync function ajax(endpoint, method = 'GET', data = null) {\r\n    try {\r\n        const res = await axios({\r\n            url: `${BASE_URL}${endpoint}`,\r\n            method,\r\n            data,\r\n            params: (method === 'GET') ? data : null\r\n        })\r\n        return res.data\r\n    } catch (err) {\r\n        console.log(`Had Issues ${method}ing to the backend, endpoint: ${endpoint}, with data: ${data}`)\r\n        console.dir(err)\r\n        if (err.response && err.response.status === 401) {\r\n            sessionStorage.clear();\r\n            window.location.assign('/')\r\n        }\r\n        throw err\r\n    }\r\n}","import io from 'socket.io-client'\r\n\r\nexport const SOCKET_EMIT_USER_WATCH = 'user-watch';\r\nexport const SOCKET_EVENT_USER_UPDATED = 'user-updated';\r\nexport const SOCKET_EVENT_REVIEW_ADDED = 'review-added';\r\nexport const SOCKET_EVENT_REVIEW_ABOUT_YOU = 'review-about-you';\r\n\r\n\r\nconst baseUrl = (process.env.NODE_ENV === 'production')? '' : '//localhost:3030'\r\nexport const socketService = createSocketService()\r\n// export const socketService = createDummySocketService()\r\n\r\nwindow.socketService = socketService\r\n\r\n// var socketIsReady = false;\r\nsocketService.setup()\r\n\r\n\r\nfunction createSocketService() {\r\n  var socket = null;\r\n  const socketService = {\r\n    setup() {\r\n      socket = io(baseUrl)\r\n    },\r\n    on(eventName, cb) {\r\n      socket.on(eventName, cb)\r\n    },\r\n    off(eventName, cb=null) {\r\n      if (!socket) return;\r\n      if (!cb) socket.removeAllListeners(eventName)\r\n      else socket.off(eventName, cb)\r\n    },\r\n    emit(eventName, data) {\r\n      socket.emit(eventName, data)\r\n    },\r\n    terminate() {\r\n      socket = null\r\n    }\r\n  }\r\n  return socketService\r\n}\r\n\r\n// eslint-disable-next-line\r\nfunction createDummySocketService() {\r\n  var listenersMap = {}\r\n  const socketService = {\r\n    listenersMap,\r\n    setup() {\r\n      listenersMap = {}\r\n    },\r\n    terminate() {\r\n      this.setup()\r\n    },\r\n    on(eventName, cb) {\r\n      listenersMap[eventName] = [...(listenersMap[eventName]) || [], cb]\r\n    },\r\n    off(eventName, cb) {\r\n      if (!listenersMap[eventName]) return\r\n      if (!cb) delete listenersMap[eventName]\r\n      else listenersMap[eventName] = listenersMap[eventName].filter(l => l !== cb)\r\n    },\r\n    emit(eventName, data) {\r\n      if (!listenersMap[eventName]) return\r\n      listenersMap[eventName].forEach(listener => {\r\n        listener(data)\r\n      })\r\n    },\r\n    debugMsg() {\r\n      this.emit('chat addMsg', {from: 'Someone', txt: 'Aha it worked!'})\r\n    },\r\n  }\r\n  window.listenersMap = listenersMap;\r\n  return socketService\r\n}\r\n\r\n\r\n// Basic Tests\r\n// function cb(x) {console.log('Socket Test - Expected Puk, Actual:', x)}\r\n// socketService.on('baba', cb)\r\n// socketService.on('baba', cb)\r\n// socketService.on('baba', cb)\r\n// socketService.on('mama', cb)\r\n// socketService.emit('baba', 'Puk')\r\n// socketService.off('baba', cb)\r\n\r\n\r\nsocketService.on(SOCKET_EVENT_REVIEW_ABOUT_YOU, review => {\r\n  console.log('Review about me!', review);\r\n  \r\n})\r\n\r\n","export const utilService = {\r\n  makeId,\r\n  makeLorem,\r\n  getRandomIntInclusive,\r\n  delay,\r\n  formattedDates\r\n};\r\n\r\nfunction makeId(length = 6) {\r\n  var txt = '';\r\n  var possible =\r\n    'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\r\n\r\n  for (var i = 0; i < length; i++) {\r\n    txt += possible.charAt(Math.floor(Math.random() * possible.length));\r\n  }\r\n\r\n  return txt;\r\n}\r\n\r\nfunction makeLorem(size = 100) {\r\n  var words = [\r\n    'The sky',\r\n    'above',\r\n    'the port',\r\n    'was',\r\n    'the color of television',\r\n    'tuned',\r\n    'to',\r\n    'a dead channel',\r\n    '.',\r\n    'All',\r\n    'this happened',\r\n    'more or less',\r\n    '.',\r\n    'I',\r\n    'had',\r\n    'the story',\r\n    'bit by bit',\r\n    'from various people',\r\n    'and',\r\n    'as generally',\r\n    'happens',\r\n    'in such cases',\r\n    'each time',\r\n    'it',\r\n    'was',\r\n    'a different story',\r\n    '.',\r\n    'It',\r\n    'was',\r\n    'a pleasure',\r\n    'to',\r\n    'burn',\r\n  ];\r\n  var txt = '';\r\n  while (size > 0) {\r\n    size--;\r\n    txt += words[Math.floor(Math.random() * words.length)] + ' ';\r\n  }\r\n  return txt;\r\n}\r\n\r\nfunction getRandomIntInclusive(min, max) {\r\n  min = Math.ceil(min);\r\n  max = Math.floor(max);\r\n  return Math.floor(Math.random() * (max - min + 1)) + min; //The maximum is inclusive and the minimum is inclusive\r\n}\r\n\r\nfunction delay(ms = 1500) {\r\n  return new Promise((resolve) => {\r\n    setTimeout(resolve, ms);\r\n  });\r\n}\r\n\r\n function formattedDates(chosenDate)  {\r\n  if (!chosenDate) return \"Add dates\";\r\n  const date = new Date(chosenDate);\r\n  return date.toLocaleDateString(\"en-GB\");\r\n};","import Axios from 'axios';\r\n\r\nimport { storageService } from './async-storage.service';\r\nimport { httpService } from './http.service';\r\nimport { socketService, SOCKET_EVENT_USER_UPDATED } from './socket.service';\r\n// import Users from '../data/user.js';\r\nimport { utilService } from './util.service';\r\nconst STORAGE_KEY_LOGGEDIN_USER = 'loggedinUser';\r\nvar gWatchedUser = null;\r\n// let gusers = Users;\r\nexport const userService = {\r\n  login,\r\n  logout,\r\n  signup,\r\n  getLoggedinUser,\r\n  getById,\r\n  update\r\n};\r\n\r\nconst STORAGE_KEY_LOGGEDIN = 'loggedinUser';\r\n\r\nconst BASE_USER_URL =\r\n  process.env.NODE_ENV === 'production'\r\n    ? '/api/auth/'\r\n    : 'http://localhost:3030/api/auth/';\r\n\r\n// async function getUsers() {\r\n//   var users = await storageService.query('user');\r\n//   users = !users || !users.length ? gusers : users;\r\n//   return users;\r\n//   // return httpService.get(`user`)\r\n// }\r\n\r\nasync function getById(userId) {\r\n  const user = await httpService.get(`user/${userId}`);\r\n  gWatchedUser = user;\r\n  return user;\r\n}\r\n// function remove(userId) {\r\n//   return storageService.remove('user', userId);\r\n//   // return httpService.delete(`user/${userId}`)\r\n// }\r\n\r\nasync function update(user) {\r\n  console.log('this is user storage***********');\r\n  user = await httpService.put(`user/${user._id}`, user);\r\n  // Handle case in which admin updates other user's details\r\n  if (getLoggedinUser()._id === user._id) _saveLocalUser(user);\r\n  return user;\r\n}\r\n\r\nasync function login(userCred = {}) {\r\n  const user = await httpService.post('auth/login', userCred);\r\n  // socketService.emit('set-user-socket', user._id);\r\n  if (user) return _saveLocalUser(user);\r\n}\r\n\r\nasync function signup(userCred) {\r\n  // const user = await storageService.post('user', userCred);\r\n  // userCred.imgUrl\r\n  // const user = await storageService.post('user', userObj);\r\n  // var randomNum = utilService.getRandomIntInclusive(1, 100);\r\n  // var gender = randomNum > 50 ? 'men' : 'women';\r\n\r\n  // userCred.imgUrl = `https://randomuser.me/api/portraits/${gender}/${randomNum}.jpg`;\r\n  const user = await httpService.post('auth/signup', userCred);\r\n  // socketService.emit('set-user-socket', user._id);\r\n  return _saveLocalUser(user);\r\n}\r\n\r\nasync function logout() {\r\n  sessionStorage.removeItem(STORAGE_KEY_LOGGEDIN_USER);\r\n  // socketService.emit('unset-user-socket');\r\n  return await httpService.post('auth/logout');\r\n}\r\n\r\nfunction _saveLocalUser(user) {\r\n  if (!user) return;\r\n  sessionStorage.setItem(STORAGE_KEY_LOGGEDIN_USER, JSON.stringify(user));\r\n  return user;\r\n}\r\n\r\nfunction getLoggedinUser() {\r\n  return JSON.parse(\r\n    sessionStorage.getItem(STORAGE_KEY_LOGGEDIN_USER) || 'null'\r\n  );\r\n}\r\n\r\n(async () => {\r\n  var user = getLoggedinUser();\r\n  // Dev Helper: Listens to when localStorage changes in OTHER browser\r\n  // Here we are listening to changes for the watched user (comming from other browsers)\r\n  window.addEventListener('storage', async () => {\r\n    if (!gWatchedUser) return;\r\n    const freshUsers = await storageService.query('user');\r\n    const watchedUser = freshUsers.find((u) => u._id === gWatchedUser._id);\r\n    if (!watchedUser) return;\r\n    if (gWatchedUser.score !== watchedUser.score) {\r\n      console.log(\r\n        'Watched user score changed - localStorage updated from another browser'\r\n      );\r\n      socketService.emit(SOCKET_EVENT_USER_UPDATED, watchedUser);\r\n    }\r\n    gWatchedUser = watchedUser;\r\n  });\r\n})();\r\n","import { userService } from '../services/user.service.js';\r\n\r\nconst loggedUser = userService.getLoggedinUser();\r\n\r\nconst initialState = {\r\n  user: loggedUser ? loggedUser : null,\r\n  // savedStays: [],\r\n  savedNotifications:[],\r\n  watchedUser: null,\r\n  notifiStatus:false\r\n};\r\nexport function userReducer(state = initialState, action) {\r\n  var newState = state;\r\n  switch (action.type) {\r\n    case 'SET_USER':\r\n      newState = { ...state, user: action.user };\r\n      break;\r\n    case 'SET_WATCHED_USER':\r\n      newState = { ...state, watchedUser: action.user };\r\n      break;\r\n    case 'REMOVE_USER':\r\n      newState = {\r\n        ...state,\r\n        users: state.users.filter((user) => user._id !== action.userId),\r\n      };\r\n      break;\r\n    case 'SET_USERS':\r\n      newState = { ...state, users: action.users };\r\n      break;\r\n    case 'LOAD_ORDERS_FROM_USER':\r\n      newState = { ...state, orders: action.orders };\r\n      break;\r\n    case 'REMOVE_ORDER_FROM_USER':\r\n      newState = {\r\n        ...state,\r\n        orders: state.orders.filter((order) => order._id !== action.orderId), \r\n      };\r\n      break;\r\n\r\n    case 'ADD_ORDER_TO_USER': {\r\n      newState = { ...state, orders: [...state.orders, action.order] };\r\n      break;\r\n    }\r\n    case 'SAVE_STAY_TO_USER': {\r\n      newState = { ...state, user: action.user };\r\n      break;\r\n    }\r\n    case 'REMOVE_STAY_FROM_USER': {\r\n      newState = { ...state, user: action.user };\r\n      break;\r\n    }\r\n    case 'SAVE_NOTIFI_TO_USER': {\r\n      newState = { ...state, user:{ ...state.user,savedNotifications: [...state.user.savedNotifications,action.notifi]}};\r\n      break;\r\n    }\r\n    case 'SET_NOTIFI_STATUS': {\r\n      newState = { ...state,notifiStatus:action.status};\r\n      break;\r\n    }\r\n    case 'LOAD_USER_STAYS': {\r\n      newState = { ...state, savedStays: [...action.stays] };\r\n      break;\r\n    }\r\n \r\n    default:\r\n  }\r\n \r\n  return newState;\r\n}\r\n// newState = { ...state, savedNotifications: [...state.savedNotifications, action.notifi] };\r\n","const initialState = {\r\n  reviews: [],\r\n};\r\n\r\nexport function reviewReducer(state = initialState, action = {}) {\r\n  switch (action.type) {\r\n    case 'SET_REVIEWS':\r\n      return { ...state, reviews: action.reviews };\r\n    case 'ADD_REVIEW':\r\n      return { ...state, reviews: [...state.reviews, action.review] };\r\n    case 'REMOVE_REVIEW':\r\n      return {\r\n        ...state,\r\n        reviews: state.reviews.filter(\r\n          (review) => review._id !== action.reviewId\r\n        ),\r\n      };\r\n    case 'UPDATE_REVIEW':\r\n      return {\r\n        ...state,\r\n        reviews: state.reviews.map((review) =>\r\n          review._id === action.review._id ? action.review : review\r\n        ),\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","const initialState = {\r\n  isLoading: false\r\n};\r\n\r\nexport function systemReducer (state = initialState, action = {}) {\r\n  switch (action.type) {\r\n    case 'LOADING_START':\r\n      return { ...state, isLoading: true }\r\n    case 'LOADING_DONE':\r\n      return { ...state, isLoading: false }\r\n    default: return state\r\n  }\r\n}\r\n","const initialState = {\r\n  orders: [],\r\n  newOrder: {\r\n    checkIn: '',\r\n    checkOut: '',\r\n    guests: {\r\n      adults: 0,\r\n      kids: 0,\r\n    },\r\n  },\r\n};\r\n\r\nexport function orderReducer(state = initialState, action = {}) {\r\n  var newState = state;\r\n\r\n  switch (action.type) {\r\n    case 'LOAD_ORDERS':\r\n      newState = { ...state, orders: action.orders };\r\n      break;\r\n    case 'SET_ORDER':\r\n      newState = { ...state, orders: action.orders };\r\n      break;\r\n    case 'ADD_ORDER':\r\n      newState = { ...state, orders: [action.order, ...state.orders] };\r\n      break;\r\n    case 'REMOVE_ORDER':\r\n      newState = {\r\n        ...state,\r\n        orders: state.orders.filter((order) => order._id !== action.orderId),\r\n      };\r\n      break;\r\n    case 'UPDATE_ORDER':\r\n      newState = {\r\n        ...state,\r\n        orders: state.orders.map((order) =>\r\n          order._id === action.order._id ? action.order : order\r\n        ),\r\n      };\r\n      break;\r\n    case 'UPDATE_ORDER_STATUS':\r\n      newState = {\r\n        ...state,\r\n        orders: state.orders.map((order) =>\r\n          order._id === action.order._id ? action.order : order\r\n        ),\r\n      };\r\n      break;\r\n    case 'NEW_ORDER':\r\n      newState = { ...state, newOrder: action.newOrder };\r\n      break;\r\n    case 'SET_GUESTS':\r\n      newState = { ...state, newOrder: { ...action.order } };\r\n      break;\r\n    default:\r\n  }\r\n  window.orderState = newState;\r\n  return newState;\r\n}\r\n","const initialState = {\r\n  currPage: '',\r\n  modalPos: null,\r\n  modalBottom: '',\r\n  modalLeft: '',\r\n  relativePos: {\r\n    left: 0,\r\n    top: 0,\r\n  },\r\n};\r\nexport function pageReducer(state = initialState, action) {\r\n  var newState = state;\r\n  switch (action.type) {\r\n    case 'SET_PAGE':\r\n      newState = { ...state, currPage: action.currPage };\r\n      break;\r\n    case 'SET_MODAL_POS':\r\n      newState = { ...state, modalPos: action.modalPos };\r\n      break;\r\n    case 'SET_POS':\r\n      newState = { ...state, relativePos: { ...action.relativePos } };\r\n      break;\r\n\r\n    default:\r\n  }\r\n\r\n  return newState;\r\n}\r\n","// const { createStore, applyMiddleware, combineReducers, compose } = Redux\r\n// const thunk = ReduxThunk.default\r\n\r\nimport { createStore, applyMiddleware, combineReducers, compose } from 'redux';\r\nimport thunk from 'redux-thunk';\r\n\r\nimport { stayReducer } from './stay.reducer.js';\r\nimport { userReducer } from './user.reducer.js';\r\nimport { reviewReducer } from './review.reducer';\r\nimport { systemReducer } from './system.reducer';\r\nimport { orderReducer } from './order.reducer';\r\nimport { pageReducer } from './page.reducer';\r\n\r\nconst rootReducer = combineReducers({\r\n  stayModule: stayReducer,\r\n  userModule: userReducer,\r\n  systemModule: systemReducer,\r\n  reviewModule: reviewReducer,\r\n  orderModule: orderReducer,\r\n  pageModule: pageReducer,\r\n \r\n});\r\n\r\n// export const store = createStore(rootReducer, applyMiddleware(thunk))\r\n// window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__();\r\n// Lets wire up thunk and also redux-dev-tools:\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\nexport const store = createStore(\r\n  rootReducer,\r\n  composeEnhancers(applyMiddleware(thunk))\r\n);\r\n// export const store = createStore(rootReducer, applyMiddleware(thunk))\r\n","import { storageService } from './async-storage.service.js';\r\nimport { utilService } from './util.service.js';\r\nimport { userService } from './user.service.js';\r\nimport { httpService } from './http.service';\r\nimport Stays from '../data/stay.js';\r\n\r\n//\r\nimport Axios from 'axios';\r\n\r\nconst listeners = [];\r\nconst BASE_URL =\r\n  process.env.NODE_ENV === 'production'\r\n    ? '/api/stay/'\r\n    : 'http://localhost:3030/api/stay/';\r\n\r\nconst axios = Axios.create({\r\n  withCredentials: true,\r\n});\r\n\r\nconst STORAGE_KEY = 'stayDB';\r\nconst STORAGE_KEY_LOGGEDIN = 'loggedinUser';\r\nlet gStays = Stays; // can add if(stays) get from storage\r\n\r\nexport const stayService = {\r\n  query,\r\n  getById,\r\n  save,\r\n  remove,\r\n  subscribe,\r\n  getUserStays,\r\n  queryFront,\r\n};\r\nwindow.cs = stayService;\r\n//LIST\r\nasync function query(filterBy = {}) {\r\n  \r\n  // return axios\r\n  //   .get('http://localhost:3030/api/stay', { params: filterBy })\r\n  //   .then((res) => res.data);\r\n  return httpService.get('stay', filterBy)\r\n}\r\n\r\nasync function getUserStays(user) {\r\n  let userSavedStays = await storageService.query('user', user);\r\n  return Promise.resolve(userSavedStays);\r\n}\r\n\r\nfunction getById(stayId) {\r\n  // return axios\r\n  //   .get(`http://localhost:3030/api/stay/${stayId}`)\r\n  //   .then((res) => res.data);\r\n  return httpService.get(`stay/${stayId}`)\r\n\r\n\r\n}\r\nfunction remove(stayId) {\r\n  // return axios.delete(`http://localhost:3030/api/stay/${stayId}`);\r\n  return httpService.delete(`stay/${stayId}`);\r\n  \r\n}\r\nasync function save(stay) {\r\n  if (stay._id) {\r\n    return httpService.put(`stay/${stay._id}`, stay);\r\n    // return axios\r\n    //   .put('http://localhost:3030/api/stay', stay)\r\n    //   .then((res) => res.data);\r\n  } else {\r\n    const user = await userService.getLoggedinUser();\r\n\r\n    stay.host = { fullname: user.fullname, _id: user._id, imgUrl: user.imgUrl };\r\n    return httpService.post(`stay`, stay);\r\n    // return axios\r\n    //   .post('http://localhost:3030/api/stay', stay)\r\n    //   .then((res) => res.data);\r\n  }\r\n}\r\n\r\n// function add(stay) {\r\n//   // const user = userService.getLoggedinUser()\r\n//   return axios.post('http://localhost:3030/api/stay', stay).then(res => res.data)\r\n// }\r\n// function update(stay) {\r\n//   return axios.put('http://localhost:3030/api/stay', stay).then(res => res.data)\r\n//   // return axios.put(`http://localhost:3030/api/toy${toyId}`, toy).then(res => res.data)\r\n// }\r\n\r\nfunction subscribe(listener) {\r\n  listeners.push(listener);\r\n}\r\n\r\nfunction _notifySubscribersStaysChanged(stays) {\r\n  console.log('Notifying Listeners');\r\n  listeners.forEach((listener) => listener(stays));\r\n}\r\n\r\nwindow.addEventListener('storage', () => {\r\n  query().then((stays) => {\r\n    _notifySubscribersStaysChanged(stays);\r\n  });\r\n});\r\n\r\n// function login(credentials) {\r\n//   return storageService.query(STORAGE_KEY).then((users) => {\r\n//     const user = users.find(\r\n//       (user) =>\r\n//         user.username === credentials.username &&\r\n//         user.password === credentials.password\r\n//     );\r\n//     if (user) {\r\n//       sessionStorage.setItem(STORAGE_KEY_LOGGEDIN, JSON.stringify(user));\r\n//     }\r\n//     return user;\r\n//   });\r\n// }\r\n\r\nfunction queryFront(stays, frontFilter) {\r\n  // console.log('queryFront');\r\n  // console.log('queryFront stays', stays);\r\n  // console.log('queryFront frontFilter', frontFilter);\r\n  // let staysToDisplay=[]\r\n  var staysToDisplay = stays;\r\n  //stayType: 'Entire Room,\r\n  if (frontFilter.stayType)\r\n    staysToDisplay = staysToDisplay.filter((stay) => {\r\n      return stay.stayType === frontFilter.stayType;\r\n    });\r\n  if (frontFilter.type)\r\n    staysToDisplay = staysToDisplay.filter((stay) => {\r\n      return stay.type === frontFilter.type;\r\n    });\r\n  if (frontFilter.price.minPrice > 0 || frontFilter.price.maxPrice < Infinity)\r\n    staysToDisplay = staysToDisplay.filter((stay) => {\r\n      return (\r\n        stay.price > frontFilter.price.minPrice &&\r\n        stay.price < frontFilter.price.maxPrice\r\n      );\r\n    });\r\n\r\n  staysToDisplay = staysToDisplay.filter((stay) => {\r\n    console.log('curr stay: ', stay);\r\n    let isStay = true;\r\n    for (const amenity in frontFilter.amenities) {\r\n      if (frontFilter.amenities[amenity] && !stay.amenities.includes(amenity))\r\n        isStay = false;\r\n    }\r\n    // const stayAmenities = stay.amenities.filter((amenity) => {\r\n    //   return frontFilter.amenities[amenity]\r\n    // })\r\n    // console.log('stayAmenities: ' , stayAmenities);\r\n    return isStay;\r\n  });\r\n  console.log('staysToDisplay: ', staysToDisplay);\r\n\r\n  if (\r\n    !frontFilter.stayType &&\r\n    !frontFilter.type &&\r\n    !frontFilter.price.minPrice &&\r\n    frontFilter.price.maxPrice > 100000 &&\r\n    !Object.values(frontFilter.amenities).includes(true)\r\n  )\r\n    return stays;\r\n\r\n  return staysToDisplay;\r\n}\r\n// function queryFront(stays, frontFilter){\r\n//   console.log('queryFront');\r\n//   console.log('queryFront stays', stays);\r\n//   console.log('queryFront frontFilter', frontFilter);\r\n// const staysToDisplay=[]\r\n// //stayType: 'Entire Room,\r\n//   if(frontFilter.stayType )\r\n//   stays.forEach((stay)=>{\r\n//      if (stay.stayType===frontFilter.stayType) staysToDisplay.push(stay)\r\n//   })\r\n//   if(frontFilter.type )\r\n//   stays.forEach((stay)=>{\r\n//      if (stay.type===frontFilter.type) staysToDisplay.push(stay)\r\n//   })\r\n\r\n// return staysToDisplay;\r\n\r\n// }\r\n","function on(eventName, listener) {\r\n\r\n    const callListener = ({ detail }) => {\r\n        listener(detail);\r\n    };\r\n\r\n    window.addEventListener(eventName, callListener);\r\n\r\n    return () => {\r\n        window.removeEventListener(eventName, callListener);\r\n    };\r\n}\r\n\r\nfunction emit(eventName, data) {\r\n    window.dispatchEvent(new CustomEvent(eventName, { detail: data }));\r\n}\r\n\r\nexport const eventBusService = { on, emit };\r\n\r\nexport function showUserMsg(txt, type = '') {\r\n    eventBusService.emit('show-user-msg', { txt, type })\r\n}\r\nexport function showSuccessMsg(txt) {\r\n    showUserMsg(txt, 'success')\r\n}\r\nexport function showErrorMsg(txt) {\r\n    showUserMsg(txt, 'danger')\r\n}\r\n\r\nwindow.myBus = eventBusService;\r\nwindow.showUserMsg = showUserMsg;\r\n\r\n","import { stayService } from '../services/stay.service.js';\r\nimport { userService } from '../services/user.service.js';\r\nimport { showSuccessMsg, showErrorMsg } from '../services/event-bus.service.js';\r\n\r\nexport function loadStays(filter = {}) {\r\n  return async (dispatch) => {\r\n    try {\r\n      const stays = await stayService.query(filter);\r\n      dispatch({\r\n        type: 'SET_STAYS',\r\n        stays,\r\n      });\r\n      // dispatch({\r\n      //   type: 'FILTER_STAYS',\r\n      //   filter,\r\n      // });\r\n      return stays;\r\n    } catch (err) {\r\n      showErrorMsg('Cannot load stays');\r\n      console.log('Cannot load stays', err);\r\n    }\r\n  };\r\n}\r\nexport function filterStays(filter = null) {\r\n  // return async (dispatch) => {\r\n  //   try {\r\n  //     const stays = await stayService.query(filter);\r\n  //     dispatch({\r\n  //       type: 'SET_STAYS',\r\n  //       stays,\r\n  //     });\r\n  //   } catch (err) {\r\n  //     showErrorMsg('Cannot load stays');\r\n  //     console.log('Cannot load stays', err);\r\n  //   }\r\n  // };\r\n}\r\n\r\nexport function onRemoveStay(stayId) {\r\n  return (dispatch, getState) => {\r\n    stayService\r\n      .remove(stayId)\r\n      .then(() => {\r\n        console.log('Deleted Succesfully!');\r\n        dispatch({\r\n          type: 'REMOVE_STAY',\r\n          stayId,\r\n        });\r\n        showSuccessMsg('Stay removed');\r\n      })\r\n      .catch((err) => {\r\n        showErrorMsg('Cannot remove stay');\r\n        console.log('Cannot remove stay', err);\r\n      });\r\n  };\r\n}\r\n\r\nexport function onAddStay(stay) {\r\n  return (dispatch) => {\r\n    // const stay = stayService.getEmptyStay();\r\n    const addedstay = stayService\r\n      .save(stay)\r\n      .then((savedStay) => {\r\n        console.log('Added Stay', savedStay);\r\n        dispatch({\r\n          type: 'ADD_STAY',\r\n          stay: savedStay,\r\n        });\r\n        showSuccessMsg('Stay added');\r\n      })\r\n      .catch((err) => {\r\n        showErrorMsg('Cannot add stay');\r\n        console.log('Cannot add stay', err);\r\n      });\r\n  };\r\n}\r\n\r\nexport function onUpdateStay(stay) {\r\n  return async (dispatch) => {\r\n    try {\r\n      const updatedStay = await stayService.save(stay);\r\n      dispatch({\r\n        type: 'UPDATE_STAY',\r\n        updatedStay,\r\n      });\r\n      return stay;\r\n    } catch (err) {\r\n      showErrorMsg('Cannot update stay');\r\n      console.log('Cannot  update stay', err);\r\n    }\r\n  };\r\n}\r\n\r\nexport function onSetCurrStay(stayId) {\r\n  return async (dispatch) => {\r\n    try {\r\n      const currStay = await stayService.getById(stayId);\r\n      dispatch({\r\n        type: 'SET_CURR_STAY',\r\n        currStay,\r\n      });\r\n      return currStay;\r\n    } catch (err) {\r\n      showErrorMsg('Cannot onSetCurrStay ');\r\n      console.log('Cannot  onSetCurrStay ', err);\r\n    }\r\n  };\r\n}\r\n","export function changePage(pageName) {\r\n  return async (dispatch) => {\r\n    try {\r\n      const currPage = await pageName;\r\n      dispatch({ type: 'SET_PAGE', currPage });\r\n    } catch (err) {\r\n      console.log('currPage : err ', err);\r\n    }\r\n  };\r\n}\r\nexport function setModalPos(modalPos) {\r\n  return async (dispatch) => {\r\n    try {\r\n      // console.log('modalPos in page actions is', modalPos);\r\n      // const currPage = await pageName;\r\n      dispatch({\r\n        type: 'SET_MODAL_POS',\r\n        modalPos,\r\n      });\r\n    } catch (err) {\r\n      console.log('modalPos : err ', err);\r\n    }\r\n  };\r\n}\r\nexport function setPos(relativePos) {\r\n  return async (dispatch) => {\r\n    try {\r\n      // const currPage = await pageName;\r\n      dispatch({\r\n        type: 'SET_POS',\r\n        relativePos,\r\n      });\r\n    } catch (err) {\r\n      console.log('modalPos : err ', err);\r\n    }\r\n  };\r\n}\r\n","import React, { Component } from 'react';\r\nimport Slider from 'react-slick';\r\nimport 'slick-carousel/slick/slick.css';\r\nimport 'slick-carousel/slick/slick-theme.css';\r\n\r\nexport default class ImgSlider extends Component {\r\n  render() {\r\n    const { stay } = this.props;\r\n    const settings = {\r\n      dots: true,\r\n      infinite: true,\r\n      speed: 500,\r\n      slidesToShow: 1,\r\n      slidesToScroll: 1,\r\n    }\r\n    return (\r\n      <div className='container'>\r\n        <Slider className='main-slider' {...settings}>\r\n          <div className='slider-img-div'>\r\n            <img className='slider-img' src={stay.imgUrls[0]} />\r\n          </div>\r\n          <div className='slider-img-div'>\r\n            <img className='slider-img' src={stay.imgUrls[1]} />\r\n          </div>\r\n          <div className='slider-img-div'>\r\n            <img className='slider-img' src={stay.imgUrls[2]} />\r\n          </div>\r\n          <div className='slider-img-div'>\r\n            <img className='slider-img' src={stay.imgUrls[3]} />\r\n          </div>\r\n          <div className='slider-img-div'>\r\n            <img className='slider-img' src={stay.imgUrls[4]} />\r\n          </div>\r\n        </Slider>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import Axios from 'axios';\r\n\r\nimport { httpService } from './http.service';\r\nimport { storageService } from './async-storage.service';\r\nimport { userService } from './user.service';\r\n// import { socketService, SOCKET_EVENT_ORDER_ADDED } from './socket.service';\r\nimport Orders from '../data/order.js';\r\nimport { utilService } from './util.service';\r\nimport { getCurrentUser } from '../store/user.actions';\r\nimport { faChessKing } from '@fortawesome/free-solid-svg-icons';\r\nconst listeners = [];\r\nconst STORAGE_KEY = 'orderDB';\r\nlet gOrders = Orders;\r\nconst BASE_URL =\r\n  process.env.NODE_ENV === 'production'\r\n    ? '/api/order/'\r\n    : 'http://localhost:3030/api/order/';\r\n\r\nconst axios = Axios.create({\r\n  withCredentials: true,\r\n});\r\n\r\nexport const orderService = {\r\n  add,\r\n  query,\r\n  remove,\r\n  subscribe,\r\n  getOrders,\r\n  updateOrder,\r\n  getById,\r\n  newOrder,\r\n};\r\n\r\nasync function query(userId, isHost) {\r\n  return httpService.get('order', { userId, isHost });\r\n}\r\n\r\nfunction getById(orderId) {\r\n  return httpService.get(`order/${orderId}`);\r\n}\r\n\r\nfunction remove(orderId) {\r\n  return httpService.delete(`order/${orderId}`);\r\n}\r\n\r\nasync function add(order) {\r\n  const user = await userService.getLoggedinUser();\r\n  const miniUser = {\r\n    _id: user._id,\r\n    fullname: user.fullname,\r\n    imgUrl: user.imgUrl,\r\n  };\r\n  const orderToSave = { ...order, user: miniUser };\r\n  return httpService.post(`order`, orderToSave);\r\n}\r\n\r\nasync function newOrder(order) {\r\n  const user = await userService.getLoggedinUser();\r\n  console.log('new order in service', order);\r\n  const addedOrder = order;\r\n\r\n  return addedOrder;\r\n}\r\n\r\nasync function getOrders(userId) {\r\n  const filterBy = {\r\n    userId,\r\n  };\r\n\r\n  return httpService.get('order', filterBy);\r\n}\r\n\r\nasync function updateOrder(order) {\r\n  return httpService.put(`order`, order);\r\n}\r\n\r\nfunction subscribe(listener) {\r\n  listeners.push(listener);\r\n}\r\n\r\nfunction _notifySubscribersOrdersChanged(orders) {\r\n  listeners.forEach((listener) => listener(orders));\r\n}\r\n\r\nwindow.addEventListener('storage', () => {\r\n  query().then((orders) => {\r\n    _notifySubscribersOrdersChanged(orders);\r\n  });\r\n});\r\n","import { userService } from \"../services/user.service\";\r\nimport { showErrorMsg, showSuccessMsg } from \"../services/event-bus.service.js\";\r\nimport {\r\n  socketService,\r\n  SOCKET_EMIT_USER_WATCH,\r\n  SOCKET_EVENT_USER_UPDATED,\r\n} from '../services/socket.service.js';\r\nimport { orderService } from '../services/order.service.js';\r\nimport order from '../data/order.js';\r\nimport { stayService } from '../services/stay.service.js';\r\nimport { useReducer } from 'react';\r\nimport { utilService } from '../services/util.service.js'\r\n\r\nexport function onLogin(credentials) {\r\n  return async (dispatch) => {\r\n    try {\r\n      const user = await userService.login(credentials);\r\n      dispatch({\r\n        type: \"SET_USER\",\r\n        user,\r\n      });\r\n      return user;\r\n    } catch (err) {\r\n      showErrorMsg(\"Cannot login\");\r\n      console.log(\"Cannot login\", err);\r\n    }\r\n  };\r\n}\r\n\r\nexport function onSignup(credentials) {\r\n  return async (dispatch) => {\r\n    try {\r\n      credentials.savedNotifications = [];\r\n      console.log(\"!!!\", credentials);\r\n      var randomNum = utilService.getRandomIntInclusive(1, 100);\r\n      var gender = randomNum > 50 ? \"men\" : \"women\";\r\n\r\n      credentials.imgUrl = `https://randomuser.me/api/portraits/${gender}/${randomNum}.jpg`;\r\n      const user = await userService.signup(credentials);\r\n      dispatch({\r\n        type: \"SET_USER\",\r\n        user,\r\n      });\r\n      return user;\r\n    } catch (err) {\r\n      showErrorMsg(\"Cannot signup\");\r\n      console.log(\"Cannot signup\", err);\r\n    }\r\n  };\r\n}\r\nexport function onUpdateUser(credentials) {\r\n  return async (dispatch) => {\r\n    try {\r\n      console.log('this is on update', credentials);\r\n      const user = await userService.update(credentials)\r\n      console.log('user in update', user);\r\n      dispatch({\r\n        type: \"SET_USER\",\r\n        user,\r\n      });\r\n      return user;\r\n    } catch (err) {\r\n      showErrorMsg(\"Cannot signup\");\r\n      console.log(\"Cannot signup\", err);\r\n    }\r\n  };\r\n}\r\n\r\nexport function onLogout() {\r\n  return async (dispatch) => {\r\n    try {\r\n      await userService.logout();\r\n      dispatch({\r\n        type: \"SET_USER\",\r\n        user: null,\r\n      });\r\n      showSuccessMsg(`Goodbye my friend`);\r\n    } catch (err) {\r\n      showErrorMsg(\"Cannot logout\");\r\n      console.log(\"Cannot logout\", err);\r\n    }\r\n  };\r\n}\r\n\r\nexport function getCurrentUser() {\r\n  return async (dispatch) => {\r\n    try {\r\n      const user = await userService.getLoggedinUser();\r\n      dispatch({\r\n        type: \"SET_USER\",\r\n        user,\r\n      });\r\n      return user;\r\n    } catch (err) {\r\n      showErrorMsg(\"No user found\");\r\n      console.log(\"No user found\", err);\r\n    }\r\n  };\r\n}\r\n\r\nexport function loadAndWatchUser(userId) {\r\n  return async (dispatch) => {\r\n    try {\r\n      const user = await userService.getById(userId);\r\n      dispatch({ type: \"SET_WATCHED_USER\", user });\r\n      socketService.emit(SOCKET_EMIT_USER_WATCH, userId);\r\n      socketService.off(SOCKET_EVENT_USER_UPDATED);\r\n      socketService.on(SOCKET_EVENT_USER_UPDATED, (user) => {\r\n        console.log(\"USER UPADTED FROM SOCKET\");\r\n        dispatch({ type: \"SET_WATCHED_USER\", user });\r\n      });\r\n    } catch (err) {\r\n      showErrorMsg(\"Cannot load user\");\r\n      console.log(\"Cannot load user\", err);\r\n    }\r\n  };\r\n}\r\n\r\nexport function saveStayToUser(stayId) {\r\n  return async (dispatch) => {\r\n    try {\r\n      console.log(\"stayId saveStayToUser\", stayId);\r\n      const user = userService.getLoggedinUser();\r\n      console.log(\"user saveStayToUser1\", user);\r\n      user.savedStays.push(stayId);\r\n      await userService.update(user);\r\n      showSuccessMsg(\"saved stay\");\r\n      dispatch({\r\n        type: 'SAVE_STAY_TO_USER',\r\n        user,\r\n      });\r\n    } catch (err) {\r\n      showErrorMsg('Cannot save stay');\r\n      console.log('Cannot save stay', err);\r\n    }\r\n  };\r\n}\r\nexport function removeStayFromUser(stayId) {\r\n  return async (dispatch) => {\r\n    try {\r\n      const user = userService.getLoggedinUser();\r\n      const savedStays = user.savedStays.filter((savedStay) => savedStay !== stayId);\r\n      await userService.update({ ...user, savedStays });\r\n      showSuccessMsg('saved stay');\r\n      dispatch({\r\n        type: 'REMOVE_STAY_FROM_USER',\r\n        user,\r\n      });\r\n    } catch (err) {\r\n      showErrorMsg(\"Cannot save stay\");\r\n      console.log(\"Cannot save stay\", err);\r\n    }\r\n  };\r\n}\r\n\r\nexport function saveNotifiToUser(notifi) {\r\n  return async (dispatch) => {\r\n    console.log('!!!!!', notifi);\r\n    try {\r\n      let user = await userService.getLoggedinUser();\r\n      user = { ...user, savedNotifications: [...user.savedNotifications, notifi] };\r\n\r\n      user.savedNotifications.push(notifi);\r\n      await userService.update(user);\r\n      // user = await httpService.put(`user/${user._id}`, user);\r\n      // if (getLoggedinUser()._id === user._id) _saveLocalUser(user);\r\n      dispatch({\r\n        type: \"SET_USER\",\r\n        user,\r\n      });\r\n    } catch (err) {\r\n      console.log(\"Cannot save notifi\", err);\r\n    }\r\n  };\r\n}\r\nexport function setNotifiStatus(status){\r\n  return (dispatch) => {\r\n    try {\r\n      dispatch({\r\n        type: \"SET_NOTIFI_STATUS\",\r\n        status\r\n      });\r\n    } catch (err) {\r\n      console.log(\"Cannot update status\", err);\r\n    }\r\n}\r\n}\r\nexport function loadOrdersFromUser() {\r\n  console.log(\"loadOrdersFromUser\");\r\n  return async (dispatch) => {\r\n    try {\r\n      const user = await userService.getLoggedinUser();\r\n      const orders = await orderService.getOrders(user._id);\r\n      dispatch({ type: \"LOAD_ORDERS_FROM_USER\", orders });\r\n      return orders;\r\n    } catch (err) {\r\n      console.log(\"UserActions: err in loadOrdersFromUser\", err);\r\n    }\r\n  };\r\n}\r\n\r\nexport function onRemoveOrderFromUser(orderId) {\r\n  return async (dispatch) => {\r\n    try {\r\n      await orderService.remove(orderId);\r\n      showSuccessMsg(\"Order removed\");\r\n      return dispatch({\r\n        type: \"REMOVE_ORDER_FROM_USER\",\r\n        orderId,\r\n      });\r\n    } catch (err) {\r\n      showErrorMsg(\"Cannot remove order\");\r\n      console.log(\"Cannot remove order\", err);\r\n    }\r\n  };\r\n}\r\n\r\nexport function loadStaysFromUser() {\r\n  return async (dispatch) => {\r\n    try {\r\n      const user = await userService.getLoggedinUser();\r\n      // const userSavedStays=user.savedStays\r\n      // const stays = await stayService.getUserStays(user);//do i need service\r\n      const stays = user.savedStays;\r\n      dispatch({ type: \"LOAD_USER_STAYS\", stays });\r\n      return stays;\r\n    } catch (err) {\r\n      console.log(\"UserActions: err in loadStaysFromUser\", err);\r\n    }\r\n  };\r\n}\r\n\r\n// export function addOrderToUser(order) {\r\n//   return async (dispatch) => {\r\n//     try {\r\n//       const user = userService.getLoggedinUser();\r\n//       user.orders.push(order._Id);\r\n\r\n//       await userService.update(user);\r\n//       showSuccessMsg('Order added');\r\n//       dispatch({\r\n//         type: 'ADD_ORDER_TO_USER',\r\n//         order,\r\n//       });\r\n//     } catch (err) {\r\n//       showErrorMsg('Cannot add order');\r\n//       console.log('Cannot add order', err);\r\n//     }\r\n//   };\r\n// }\r\n","export default __webpack_public_path__ + \"static/media/brooklynLoft.e7db3564.jpg\";","export default __webpack_public_path__ + \"static/media/loader.3e80efae.svg\";","import loader from \"../assets/img/loader.svg\"\r\n\r\nexport function Loader(){\r\n    return <img className=\"loader\" src={loader} alt=\"\" /> \r\n}\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { StayList } from '../cmps/StayList';\r\nimport { loadStays, filterStays } from '../store/stay.actions.js';\r\nimport { changePage } from '../store/page.actions.js';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faStar } from '@fortawesome/free-solid-svg-icons';\r\nimport { faHeart } from '@fortawesome/free-solid-svg-icons';\r\nimport ImgSlider from '../cmps/ImgSlider';\r\nimport { userService } from '../services/user.service.js';\r\nimport { saveStayToUser, removeStayFromUser } from '../store/user.actions.js';\r\n\r\nimport brooklynLoft from '../assets/img/brooklynLoft.jpg';\r\nimport { Link } from 'react-router-dom';\r\nimport { Loader } from './Loader';\r\nimport stay from '../data/stay';\r\nclass _StayPreview extends React.Component {\r\n  state = {\r\n    isSaved: false,\r\n  };\r\n\r\n  async componentDidMount() {\r\n    const { stay } = this.props;\r\n    // console.log('stay in stayPreview', stay);\r\n    const user = await userService.getLoggedinUser();\r\n    // console.log('user in stay preview', user);\r\n    // console.log('stay._id in stay preview', stay._id);\r\n    if (user) {\r\n      user.savedStays.forEach((savedStay) => {\r\n        // console.log('savedStay in stay preview', savedStay);\r\n        if (user.savedStays.includes(stay._id)) {\r\n          this.setState({ isSaved: true });\r\n        }\r\n      });\r\n    }\r\n  }\r\n  // onRemoveSavedStay = async (stayId) => {\r\n  //   this.props.removeStayFromUser(stayId);\r\n  //   // const user = await userService.getLoggedinUser();\r\n  //   const userSavedStays = await this.props.loadStaysFromUser();\r\n  //   console.log('userSavedStays in onRemoveSavedStay', userSavedStays);\r\n  //   this.setState({ userSavedStays: userSavedStays }, () => {\r\n\r\n  //   });\r\n  // };\r\n  toggleSavedStay = (ev) => {\r\n    console.log('toggleSavedStay');\r\n    console.log(' isSaved is', this.state.isSaved);\r\n    ev.preventDefault();\r\n    ev.stopPropagation();\r\n    const { isSaved } = this.state;\r\n    if (isSaved) {\r\n      this.saveStay(ev);\r\n    } else {\r\n      this.removeStay(ev);\r\n    }\r\n  };\r\n\r\n  removeStay = async (ev) => {\r\n    ev.preventDefault();\r\n    ev.stopPropagation();\r\n    const { stay } = this.props;\r\n    // this.setState({ isSaved: false});\r\n    const user = await userService.getLoggedinUser();\r\n    await this.props.removeStayFromUser(stay._id);\r\n  };\r\n  saveStay = async (ev) => {\r\n    ev.preventDefault();\r\n    ev.stopPropagation();\r\n    const { stay } = this.props;\r\n    // this.setState({ isSaved: true});\r\n    const user = await userService.getLoggedinUser();\r\n    await this.props.saveStayToUser(stay._id);\r\n  };\r\n\r\n  getReviewsAverage = (reviews) => {\r\n    if (!reviews || !reviews.length) return 0;\r\n    const average =\r\n      reviews.reduce(function (sum, value) {\r\n        return sum + value.ratings.avg;\r\n      }, 0) / reviews.length;\r\n\r\n    return average.toFixed(2);\r\n  };\r\n\r\n  render() {\r\n    const { stay } = this.props;\r\n    const { isSaved } = this.state;\r\n    if (!stay) <Loader />;\r\n    return (\r\n      <div className='stay-preview'>\r\n        <div className='inner-stay-preview'>\r\n          <button\r\n            className={`stay-preview-save-btn ${isSaved ? 'on' : 'off'}`}\r\n            onClick={(ev) => {\r\n              ev.preventDefault();\r\n              ev.stopPropagation();\r\n              // this.onSaveStay(ev);\r\n              this.setState({ isSaved: !isSaved }, () => {\r\n                console.log('isSaved after setstate***');\r\n                this.toggleSavedStay(ev);\r\n              });\r\n            }}\r\n          >\r\n            <FontAwesomeIcon icon={faHeart} />\r\n          </button>\r\n          <ImgSlider stay={stay} />\r\n          <div className='preview-content'>\r\n            <span className='stay-rate'>\r\n              <FontAwesomeIcon icon={faStar} />\r\n              {stay.avgReviewRating && stay.reviews && (\r\n                <span className='prev-rev-txt'>\r\n                  {!stay.reviews || !stay.reviews.length\r\n                    ? 0\r\n                    : this.getReviewsAverage(stay.reviews)}{' '}\r\n                  ( {stay.reviews.length} )\r\n                </span>\r\n              )}\r\n            </span>\r\n            <p>\r\n              {stay.type} ‧ {stay.city}{' '}\r\n            </p>\r\n            <p className='title-prev'> {stay.title}</p>\r\n            <p>\r\n              <span className='price-prev'>${stay.price}</span> / night\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    stays: state.stayModule.stays,\r\n    savedStays: state.userModule.stays,\r\n  };\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n  loadStays,\r\n  filterStays,\r\n  changePage,\r\n  saveStayToUser,\r\n  removeStayFromUser,\r\n};\r\n\r\nexport const StayPreview = connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(_StayPreview);\r\n","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { onSetCurrStay } from '../store/stay.actions';\r\n\r\nimport { StayPreview } from '../cmps/StayPreview.jsx';\r\nimport {Loader} from '../cmps/Loader.jsx'\r\nexport class _StayList extends React.Component {\r\n\r\n  setStay = async (stayId) => {\r\n    await this.props.onSetCurrStay(stayId);\r\n  };\r\n\r\n  render() {\r\n    \r\n    const { stays } = this.props;\r\n    if(!stays||!stays.length) return <Loader/>  \r\n    console.log('stay in stayList', stays);\r\n    return (\r\n      <div className='stay-list'>\r\n        {stays.map((stay) => (\r\n          <span key={stay._id} onClick={() => this.setStay(stay._id)}>\r\n            <Link key={stay._id} to={`/stay/${stay._id}`}>\r\n              <StayPreview key={stay._id} stay={stay} />\r\n            </Link>\r\n          </span>\r\n        ))}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {};\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n  onSetCurrStay,\r\n};\r\n\r\nexport const StayList = connect(mapStateToProps, mapDispatchToProps)(_StayList);\r\n","export async function uploadImg(ev) {\r\n    const CLOUD_NAME = 'dohqnraie'\r\n    const UPLOAD_PRESET = 'n6mcjriy'\r\n    const UPLOAD_URL = `https://api.cloudinary.com/v1_1/${CLOUD_NAME}/image/upload`\r\n\r\n    const formData = new FormData();\r\n    formData.append('file', ev.target.files[0])\r\n    formData.append('upload_preset', UPLOAD_PRESET);\r\n    try {\r\n        const res = await fetch(UPLOAD_URL, {\r\n            method: 'POST',\r\n            body: formData\r\n        })\r\n        const data = await res.json()\r\n        return data.url;\r\n    }\r\n    catch (err) {\r\n        console.error(err)\r\n    }\r\n}\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { onAddStay, onUpdateStay } from '../store/stay.actions';\r\nimport {\r\n  Image,\r\n  Video,\r\n  Transformation,\r\n  CloudinaryContext,\r\n} from 'cloudinary-react';\r\nimport { Cloudinary } from 'cloudinary-core';\r\nimport { uploadImg } from '../services/cloudinary-service.js';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faHeart } from '@fortawesome/free-regular-svg-icons';\r\nimport {\r\n  faBookmark,\r\n  faBookOpen,\r\n  faExternalLinkAlt,\r\n  faHome,\r\n  faMedal,\r\n  faStar,\r\n} from '@fortawesome/free-solid-svg-icons';\r\n\r\nexport class _AddStay extends React.Component {\r\n  state = {\r\n    stay: {\r\n      title: '',\r\n      price: 0,\r\n      type: 'Apartment',\r\n      capacity: '',\r\n      city: '',\r\n      desc: '',\r\n      stayType: 'Entire place',\r\n      imgUrls: [],\r\n      amenities: [],\r\n      avgReviewRating: 4.9,\r\n      loc: {\r\n        country: 'France',\r\n        countryCode: 'FR',\r\n        address: '',\r\n        lat: 48.864716,\r\n        lng: 2.349014,\r\n      },\r\n    },\r\n    tv: false,\r\n    wifi: false,\r\n    kitchen: false,\r\n    smokingAllowed: false,\r\n    petsAllowed: false,\r\n    cookingBasics: false,\r\n  };\r\n\r\n  // amenities:{\r\n  //   tv: false,\r\n  //   wifi: false,\r\n  //   kitchen: false,\r\n  //   smokingAllowed: false,\r\n  //   petsAllowed: false,\r\n  //   cookingBasics: false,\r\n  // }\r\n\r\n  componentDidMount() {\r\n    if (this.props.stay) {\r\n      const stayToSave = this.props.stay[0];\r\n      if (\r\n        stayToSave.amenities.length > 0 &&\r\n        stayToSave.amenities.includes('TV')\r\n      ) {\r\n        this.setState({ tv: true });\r\n      }\r\n      if (\r\n        stayToSave.amenities.length > 0 &&\r\n        stayToSave.amenities.includes('Wifi')\r\n      ) {\r\n        this.setState({ wifi: true });\r\n      }\r\n      if (\r\n        stayToSave.amenities.length > 0 &&\r\n        stayToSave.amenities.includes('Kitchen')\r\n      ) {\r\n        this.setState({ kitchen: true });\r\n      }\r\n      if (\r\n        stayToSave.amenities.length > 0 &&\r\n        stayToSave.amenities.includes('Smoking allowed')\r\n      ) {\r\n        this.setState({ smokingAllowed: true });\r\n      }\r\n      if (\r\n        stayToSave.amenities.length > 0 &&\r\n        stayToSave.amenities.includes('Pets allowed')\r\n      ) {\r\n        this.setState({ petsAllowed: true });\r\n      }\r\n      if (\r\n        stayToSave.amenities.length > 0 &&\r\n        stayToSave.amenities.includes('Cooking basics')\r\n      ) {\r\n        this.setState({ cookingBasics: true });\r\n      }\r\n      this.setState({ stay: this.props.stay[0] });\r\n    }\r\n  }\r\n\r\n  handleChange = (ev) => {\r\n    const field = ev.target.name;\r\n    const value = ev.target.value;\r\n\r\n    this.setState({ stay: { ...this.state.stay, [field]: value } });\r\n  };\r\n  handleAddressChange = (ev) => {\r\n    const field = ev.target.name;\r\n    const value = ev.target.value;\r\n\r\n    this.setState(\r\n      {\r\n        stay: {\r\n          ...this.state.stay,\r\n          loc: { ...this.state.stay.loc, [field]: value },\r\n        },\r\n      },\r\n      () => {\r\n        console.log('updated address:', this.state.stay.loc);\r\n      }\r\n    );\r\n  };\r\n\r\n  handleChangeArray = (ev) => {\r\n    const field = ev.target.name;\r\n    const value = ev.target.value;\r\n    this.setState({ ...this.state, amenities: [value] });\r\n    // console.log('state in the end of handle change', this.state);\r\n  };\r\n  // imgUrls: [value],\r\n  handleImgChange = async (ev) => {\r\n    console.log('inHandelImg-start', this.state);\r\n\r\n    const field = ev.target.name;\r\n    try {\r\n      const value = await uploadImg(ev);\r\n      const { imgUrls } = this.state.stay;\r\n      imgUrls.push(value);\r\n      this.setState((prevState) => ({ ...prevState.stay, imgUrls }));\r\n      console.log('inHandelImg', this.state);\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  };\r\n\r\n  handleChangeSelect = (ev) => {\r\n    const field = ev.target.name;\r\n    const value = ev.target.value;\r\n    this.setState(\r\n      (prevState) => ({\r\n        stay: { ...prevState.stay, [field]: value },\r\n      }),\r\n      () => {\r\n        console.log(this.state.stay);\r\n        // this.props.onAddStay(this.state.stay)\r\n      }\r\n    );\r\n    // console.log(ev.target.value);\r\n  };\r\n\r\n  handleAmenityChange = (ev) => {\r\n    const field = ev.target.name;\r\n\r\n    switch (field) {\r\n      case 'tv':\r\n        this.setState({ tv: !this.state.tv });\r\n        break;\r\n      case 'kitchen':\r\n        this.setState({ kitchen: !this.state.kitchen });\r\n        break;\r\n      case 'wifi':\r\n        this.setState({ wifi: !this.state.wifi });\r\n        break;\r\n      case 'petsAllowed':\r\n        this.setState({ petsAllowed: !this.state.petsAllowed });\r\n        break;\r\n      case 'cookingBasics':\r\n        this.setState({ cookingBasics: !this.state.cookingBasics });\r\n        break;\r\n      case 'smokingAllowed':\r\n        this.setState({ smokingAllowed: !this.state.smokingAllowed });\r\n        break;\r\n\r\n      default:\r\n        break;\r\n    }\r\n  };\r\n\r\n  onAddStay = (ev) => {\r\n    ev.preventDefault();\r\n    // console.log('adding stay ');\r\n\r\n    var amenityObj = [];\r\n    if (this.state.tv) {\r\n      amenityObj.push('TV');\r\n    }\r\n    if (this.state.kitchen) {\r\n      amenityObj.push('Kitchen');\r\n    }\r\n    if (this.state.wifi) {\r\n      amenityObj.push('Wifi');\r\n    }\r\n    if (this.state.petsAllowed) {\r\n      amenityObj.push('Pets allowed');\r\n    }\r\n    if (this.state.cookingBasics) {\r\n      amenityObj.push('Cooking basics');\r\n    }\r\n    if (this.state.smokingAllowed) {\r\n      amenityObj.push('Smoking allowed');\r\n    }\r\n    console.log('stayin addStay !', this.state);\r\n    this.setState(\r\n      (prevState) => ({\r\n        stay: { ...prevState.stay, amenities: amenityObj },\r\n      }),\r\n      () => {\r\n        this.props.onAddStay(this.state.stay);\r\n      }\r\n    );\r\n  };\r\n\r\n  // this.clearState();\r\n\r\n  onEditStay = (ev) => {\r\n    ev.preventDefault();\r\n    if (\r\n      !this.state.stay.title ||\r\n      !this.state.stay.price ||\r\n      !this.state.stay.type\r\n    )\r\n      return;\r\n\r\n    var amenityObj = [];\r\n    if (this.state.tv) {\r\n      amenityObj.push('TV');\r\n    }\r\n    if (this.state.kitchen) {\r\n      amenityObj.push('Kitchen');\r\n    }\r\n    if (this.state.wifi) {\r\n      amenityObj.push('Wifi');\r\n    }\r\n    if (this.state.petsAllowed) {\r\n      amenityObj.push('Pets allowed');\r\n    }\r\n    if (this.state.cookingBasics) {\r\n      amenityObj.push('Cooking basics');\r\n    }\r\n    if (this.state.smokingAllowed) {\r\n      amenityObj.push('Smoking allowed');\r\n    }\r\n    this.setState(\r\n      (prevState) => ({\r\n        stay: { ...prevState.stay, amenities: amenityObj },\r\n      }),\r\n      () => {\r\n        this.props.onUpdateStay(this.state.stay);\r\n      }\r\n    );\r\n  };\r\n\r\n  isChecked = () => {};\r\n  clearState = () => {\r\n    const clearTemplate = {\r\n      stay: {\r\n        title: '',\r\n        price: 0,\r\n        type: 'Apartment',\r\n        capacity: '',\r\n        city: '',\r\n        desc: '',\r\n        stayType: 'Entire place',\r\n        imgUrls: [],\r\n        amenities: [],\r\n        loc: {\r\n          country: 'United States',\r\n          countryCode: 'US',\r\n          address: 'New York, United States',\r\n          lat: 40.66696007901832,\r\n          lng: -73.93152486102896,\r\n        },\r\n      },\r\n      tv: false,\r\n      wifi: false,\r\n      kitchen: false,\r\n      smokingAllowed: false,\r\n      petsAllowed: false,\r\n      cookingBasics: false,\r\n    };\r\n    this.setState({ ...clearTemplate });\r\n  };\r\n\r\n  render() {\r\n    const {\r\n      title,\r\n      price,\r\n      type,\r\n      imgUrls,\r\n      amenities,\r\n      capacity,\r\n      city,\r\n      stayType,\r\n      desc,\r\n    } = this.state.stay;\r\n    // const { onAddStay } = this.props;\r\n    const { tv, kitchen, wifi, smokingAllowed, cookingBasics, petsAllowed } =\r\n      this.state;\r\n    const { isEdit, stay, user } = this.props;\r\n    return (\r\n      <div>\r\n        {/* <AddForm/> */}\r\n        {!isEdit && (\r\n          <form className='add-stay' onSubmit={this.onAddStay}>\r\n            <div className='add-stay-form-header'>\r\n              <p className='add-stay-title'>\r\n                <input\r\n                  type='text'\r\n                  name='title'\r\n                  id='stay-title'\r\n                  value={title}\r\n                  onChange={this.handleChange}\r\n                  required\r\n                  placeholder='Stay name'\r\n                />\r\n              </p>\r\n              <div className='stay-short-info'>\r\n                <div className='stay-short-info-details'>\r\n                  <span className='stay-rate'>\r\n                    <FontAwesomeIcon className='star' icon={faStar} />\r\n                  </span>\r\n                  <span>new</span> <p>( 0 reviews )</p>\r\n                  <span className='span-dot'>·</span>\r\n                  <p>\r\n                    city:{' '}\r\n                    <input\r\n                      type='city'\r\n                      name='city'\r\n                      value={city}\r\n                      onChange={this.handleChange}\r\n                      id='stay-city'\r\n                      required\r\n                    ></input>\r\n                  </p>\r\n                  <p>\r\n                    address:{' '}\r\n                    <input\r\n                      type='address'\r\n                      name='address'\r\n                      value={this.state.stay.loc.address}\r\n                      onChange={this.handleAddressChange}\r\n                      id='stay-address'\r\n                      required\r\n                    ></input>\r\n                  </p>\r\n                </div>\r\n                <div className='action-btns'>\r\n                  <a>\r\n                    <FontAwesomeIcon\r\n                      className='action-icon'\r\n                      icon={faExternalLinkAlt}\r\n                    />\r\n                    Share\r\n                  </a>\r\n                  <a>\r\n                    <FontAwesomeIcon className='action-icon' icon={faHeart} />\r\n                    Save\r\n                  </a>\r\n                </div>\r\n              </div>\r\n\r\n              {/* <label htmlFor='stay-title'>Title:</label> */}\r\n            </div>\r\n\r\n            <section className='stay-gallery'>\r\n              <div\r\n                className='img-upload-container'\r\n                style={{\r\n                  backgroundImage: `url(${this.state.stay.imgUrls[0]})`,\r\n                }}\r\n              >\r\n                <label className='img-upload-label'>\r\n                  <p>Upload Image</p>\r\n\r\n                  <input\r\n                    type='file'\r\n                    onChange={this.handleImgChange}\r\n                    // console.log('first img');\r\n                    // const imgArr = [...imgUrls];\r\n                    // imgArr[0] = ev.target.files[0];\r\n                    // const newArray = [...imgUrls];\r\n                    // newArray.splice(0, 0, ev.target.files[0]);\r\n                    // value={imgUrls[0]}\r\n                    name='img'\r\n                    placeholder='Enter img'\r\n                    id='img'\r\n                    className='img-upload-input'\r\n                  />\r\n                </label>\r\n              </div>\r\n\r\n              <div\r\n                className='img-upload-container'\r\n                style={{\r\n                  backgroundImage: `url(${this.state.stay.imgUrls[1]})`,\r\n                }}\r\n              >\r\n                <label className='img-upload-label'>\r\n                  <p>Upload Image</p>\r\n                  <input\r\n                    type='file'\r\n                    onChange={this.handleImgChange}\r\n                    // value={imgUrls[1]}\r\n\r\n                    //   const imgArr = [...imgUrls];\r\n                    //   imgArr[1] = ev.target.files[0];\r\n                    //   this.setState(\r\n                    //     {\r\n                    //       stay: {\r\n                    //         ...this.state.stay,\r\n                    //         imgUrls: [...imgArr],\r\n                    //       },\r\n                    //     },\r\n                    //     () => {\r\n                    //       console.log('second img');\r\n\r\n                    //       console.log(this.state.stay);\r\n                    //     }\r\n                    //   );\r\n                    // }}\r\n                    name='img'\r\n                    placeholder='Enter img'\r\n                    id='img'\r\n                    // defaultValue={'https://www.google.com/url?sa=i&url=https%3A%2F%2Fwww.settled.govt.nz%2Fblog%2Fbuying-property-during-covid-19-alert-level-3%2F&psig=AOvVaw0PJQPIghpayt2XDHkXu0Uy&ust=1633291390687000&source=images&cd=vfe&ved=0CAsQjRxqFwoTCMjMtuDCrPMCFQAAAAAdAAAAABAD'} onChange={this.handleImgChange}\r\n                    className='img-upload-input'\r\n                  />\r\n                </label>\r\n              </div>\r\n\r\n              <div\r\n                className='img-upload-container'\r\n                style={{\r\n                  backgroundImage: `url(${this.state.stay.imgUrls[2]})`,\r\n                }}\r\n              >\r\n                <label className='img-upload-label'>\r\n                  <p>Upload Image</p>\r\n                  <input\r\n                    type='file'\r\n                    onChange={this.handleImgChange}\r\n                    // value={imgUrls[2]}\r\n\r\n                    //   console.log('third img');\r\n\r\n                    //   const imgArr = [...imgUrls];\r\n                    //   imgArr[2] = ev.target.files[0];\r\n                    //   this.setState(\r\n                    //     {\r\n                    //       stay: {\r\n                    //         ...this.state.stay,\r\n                    //         imgUrls: [...imgArr],\r\n                    //       },\r\n                    //     },\r\n                    //     () => {\r\n                    //       console.log(this.state.stay);\r\n                    //     }\r\n                    //   );\r\n                    // }}\r\n                    name='img'\r\n                    placeholder='Enter img'\r\n                    id='img'\r\n                    // defaultValue={'https://www.google.com/url?sa=i&url=https%3A%2F%2Fwww.settled.govt.nz%2Fblog%2Fbuying-property-during-covid-19-alert-level-3%2F&psig=AOvVaw0PJQPIghpayt2XDHkXu0Uy&ust=1633291390687000&source=images&cd=vfe&ved=0CAsQjRxqFwoTCMjMtuDCrPMCFQAAAAAdAAAAABAD'} onChange={this.handleImgChange}\r\n                    className='img-upload-input'\r\n                  />\r\n                </label>\r\n              </div>\r\n\r\n              <div\r\n                className='img-upload-container'\r\n                style={{\r\n                  backgroundImage: `url(${this.state.stay.imgUrls[3]})`,\r\n                }}\r\n              >\r\n                <label className='img-upload-label'>\r\n                  <p>Upload Image</p>\r\n                  <input\r\n                    type='file'\r\n                    onChange={this.handleImgChange}\r\n                    // value={imgUrls[3]}\r\n                    //   console.log('fourth img');\r\n\r\n                    //   const imgArr = [...imgUrls];\r\n                    //   imgArr[2] = ev.target.files[0];\r\n                    //   this.setState(\r\n                    //     {\r\n                    //       stay: {\r\n                    //         ...this.state.stay,\r\n                    //         imgUrls: [...imgArr],\r\n                    //       },\r\n                    //     },\r\n                    //     () => {\r\n                    //       console.log(this.state.stay);\r\n                    //     }\r\n                    //   );\r\n                    // }}\r\n                    name='img'\r\n                    placeholder='Enter img'\r\n                    id='img'\r\n                    // defaultValue={'https://www.google.com/url?sa=i&url=https%3A%2F%2Fwww.settled.govt.nz%2Fblog%2Fbuying-property-during-covid-19-alert-level-3%2F&psig=AOvVaw0PJQPIghpayt2XDHkXu0Uy&ust=1633291390687000&source=images&cd=vfe&ved=0CAsQjRxqFwoTCMjMtuDCrPMCFQAAAAAdAAAAABAD'} onChange={this.handleImgChange}\r\n                    className='img-upload-input'\r\n                  />\r\n                </label>\r\n              </div>\r\n\r\n              <div\r\n                className='img-upload-container'\r\n                style={{\r\n                  backgroundImage: `url(${this.state.stay.imgUrls[4]})`,\r\n                }}\r\n              >\r\n                <label className='img-upload-label'>\r\n                  <p>Upload Image</p>\r\n                  <input\r\n                    type='file'\r\n                    onChange={this.handleImgChange}\r\n                    // value={imgUrls[4]}\r\n                    //   console.log('fifth img');\r\n                    //   const imgArr = [...imgUrls];\r\n                    //   imgArr[2] = ev.target.files[0];\r\n                    //   this.setState(\r\n                    //     {\r\n                    //       stay: {\r\n                    //         ...this.state.stay,\r\n                    //         imgUrls: [...imgArr],\r\n                    //       },\r\n                    //     },\r\n                    //     () => {\r\n                    //       console.log(this.state.stay);\r\n                    //     }\r\n                    //   );\r\n                    // }}\r\n                    name='img'\r\n                    placeholder='Enter img'\r\n                    id='img'\r\n                    // defaultValue={'https://www.google.com/url?sa=i&url=https%3A%2F%2Fwww.settled.govt.nz%2Fblog%2Fbuying-property-during-covid-19-alert-level-3%2F&psig=AOvVaw0PJQPIghpayt2XDHkXu0Uy&ust=1633291390687000&source=images&cd=vfe&ved=0CAsQjRxqFwoTCMjMtuDCrPMCFQAAAAAdAAAAABAD'} onChange={this.handleImgChange}\r\n                    className='img-upload-input'\r\n                  />\r\n                </label>\r\n              </div>\r\n            </section>\r\n\r\n            <section className='add-stay-info-container'>\r\n              <div className='add-stay-info-details'>\r\n                <div className='add-stay-info-details-header'>\r\n                  <div>\r\n                    <span>Capacity:</span>{' '}\r\n                    <input\r\n                      type='number'\r\n                      name='capacity'\r\n                      value={capacity}\r\n                      onChange={this.handleChange}\r\n                      required\r\n                    />\r\n                    <span>Stay Type:</span>\r\n                    <select name='stayType' onChange={this.handleChangeSelect}>\r\n                      <option value='Entire place'>Entire place</option>\r\n                      <option value='Private room'>Private room</option>\r\n                    </select>\r\n                    <span>Property Type:</span>\r\n                    <select\r\n                      name='type'\r\n                      onChange={this.handleChangeSelect}\r\n                      value={type}\r\n                    >\r\n                      <option value='Apartment'>Apartment</option>\r\n                      <option value='Villa'>Villa</option>\r\n                      <option value='Studio'>Studio</option>\r\n                      <option value='Loft'>Loft</option>\r\n                      <option value='Room'>Room</option>\r\n                    </select>\r\n                  </div>\r\n                  {/* <img className='host-img' src={user.imgUrl} /> */}\r\n                </div>\r\n\r\n                <div className='stay-features-container'>\r\n                  <div className='stay-features-details'>\r\n                    <FontAwesomeIcon icon={faHome} />\r\n                    <div>\r\n                      <h3>Entire Place</h3>\r\n                      {/* <p>Entire Place</p> */}\r\n                      <h4>You'll have the place to yourself.</h4>\r\n                    </div>\r\n                  </div>\r\n                  <div className='stay-features-details'>\r\n                    <FontAwesomeIcon icon={faBookOpen} />\r\n                    <div>\r\n                      <h3>House Rules</h3>\r\n                      <h4>\r\n                        {' '}\r\n                        This place isn’t suitable for children under 12 and the\r\n                        host doesn’t allow pets.\r\n                      </h4>\r\n                    </div>\r\n                  </div>\r\n                  <div className='stay-features-details'>\r\n                    <FontAwesomeIcon icon={faMedal} />\r\n                    <div>\r\n                      <h3>{user.fullname} is A Superhost</h3>\r\n                      <h4>\r\n                        {' '}\r\n                        Superhosts are experienced, highly rated hosts who are\r\n                        committed to providing great stays for guests.\r\n                      </h4>\r\n                    </div>\r\n                  </div>\r\n                  <div className='stay-features-details'>\r\n                    <FontAwesomeIcon icon={faBookmark} />\r\n                    <div>\r\n                      <h3>Wifi</h3>\r\n                      <h4>Guests often search for this popular amenity</h4>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className='stay-desc-container'>\r\n                  <p>Description</p>\r\n                  <textarea\r\n                    value={desc}\r\n                    name='desc'\r\n                    onChange={this.handleChange}\r\n                    className='desc-textarea'\r\n                  />\r\n                </div>\r\n\r\n                <div className='add-stay-amenities'>\r\n                  <p>Amenities</p>\r\n\r\n                  <div className='add-stay-amenities-item'>\r\n                    <input\r\n                      type='checkbox'\r\n                      name='tv'\r\n                      checked={tv}\r\n                      onChange={this.handleAmenityChange}\r\n                    />\r\n                    <label for='TV'>TV</label>\r\n                  </div>\r\n                  <div className='add-stay-amenities-item'>\r\n                    <input\r\n                      type='checkbox'\r\n                      name='wifi'\r\n                      checked={wifi}\r\n                      onChange={this.handleAmenityChange}\r\n                    />\r\n                    <label for='Wifi'>Wifi</label>\r\n                  </div>\r\n                  <div className='add-stay-amenities-item'>\r\n                    <input\r\n                      type='checkbox'\r\n                      name='kitchen'\r\n                      checked={kitchen}\r\n                      onChange={this.handleAmenityChange}\r\n                    />\r\n                    <label for='Kitchen'>Kitchen</label>\r\n                  </div>\r\n                  <div className='add-stay-amenities-item'>\r\n                    <input\r\n                      type='checkbox'\r\n                      name='smokingAllowed'\r\n                      checked={smokingAllowed}\r\n                      onChange={this.handleAmenityChange}\r\n                    />\r\n                    <label for='Smoking allowed'>Smoking allowed</label>\r\n                  </div>\r\n                  <div className='add-stay-amenities-item'>\r\n                    <input\r\n                      type='checkbox'\r\n                      name='petsAllowed'\r\n                      checked={petsAllowed}\r\n                      onChange={this.handleAmenityChange}\r\n                    />\r\n                    <label for='Pets allowed'>Pet allowed</label>\r\n                  </div>\r\n                  <div className='add-stay-amenities-item'>\r\n                    <input\r\n                      type='checkbox'\r\n                      name='cookingBasics'\r\n                      checked={cookingBasics}\r\n                      onChange={this.handleAmenityChange}\r\n                    />\r\n                    <label for='Cooking basics'>Cooking basics</label>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div className='add-stay-price-container'>\r\n                <span>Price:</span>\r\n                <input\r\n                  type='number'\r\n                  name='price'\r\n                  value={price}\r\n                  onChange={this.handleChange}\r\n                  required\r\n                />\r\n                <span>/ night</span>\r\n              </div>\r\n            </section>\r\n\r\n            <button className='add-stay-save-btn' type='submit'>\r\n              Enter!\r\n            </button>\r\n          </form>\r\n        )}\r\n        {isEdit && (\r\n          <form className='add-stay' onSubmit={this.onEditStay}>\r\n            <div className='add-stay-form-header'>\r\n              <p className='add-stay-title'>\r\n                <input\r\n                  type='text'\r\n                  name='title'\r\n                  id='stay-title'\r\n                  value={title}\r\n                  onChange={this.handleChange}\r\n                  required\r\n                  placeholder='Stay name'\r\n                />\r\n              </p>\r\n              <div className='stay-short-info'>\r\n                <div className='stay-short-info-details'>\r\n                  <span className='stay-rate'>\r\n                    <FontAwesomeIcon className='star' icon={faStar} />\r\n                  </span>\r\n                  <span>new</span> <p>( 0 reviews )</p>\r\n                  <span className='span-dot'>●</span>\r\n                  <p>\r\n                    address:{' '}\r\n                    <input\r\n                      type='city'\r\n                      name='city'\r\n                      value={city}\r\n                      onChange={this.handleChange}\r\n                      id='stay-city'\r\n                      required\r\n                    ></input>\r\n                  </p>\r\n                </div>\r\n                <div className='action-btns'>\r\n                  <a>\r\n                    <FontAwesomeIcon\r\n                      className='action-icon'\r\n                      icon={faExternalLinkAlt}\r\n                    />\r\n                    Share\r\n                  </a>\r\n                  <a>\r\n                    <FontAwesomeIcon className='action-icon' icon={faHeart} />\r\n                    Save\r\n                  </a>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* <section className='stay-gallery'>\r\n              <div\r\n                className='img-upload-container'\r\n                style={{ backgroundImage: imgUrls[0] }}\r\n              >\r\n                <label className='img-upload-label'>\r\n                  <p>Upload Image</p>\r\n                  <input\r\n                    type='file'\r\n                    onChange={(ev) => {\r\n                      console.log('first img');\r\n                      const imgArr = [...imgUrls];\r\n                      imgArr[0] = ev.target.files[0];\r\n                      // const newArray = [...imgUrls];\r\n                      // newArray.splice(0, 0, ev.target.files[0]);\r\n                      this.setState(\r\n                        {\r\n                          stay: {\r\n                            ...this.state.stay,\r\n                            imgUrls: [...imgArr],\r\n                          },\r\n                        },\r\n                        () => {\r\n                          console.log(this.state.stay);\r\n                        }\r\n                      );\r\n                    }}\r\n                    value={imgUrls[0]}\r\n                    className='img-upload-input'\r\n                  />\r\n                </label>\r\n              </div>\r\n\r\n              <div\r\n                className='img-upload-container'\r\n                style={{ backgroundImage: imgUrls[0] }}\r\n              >\r\n                <label className='img-upload-label'>\r\n                  <p>Upload Image</p>\r\n                  <input\r\n                    type='file'\r\n                    value={imgUrls[1]}\r\n                    onChange={(ev) => {\r\n                      const imgArr = [...imgUrls];\r\n                      imgArr[1] = ev.target.files[0];\r\n                      this.setState(\r\n                        {\r\n                          stay: {\r\n                            ...this.state.stay,\r\n                            imgUrls: [...imgArr],\r\n                          },\r\n                        },\r\n                        () => {\r\n                          console.log('second img');\r\n\r\n                          console.log(this.state.stay);\r\n                        }\r\n                      );\r\n                    }}\r\n                    className='img-upload-input'\r\n                  />\r\n                </label>\r\n              </div>\r\n\r\n              <div\r\n                className='img-upload-container'\r\n                style={{ backgroundImage: imgUrls[0] }}\r\n              >\r\n                <label className='img-upload-label'>\r\n                  <p>Upload Image</p>\r\n                  <input\r\n                    type='file'\r\n                    value={imgUrls[2]}\r\n                    onChange={(ev) => {\r\n                      console.log('third img');\r\n\r\n                      const imgArr = [...imgUrls];\r\n                      imgArr[2] = ev.target.files[0];\r\n                      this.setState(\r\n                        {\r\n                          stay: {\r\n                            ...this.state.stay,\r\n                            imgUrls: [...imgArr],\r\n                          },\r\n                        },\r\n                        () => {\r\n                          console.log(this.state.stay);\r\n                        }\r\n                      );\r\n                    }}\r\n                    className='img-upload-input'\r\n                  />\r\n                </label>\r\n              </div>\r\n\r\n              <div\r\n                className='img-upload-container'\r\n                style={{ backgroundImage: imgUrls[0] }}\r\n              >\r\n                <label className='img-upload-label'>\r\n                  <p>Upload Image</p>\r\n                  <input\r\n                    type='file'\r\n                    value={imgUrls[3]}\r\n                    onChange={(ev) => {\r\n                      console.log('fourth img');\r\n\r\n                      const imgArr = [...imgUrls];\r\n                      imgArr[2] = ev.target.files[0];\r\n                      this.setState(\r\n                        {\r\n                          stay: {\r\n                            ...this.state.stay,\r\n                            imgUrls: [...imgArr],\r\n                          },\r\n                        },\r\n                        () => {\r\n                          console.log(this.state.stay);\r\n                        }\r\n                      );\r\n                    }}\r\n                    className='img-upload-input'\r\n                  />\r\n                </label>\r\n              </div>\r\n\r\n              <div\r\n                className='img-upload-container'\r\n                style={{ backgroundImage: imgUrls[0] }}\r\n              >\r\n                <label className='img-upload-label'>\r\n                  <p>Upload Image</p>\r\n                  <input\r\n                    type='file'\r\n                    value={imgUrls[4]}\r\n                    onChange={(ev) => {\r\n                      console.log('fifth img');\r\n                      const imgArr = [...imgUrls];\r\n                      imgArr[2] = ev.target.files[0];\r\n                      this.setState(\r\n                        {\r\n                          stay: {\r\n                            ...this.state.stay,\r\n                            imgUrls: [...imgArr],\r\n                          },\r\n                        },\r\n                        () => {\r\n                          console.log(this.state.stay);\r\n                        }\r\n                      );\r\n                    }}\r\n                    className='img-upload-input'\r\n                  />\r\n                </label>\r\n              </div>\r\n            </section> */}\r\n\r\n            <section className='add-stay-info-container'>\r\n              <div className='add-stay-info-details'>\r\n                <div className='add-stay-info-details-header'>\r\n                  <div>\r\n                    <span>Capacity:</span>{' '}\r\n                    <input\r\n                      type='number'\r\n                      name='capacity'\r\n                      value={capacity}\r\n                      onChange={this.handleChange}\r\n                      required\r\n                    />\r\n                    <span>Stay Type:</span>\r\n                    <select\r\n                      name='stay-type'\r\n                      value={stayType}\r\n                      onChange={this.handleChangeSelect}\r\n                      // value={stayType}\r\n                    >\r\n                      <option value='Entire place'>Entire place</option>\r\n                      <option value='Private room'>Private room</option>\r\n                    </select>\r\n                    <span>Property Type:</span>\r\n                    <select\r\n                      name='property-type'\r\n                      onChange={this.handleChangeSelect}\r\n                      value={type}\r\n                    >\r\n                      <option value='Apartment'>Apartment</option>\r\n                      <option value='Villa'>Villa</option>\r\n                      <option value='Studio'>Studio</option>\r\n                      <option value='Loft'>Loft</option>\r\n                      <option value='Room'>Room</option>\r\n                    </select>\r\n                  </div>\r\n                  {/* <img className='host-img' src={user.imgUrl} /> */}\r\n                </div>\r\n\r\n                <div className='stay-features-container'>\r\n                  <div className='stay-features-details'>\r\n                    <FontAwesomeIcon icon={faHome} />\r\n                    <div>\r\n                      <h3>Entire Place</h3>\r\n                      <h4>You'll have the place to yourself.</h4>\r\n                    </div>\r\n                  </div>\r\n                  <div className='stay-features-details'>\r\n                    <FontAwesomeIcon icon={faBookOpen} />\r\n                    <div>\r\n                      <h3>House Rules</h3>\r\n                      <h4>\r\n                        {' '}\r\n                        This place isn’t suitable for children under 12 and the\r\n                        host doesn’t allow pets.\r\n                      </h4>\r\n                    </div>\r\n                  </div>\r\n                  <div className='stay-features-details'>\r\n                    <FontAwesomeIcon icon={faMedal} />\r\n                    <div>\r\n                      <h3>{user.fullname} is A Superhost</h3>\r\n                      <h4>\r\n                        {' '}\r\n                        Superhosts are experienced, highly rated hosts who are\r\n                        committed to providing great stays for guests.\r\n                      </h4>\r\n                    </div>\r\n                  </div>\r\n                  <div className='stay-features-details'>\r\n                    <FontAwesomeIcon icon={faBookmark} />\r\n                    <div>\r\n                      <h3>Wifi</h3>\r\n                      <h4>Guests often search for this popular amenity</h4>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className='stay-desc-container'>\r\n                  <p>Description</p>\r\n                  <textarea\r\n                    value={desc}\r\n                    name='desc'\r\n                    onChange={this.handleChange}\r\n                    className='desc-textarea'\r\n                  />\r\n                </div>\r\n\r\n                <div className='add-stay-amenities'>\r\n                  <p>Amenities</p>\r\n\r\n                  <div className='add-stay-amenities-item'>\r\n                    <input\r\n                      type='checkbox'\r\n                      name='tv'\r\n                      checked={tv}\r\n                      onChange={this.handleAmenityChange}\r\n                    />\r\n                    <label for='TV'>TV</label>\r\n                  </div>\r\n                  <div className='add-stay-amenities-item'>\r\n                    <input\r\n                      type='checkbox'\r\n                      name='wifi'\r\n                      checked={wifi}\r\n                      onChange={this.handleAmenityChange}\r\n                    />\r\n                    <label for='Wifi'>Wifi</label>\r\n                  </div>\r\n                  <div className='add-stay-amenities-item'>\r\n                    <input\r\n                      type='checkbox'\r\n                      name='kitchen'\r\n                      checked={kitchen}\r\n                      onChange={this.handleAmenityChange}\r\n                    />\r\n                    <label for='Kitchen'>Kitchen</label>\r\n                  </div>\r\n                  <div className='add-stay-amenities-item'>\r\n                    <input\r\n                      type='checkbox'\r\n                      name='smokingAllowed'\r\n                      checked={smokingAllowed}\r\n                      onChange={this.handleAmenityChange}\r\n                    />\r\n                    <label for='Smoking allowed'>Smoking allowed</label>\r\n                  </div>\r\n                  <div className='add-stay-amenities-item'>\r\n                    <input\r\n                      type='checkbox'\r\n                      name='petsAllowed'\r\n                      checked={petsAllowed}\r\n                      onChange={this.handleAmenityChange}\r\n                    />\r\n                    <label for='Pets allowed'>Pet allowed</label>\r\n                  </div>\r\n                  <div className='add-stay-amenities-item'>\r\n                    <input\r\n                      type='checkbox'\r\n                      name='cookingBasics'\r\n                      checked={cookingBasics}\r\n                      onChange={this.handleAmenityChange}\r\n                    />\r\n                    <label for='Cooking basics'>Cooking basics</label>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div className='add-stay-price-container'>\r\n                <span>Price:</span>\r\n                <input\r\n                  type='number'\r\n                  name='price'\r\n                  value={price}\r\n                  onChange={this.handleChange}\r\n                  required\r\n                />\r\n                <span>/ night</span>\r\n              </div>\r\n            </section>\r\n\r\n            <button className='add-stay-save-btn' type='submit'>\r\n              Enter!\r\n            </button>\r\n            {/* <button type='submit'>Save!</button> */}\r\n          </form>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    stays: state.stayModule.stays,\r\n  };\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n  onAddStay,\r\n  onUpdateStay,\r\n  // onRemovehost,\r\n  // loadhostsFromUser,\r\n};\r\n\r\nexport const AddStay = connect(mapStateToProps, mapDispatchToProps)(_AddStay);\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { StayList } from '../cmps/StayList.jsx';\r\nimport { AddStay } from '../cmps/AddStay.jsx';\r\nimport {\r\n  loadStays,\r\n  onAddStay,\r\n  onRemoveStay,\r\n  onUpdateStay,\r\n} from '../store/stay.actions.js';\r\nimport { changePage } from '../store/page.actions.js';\r\nimport { Loader } from '../cmps/Loader.jsx';\r\nimport { Link, NavLink } from 'react-router-dom';\r\n\r\nclass _HomePage extends React.Component {\r\n  state = {\r\n    locSearch: '',\r\n  };\r\n\r\n  componentDidMount() {\r\n    window.scrollTo(0, 0);\r\n    this.props.changePage('home');\r\n  }\r\n\r\n  onRemoveStay = (stayId) => {\r\n    this.props.onRemoveStay(stayId);\r\n  };\r\n\r\n  onAddStay = (stay) => {\r\n    this.props.onAddStay(stay);\r\n  };\r\n\r\n  render() {\r\n    const { stays } = this.props;\r\n    return !stays ? (\r\n      <p>loading...</p>\r\n    ) : (\r\n      <section className='home-page main-container'>\r\n        <div className='hero main-container full top-fold'>\r\n          <h2>Not sure where to go? Perfect.</h2>\r\n\r\n          <Link to='/explore' className='nav-link'>\r\n            <button>\r\n              {' '}\r\n              <a className='im-flexible-btn'> I'm flexible </a>\r\n            </button>\r\n          </Link>\r\n        </div>\r\n        <div className='bottom-fold'>\r\n          <div className='nearby'>\r\n            <h3>Explore nearby</h3>\r\n            <div className='gallery'>\r\n              <div>\r\n                <Link to={`/explore?city=${'Tel Aviv-Yafo'}`}>\r\n                  <img\r\n                    src='https://a0.muscache.com/im/pictures/be4d3ba5-08d7-4afe-95a7-f2da6453886a.jpg?im_q=medq&im_w=240'\r\n                    alt=''\r\n                  />\r\n                </Link>\r\n                <div className='city'>\r\n                  <h6>Tel Aviv-Yafo</h6>\r\n                  <p>Israel</p>\r\n                </div>\r\n              </div>\r\n              <div>\r\n                <Link to={`/explore?city=${'Jerusalem'}`}>\r\n                  <img\r\n                    src='https://a0.muscache.com/im/pictures/7253e011-7c22-48fd-b75d-d0da35372397.jpg?im_q=medq&im_w=240'\r\n                    alt=''\r\n                  />\r\n                </Link>\r\n                <div className='city'>\r\n                  <h6>Jerusalem</h6>\r\n                  <p>Israel</p>\r\n                </div>\r\n              </div>\r\n              <div>\r\n                <Link to={`/explore?city=${'London'}`}>\r\n                  <img\r\n                    src='https://a0.muscache.com/im/pictures/52e8083e-2de2-446d-a860-534eab250541.jpg?im_q=medq&im_w=240'\r\n                    alt=''\r\n                  />\r\n                </Link>\r\n                <div className='city'>\r\n                  <h6>London</h6>\r\n                  <p>England</p>\r\n                </div>\r\n              </div>\r\n              <div>\r\n                <Link to={`/explore?city=${'New York'}`}>\r\n                  <img\r\n                    src='https://a0.muscache.com/im/pictures/20e74de0-0eb8-4fca-afb8-b111875acdf5.jpg?im_q=medq&im_w=240'\r\n                    alt=''\r\n                  />\r\n                </Link>\r\n                <div className='city'>\r\n                  <h6>New-York</h6>\r\n                  <p>United States</p>\r\n                </div>\r\n              </div>\r\n              <div>\r\n                <Link to={`/explore?city=${'Barcelona'}`}>\r\n                  <img\r\n                    src='https://a0.muscache.com/im/pictures/e639b7ab-aee3-48ee-9743-216684a51319.jpg?im_q=medq&im_w=240'\r\n                    alt=''\r\n                  />\r\n                </Link>\r\n                <div className='city'>\r\n                  <h6>Barcelona</h6>\r\n                  <p>Spain</p>\r\n                </div>\r\n              </div>\r\n              <div>\r\n                <Link to={`/explore?city=${'Los Angeles'}`}>\r\n                  <img\r\n                    src='https://a0.muscache.com/im/pictures/ca3737ef-0faf-46ba-b055-b4a2d99e2cea.jpg?im_q=medq&im_w=240'\r\n                    alt=''\r\n                  />\r\n                </Link>\r\n                <div className='city'>\r\n                  <h6>Los Angeles</h6>\r\n                  <p>United States</p>\r\n                </div>\r\n              </div>\r\n              <div>\r\n                <Link to={`/explore?city=${'Paris'}`}>\r\n                  <img\r\n                    src='https://a0.muscache.com/im/pictures/585d1e53-e2e1-4baf-a34e-36301dd1e2da.jpg?im_q=medq&im_w=240'\r\n                    alt=''\r\n                  />\r\n                </Link>\r\n                <div className='city'>\r\n                  <h6>Paris</h6>\r\n                  <p>France</p>\r\n                </div>\r\n              </div>\r\n              <div>\r\n                <Link to={`/explore?city=${'Amsterdam'}`}>\r\n                  <img\r\n                    src='https://a0.muscache.com/im/pictures/7c309a70-bc93-4603-8d3b-9d4cd9bf75b2.jpg?im_q=medq&im_w=240'\r\n                    alt=''\r\n                  />\r\n                </Link>\r\n                <div className='city'>\r\n                  <h6>Amsterdam</h6>\r\n                  <p>Netherlands</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div>\r\n          <h3>Live anywhere</h3>\r\n          <div className='anywhere'>\r\n            <div>\r\n              <Link to='/explore'>\r\n                {' '}\r\n                <img\r\n                  src='https://a0.muscache.com/im/pictures/2f13349d-879d-43c6-83e3-8e5679291d53.jpg?im_w=320'\r\n                  alt=''\r\n                />\r\n                <h4>Outdoor getaways</h4>\r\n              </Link>\r\n            </div>\r\n            <div>\r\n              <Link to='/explore'>\r\n                <img\r\n                  src='https://a0.muscache.com/im/pictures/36f53e61-db8d-403c-9122-5b761c0e4264.jpg?im_w=320'\r\n                  alt=''\r\n                />\r\n                <h4>Unique stays</h4>\r\n              </Link>\r\n            </div>\r\n            <div>\r\n              <Link to='/explore'>\r\n                <img\r\n                  src='https://a0.muscache.com/im/pictures/7d82ca14-56e5-4465-8218-dcfa7d69b6ac.jpg?im_w=320'\r\n                  alt=''\r\n                />\r\n                <h4>Entire homes</h4>\r\n              </Link>\r\n            </div>\r\n            <div>\r\n              <Link to='/explore'>\r\n                <img\r\n                  src='https://a0.muscache.com/im/pictures/10a638e1-6aff-4313-8033-1275cec83987.jpg?im_w=320'\r\n                  alt=''\r\n                />\r\n                <h4>Pets allowed</h4>\r\n              </Link>\r\n            </div>\r\n          </div>\r\n          <div className='Outdoor-getaways'>\r\n            <h4></h4>\r\n          </div>\r\n          <div className='want-to-be-host'>\r\n            <img\r\n              src='https://res.cloudinary.com/dohqnraie/image/upload/v1633442777/5b4dc94a-0b4c-4c27-b50f-9c5a5b93c775_eq7kar.webp'\r\n              alt=''\r\n            />\r\n            <div className='text-on-img'>\r\n              <h1>Try hosting</h1>\r\n              <p>Try hosting Earn extra income and unlock new</p>\r\n              <p>opportunities by sharing your space.</p>\r\n              <button>Learn more</button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </section>\r\n    );\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    stays: state.stayModule.stays,\r\n  };\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n  loadStays,\r\n  onAddStay,\r\n  onRemoveStay,\r\n  onUpdateStay,\r\n  changePage,\r\n};\r\n\r\nexport const HomePage = connect(mapStateToProps, mapDispatchToProps)(_HomePage);\r\n","import React from 'react';\r\n\r\nexport function OrderPreview({ order, onRemoveOrder }) {\r\n \r\n  const formattedDates = (chosenDate) => {\r\n    var options = { weekday: 'short', year: 'numeric', month: 'short', day: 'numeric' };\r\n    if (!chosenDate) return 'Add dates';\r\n    const date = new Date(chosenDate);\r\n    // return date.toLocaleDateString('en-GB');\r\n    return date.toLocaleDateString('en-US', options);\r\n    // return date.toISOString();\r\n  };\r\n\r\n  if (!order) return;\r\n  return (\r\n    <div className='order-preview'>\r\n      <section className='order-gallery'>\r\n        <img src={order.stay.imgUrls[0]} className='order-img' />\r\n        <img src={order.stay.imgUrls[1]} className='order-img' />\r\n        <img src={order.stay.imgUrls[2]} className='order-img' />\r\n      </section>\r\n      <div className=\"order-prev-text\">\r\n        <h6 className=\"order-prev-title\">{order.stay.title}\r\n          {/* <p className=\"order-prev-dates\">\r\n      <span>{formattedDates(order.checkIn)}</span>\r\n      <span>{formattedDates(order.checkOut)}</span>\r\n      </p> */}\r\n        </h6>\r\n        <p>${order.stay.totalPrice}</p>\r\n        <p>{order.status}</p>\r\n        <p className='non-refundable'>Non-refundable</p> \r\n        \r\n       \r\n        <p className=\"order-prev-dates check-in\">{formattedDates(order.checkIn)}</p>\r\n        <p className=\"order-prev-dates check-out\"> {formattedDates(order.checkOut)}</p>\r\n        \r\n       {order.checkIn >Date.now() && <button onClick={(ev) => {  onRemoveOrder(order._id, ev);}}>\r\n          Cancel order\r\n        </button>}\r\n\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport { OrderPreview } from '../cmps/OrderPreview.jsx';\r\nexport function OrderList({ orders, onRemoveOrder }) {\r\n  console.log('orders in orderList', orders);\r\n  return (\r\n    <div className='order-list'>\r\n      {orders.map((order) => (\r\n        \r\n        <Link\r\n        key={order._id}\r\n          to={{ pathname: `/stay/${order.stay._id}`, orderId: order._id }}\r\n        >\r\n          {' '}\r\n          <OrderPreview\r\n            key={order._id}\r\n            order={order}\r\n            onRemoveOrder={onRemoveOrder}\r\n          />\r\n        </Link>\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n","import { orderService } from '../services/order.service.js';\r\nimport { userService } from '../services/user.service.js';\r\nimport { socketService } from '../services/socket.service';\r\n\r\nimport {\r\n  showSuccessMsg,\r\n  showErrorMsg,\r\n  showUserMsg,\r\n} from '../services/event-bus.service.js';\r\n\r\nexport function loadOrders(filter = null, isHost = false) {\r\n  return async (dispatch) => {\r\n    const orders = await orderService.query(filter, isHost);\r\n    try {\r\n      dispatch({\r\n        type: 'SET_ORDER',\r\n        orders,\r\n      });\r\n    } catch (err) {\r\n      showErrorMsg('Cannot load orders');\r\n      console.log('Cannot load orders', err);\r\n    }\r\n  };\r\n}\r\n\r\nexport function newOrder(order) {\r\n  return async (dispatch) => {\r\n    try {\r\n      const newOrder = await orderService.newOrder(order);\r\n\r\n      return dispatch({\r\n        type: 'NEW_ORDER',\r\n        newOrder,\r\n      });\r\n    } catch (err) {\r\n      console.log('Cannot remove order', err);\r\n    }\r\n  };\r\n}\r\n\r\nexport function onRemoveOrder(orderId) {\r\n  return async (dispatch) => {\r\n    try {\r\n      await orderService.remove(orderId);\r\n      showSuccessMsg('Order removed');\r\n      return dispatch({\r\n        type: 'REMOVE_ORDER',\r\n        orderId,\r\n      });\r\n    } catch (err) {\r\n      showErrorMsg('Cannot remove order');\r\n      console.log('Cannot remove order', err);\r\n    }\r\n  };\r\n}\r\n\r\nexport function onAddOrder(order) {\r\n  return async (dispatch) => {\r\n    const addedOrder = await orderService.add(order);\r\n    try {\r\n      dispatch({\r\n        type: 'ADD_ORDER',\r\n        order: addedOrder,\r\n      });\r\n      socketService.emit(\r\n        'sendMsg',\r\n        `You recieved a new order : ${order.stay.title}`\r\n      );\r\n      showSuccessMsg('✓  Your order has been recieved  ');\r\n      return addedOrder;\r\n    } catch (err) {\r\n      showErrorMsg('✗  Your Order not received,please try again ');\r\n      console.log('Cannot add order', err);\r\n    }\r\n  };\r\n}\r\n\r\nexport function setGuests(order) {\r\n  return async (dispatch) => {\r\n    try {\r\n      return dispatch({\r\n        type: 'SET_GUESTS',\r\n        order,\r\n      });\r\n    } catch (err) {\r\n      console.log('Cannot set guests in order', err);\r\n    }\r\n  };\r\n}\r\n\r\nexport function onEditOrder(orderToSave) {\r\n  return async (dispatch) => {\r\n    try {\r\n      const savedOrder = orderService.updateOrder(orderToSave);\r\n\r\n      dispatch({\r\n        type: 'UPDATE_ORDER',\r\n        order: savedOrder,\r\n      });\r\n      showSuccessMsg('Order updated');\r\n    } catch (err) {\r\n      showErrorMsg('Cannot update order');\r\n      console.log('Cannot save order', err);\r\n    }\r\n  };\r\n}\r\n\r\nexport function onUpdateOrder(order, newStatus) {\r\n  return async (dispatch) => {\r\n    try {\r\n      order.status = newStatus;\r\n      await orderService.updateOrder(order);\r\n      dispatch({\r\n        type: 'UPDATE_ORDER_STATUS',\r\n        order: order,\r\n      });\r\n      showSuccessMsg('Order updated');\r\n    } catch (err) {\r\n      showErrorMsg('Cannot update order');\r\n      console.log('Cannot save order', err);\r\n    }\r\n  };\r\n}\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { OrderList } from '../cmps/OrderList.jsx';\r\nimport { userService } from '../services/user.service.js';\r\nimport { loadOrders, onRemoveOrder } from '../store/order.actions.js';\r\nimport {\r\n  loadOrdersFromUser,\r\n  onRemoveOrderFromUser,\r\n} from '../store/user.actions';\r\nimport { changePage } from '../store/page.actions.js';\r\nimport { Loader } from '../cmps/Loader.jsx';\r\n// import order from '../data/order.js';\r\nclass _OrderPage extends React.Component {\r\n  state = {\r\n    orders: [],\r\n    sortBy: '',\r\n    isUpcomingShown: true\r\n\r\n  }\r\n\r\n\r\n\r\n  async componentDidMount() {\r\n    const { orders } = this.props;\r\n    console.log('componentDidMount in orderPage');\r\n    window.scrollTo(0, 0);\r\n    this.props.changePage('order');\r\n    const user = await userService.getLoggedinUser();\r\n    if (!user) {\r\n      this.props.history.push('/');\r\n      return;\r\n    }\r\n    await this.props.loadOrders(user._id, false);\r\n\r\n    this.setState({ orders })\r\n    this.onSetFilterOrders('upcoming');\r\n  }\r\n\r\n  onRemoveOrder = async (orderId, ev) => {\r\n    ev.preventDefault();\r\n    const user = await userService.getLoggedinUser();\r\n\r\n    // await this.props.onRemoveOrderFromUser(orderId);\r\n    await this.props.onRemoveOrder(orderId);\r\n    // let {orders} = this.state;\r\n    await this.props.loadOrders(user._id, false);\r\n    const {orders} = this.props;\r\n    // console.log('this is orders after remove',orders);\r\n    // orders = orders.filter(order => orderId !== order._id);\r\n    this.setState({ orders })\r\n    this.onSetFilterOrders('upcoming');\r\n\r\n\r\n  };\r\n  onSetSortOrders = (sort) => {\r\n    const { sortBy, orders } = this.state;\r\n    console.log('onSetFrontSort sort', sort);\r\n    let ordersToDisplay = [];\r\n    if (sort === 'title') {\r\n      console.log('sort by title');\r\n      ordersToDisplay = orders.sort((order1, order2) => {\r\n        return this.sortByTxt(order1.stay.title, order2.stay.title)\r\n      })\r\n\r\n    }\r\n    if (sort === 'status') {\r\n      console.log('sort by status');\r\n      ordersToDisplay = orders.sort((order1, order2) => {\r\n        return this.sortByTxt(order1.status, order2.status)\r\n      })\r\n\r\n    }\r\n    if (sort === 'checkIn') {\r\n      console.log('sort by checkIn');\r\n      ordersToDisplay = orders.sort((order1, order2) => {\r\n        return this.sortByTxt(order1.checkIn, order2.checkIn)\r\n      })\r\n\r\n    }\r\n    if (sort === 'checkOut') {\r\n      console.log('sort by checkIn');\r\n      ordersToDisplay = orders.sort((order1, order2) => {\r\n        return this.sortByTxt(order1.checkIn, order2.checkIn)\r\n      })\r\n\r\n    }\r\n    if (sort === 'price') {\r\n      console.log('sort by price');//ITS A STRING\r\n      ordersToDisplay = orders.sort((order1, order2) => {\r\n        return order1.stay.totalPrice - order2.stay.totalPrice\r\n      })\r\n    }\r\n\r\n    console.log('ordersToDisplay', ordersToDisplay);\r\n    this.setState({ ...this.state, orders: ordersToDisplay }, () => {\r\n      console.log('this.state.orders SORTED', this.state.orders);\r\n    })\r\n\r\n  }\r\n  sortByTxt = (txt1, txt2) => {\r\n\r\n    if (txt1 > txt2) {\r\n      return 1;\r\n    } if (txt2 > txt1) {\r\n      return -1;\r\n    } else {\r\n      return 0;\r\n    }\r\n\r\n\r\n  }\r\n\r\n  onSetFilterOrders = (filterBy) => {\r\n    const { orders } = this.props;\r\n    // this.setState({ ...this.state, orders: this.props.orders })\r\n    // this.setState({ orders }, ()=>{\r\n    //   console.log('this.state.orders before FILTER****', this.state.orders);\r\n    // })----\r\n    console.log('onSetFilterOrders: ', filterBy);\r\n    // this.setState({ orders })\r\n    let currDate = Date.now();\r\n    console.log('currDate', currDate);\r\n    let ordersToDisplay = this.props.orders;\r\n    console.log('ordersToDisplay', ordersToDisplay);\r\n\r\n    if (filterBy === 'upcoming') {\r\n      ordersToDisplay = ordersToDisplay.filter((order) => {\r\n        return order.checkIn > currDate\r\n      })\r\n\r\n    }\r\n    if (filterBy === 'past') {\r\n     \r\n      console.log('filterby past');\r\n      console.log('ordersToDisplay in filterby past1***', ordersToDisplay);\r\n      ordersToDisplay = ordersToDisplay.filter((order) => {\r\n        return order.checkIn < currDate\r\n      })\r\n      console.log('ordersToDisplay in filterby past2', ordersToDisplay);\r\n  \r\n  \r\n  }\r\n\r\n  console.log('ordersToDisplay in onSetFilterOrders', ordersToDisplay);\r\n  this.setState({ ...this.state, orders: ordersToDisplay }, () => {\r\n    console.log('this.state.orders FILTERED', this.state.orders);\r\n    // ordersToDisplay=this.props.orders\r\n  })\r\n\r\n  \r\n}\r\n\r\n\r\nrender() {\r\n  // const { orders } = this.props;\r\n  const { orders, isUpcomingShown } = this.state;\r\n  // console.log('orders:', orders);\r\n  return !orders || !orders.length ? (\r\n    <Loader />\r\n  ) : (\r\n    <section className='order-page main-container'>\r\n      <h1>Trips</h1>\r\n      <div className='trips-page-header'>\r\n        <div className='left-btns'>\r\n          <button className={isUpcomingShown ? 'order-active' : ''} onClick={() => {\r\n            this.setState({\r\n              isUpcomingShown: true,\r\n            }, ()=>{ this.onSetFilterOrders('upcoming')});\r\n           \r\n          }}>Upcoming</button>\r\n          <button className={!isUpcomingShown ? 'order-active' : ''} onClick={() => {\r\n            this.setState({\r\n              isUpcomingShown: false,\r\n            }, ()=>{this.onSetFilterOrders('past')});\r\n            \r\n          }}>Past</button>\r\n        </div>\r\n        <div className='right-btns'>\r\n          <button onClick={() => { this.onSetSortOrders('title') }}>Stay name</button>\r\n          <button onClick={() => { this.onSetSortOrders('checkIn') }}>Check in</button>\r\n          <button onClick={() => { this.onSetSortOrders('checkOut') }}>Check out</button>\r\n          <button onClick={() => { this.onSetSortOrders('price') }}>Price</button>\r\n          <button onClick={() => { this.onSetSortOrders('status') }}>Status</button>\r\n        </div>\r\n      </div>\r\n      <OrderList orders={orders} onRemoveOrder={this.onRemoveOrder} />\r\n    </section>\r\n  );\r\n}\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    orders: state.orderModule.orders,\r\n  };\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n  loadOrders,\r\n  onRemoveOrder,\r\n  loadOrdersFromUser,\r\n  changePage,\r\n  onRemoveOrderFromUser,\r\n};\r\n\r\nexport const OrderPage = connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(_OrderPage);\r\n","import React from 'react';\r\nimport ReactStars from 'react-rating-stars-component';\r\nimport { Loader } from './Loader';\r\n\r\nexport class RatingStar extends React.Component {\r\n  state = {\r\n    ratings: {\r\n      avg: 0,\r\n      cleanliness: 0,\r\n      communication: 0,\r\n      checkIn: 0,\r\n      accuracy: 0,\r\n      location: 0,\r\n      value: 0,\r\n    },\r\n    isLoading: true,\r\n  };\r\n\r\n  getAverage = (reviews, field) => {\r\n    return (\r\n      reviews.reduce(function (sum, value) {\r\n        console.log(field, value.ratings[field]);\r\n        return sum + value.ratings[field];\r\n      }, 0) / reviews.length\r\n    );\r\n  };\r\n\r\n  componentDidMount() {\r\n    const { reviews } = this.props;\r\n    if (reviews) {\r\n      this.setState((prevState) => ({\r\n        ...prevState,\r\n        ratings: {\r\n          cleanliness: this.getAverage(reviews, 'cleanliness'),\r\n          communication: this.getAverage(reviews, 'communication'),\r\n          checkIn: this.getAverage(reviews, 'checkIn'),\r\n          accuracy: this.getAverage(reviews, 'accuracy'),\r\n          location: this.getAverage(reviews, 'location'),\r\n          value: this.getAverage(reviews, 'value'),\r\n        },\r\n      }));\r\n    }\r\n    this.setState({ isLoading: false });\r\n  }\r\n\r\n  render() {\r\n    const { isEdit, ratingChanged, values } = this.props;\r\n    const { cleanliness, communication, accuracy, location, value, checkIn } =\r\n      this.state.ratings;\r\n    const { isLoading } = this.state;\r\n    if (isLoading) return <Loader />;\r\n    return (\r\n      <div className='review-rating-container'>\r\n        <div className='review-rating-item'>\r\n          <div>\r\n            <h3>Location</h3>\r\n          </div>\r\n\r\n          <ReactStars\r\n            name='location'\r\n            count={5}\r\n            onChange={(value) => ratingChanged(value, 'location')}\r\n            size={24}\r\n            activeColor='#FF385C'\r\n            edit={isEdit}\r\n            value={location}\r\n          />\r\n        </div>\r\n\r\n        <div className='review-rating-item'>\r\n          <h3>Accessibility</h3>\r\n          <ReactStars\r\n            name='value'\r\n            count={5}\r\n            onChange={(value) => ratingChanged(value, 'value')}\r\n            size={24}\r\n            activeColor='#FF385C'\r\n            edit={isEdit}\r\n            value={value}\r\n          />\r\n        </div>\r\n\r\n        <div className='review-rating-item'>\r\n          <h3>Accuracy</h3>\r\n          <ReactStars\r\n            name='accuracy'\r\n            count={5}\r\n            onChange={(ev) => ratingChanged(ev, 'accuracy')}\r\n            size={24}\r\n            activeColor='#FF385C'\r\n            edit={isEdit}\r\n            value={accuracy}\r\n          />\r\n        </div>\r\n\r\n        <div className='review-rating-item'>\r\n          <h3>Check-in</h3>\r\n          <ReactStars\r\n            name='checkIn'\r\n            count={5}\r\n            onChange={(value) => ratingChanged(value, 'checkIn')}\r\n            size={24}\r\n            activeColor='#FF385C'\r\n            edit={isEdit}\r\n            value={checkIn}\r\n          />\r\n        </div>\r\n\r\n        <div className='review-rating-item'>\r\n          <h3>Communication</h3>\r\n          <ReactStars\r\n            name='communication'\r\n            count={5}\r\n            onChange={(value) => ratingChanged(value, 'communication')}\r\n            size={24}\r\n            activeColor='#FF385C'\r\n            edit={isEdit}\r\n            value={communication}\r\n          />\r\n        </div>\r\n        <div className='review-rating-item'>\r\n          <h3>Cleanliness-in</h3>\r\n          <ReactStars\r\n            name='cleanliness'\r\n            count={5}\r\n            onChange={(value) => ratingChanged(value, 'cleanliness')}\r\n            size={24}\r\n            activeColor='#FF385C'\r\n            edit={isEdit}\r\n            value={cleanliness}\r\n          />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React from 'react';\r\n\r\nimport { eventBusService } from '../services/event-bus.service.js';\r\n\r\nexport class UserMsg extends React.Component {\r\n  state = {\r\n    msg: null,\r\n  };\r\n\r\n  componentDidMount() {\r\n    // Here we listen to the event that we emited, its important to remove the listener\r\n    this.removeEvent = eventBusService.on('show-user-msg', (msg) => {\r\n      this.setState({ msg });\r\n      \r\n      setTimeout(() => {\r\n        this.setState({ msg: null });\r\n      }, 2500);\r\n    });\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.removeEvent();\r\n  }\r\n\r\n  render() {\r\n    if (!this.state.msg) return <span></span>;\r\n    const msgClass = this.state.msg.type || '';\r\n    return (\r\n      <section className={'user-msg ' + msgClass}>\r\n        {/* <button\r\n          onClick={() => {\r\n            this.setState({ msg: null });\r\n          }}\r\n        >\r\n          x\r\n        </button> */}\r\n        {this.state.msg.txt}\r\n      </section>\r\n    );\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactStars from 'react-rating-stars-component';\r\nimport { userService } from '../services/user.service';\r\nimport { RatingStar } from './RatingStars';\r\nimport { showSuccessMsg } from '../services/event-bus.service.js';\r\nimport { UserMsg } from './UserMsg';\r\nimport { Loader } from './Loader';\r\n\r\nexport class AddReview extends React.Component {\r\n  state = {\r\n    review: {\r\n      txt: '',\r\n      ratings: {\r\n        avg: 0,\r\n        cleanliness: 0,\r\n        communication: 0,\r\n        checkIn: 0,\r\n        accuracy: 0,\r\n        location: 0,\r\n        value: 0,\r\n      },\r\n      date: null,\r\n      by: null,\r\n    },\r\n\r\n    isUserMsgShown: false,\r\n  };\r\n\r\n  async componentDidMount() {\r\n    const user = await userService.getLoggedinUser();\r\n    if (user) {\r\n      this.setState((prevState) => ({\r\n        ...prevState,\r\n        review: {\r\n          by: {\r\n            _id: user._id,\r\n            fullname: user.fullname,\r\n            imgUrl: user.imgUrl,\r\n          },\r\n        },\r\n      }));\r\n    }\r\n  }\r\n\r\n  ratingChanged = (value, field) => {\r\n    this.setState((prevState) => ({\r\n      ...prevState,\r\n      review: {\r\n        ...prevState.review,\r\n        ratings: { ...prevState.review.ratings, [field]: value },\r\n      },\r\n    }));\r\n  };\r\n\r\n  onHandleChange = (ev) => {\r\n    const field = ev.target.name;\r\n    const value = ev.target.value;\r\n    this.setState({ review: { ...this.state.review, [field]: value } });\r\n  };\r\n\r\n  clearState = async () => {\r\n    const user = await userService.getLoggedinUser();\r\n    this.setState((prevState) => ({\r\n      review: {\r\n        txt: '',\r\n        ratings: {\r\n          avg: 0,\r\n          cleanliness: 0,\r\n          communication: 0,\r\n          checkIn: 0,\r\n          accuracy: 0,\r\n          location: 0,\r\n          value: 0,\r\n        },\r\n        date: null,\r\n        by: {\r\n          ...prevState.by,\r\n          _id: user._id,\r\n          fullname: user.fullname,\r\n          imgUrl: user.imgUrl,\r\n        },\r\n      },\r\n      isUserMsgShown: false,\r\n    }));\r\n  };\r\n  toggleMessage = () => {\r\n    this.setState({ showUserMsg: true });\r\n  };\r\n\r\n  render() {\r\n    const { txt } = this.state.review;\r\n    const { isUserMsgShown } = this.state;\r\n    const { by } = this.state.review;\r\n    if (!by) return <h4>You need to log in to write a review</h4>;\r\n    return (\r\n      <div className='add-review'>\r\n        <h1>Add Review</h1>\r\n        <div className='add-review-header'>\r\n          {!by && (\r\n            <img\r\n              src={\r\n                'https://home-and-go.herokuapp.com/static/media/avatar.e582e4ba.png'\r\n              }\r\n            />\r\n          )}\r\n          {by && <img src={by.imgUrl} />}\r\n          <div>\r\n            {!by ? <h3>Guest</h3> : <h3>{by.fullname}</h3>}\r\n            <h4>{new Date(Date.now()).toLocaleDateString('en-GB')}</h4>\r\n          </div>\r\n        </div>\r\n\r\n        <RatingStar isEdit={true} ratingChanged={this.ratingChanged} />\r\n\r\n        <form\r\n          className='add-review-input'\r\n          onSubmit={(ev) => {\r\n            ev.preventDefault();\r\n            this.setState(\r\n              {\r\n                review: {\r\n                  ...this.state.review,\r\n                  txt: this.state.review.txt,\r\n                  ratings: this.state.review.ratings,\r\n                  date: Date.now(),\r\n                },\r\n              },\r\n              async () => {\r\n                const user = await userService.getLoggedinUser();\r\n                if (!user) {\r\n                  console.log('LOGIN');\r\n                  showSuccessMsg('Please Login');\r\n                  return;\r\n                }\r\n\r\n                await this.props.onAddReview(this.state.review);\r\n                this.clearState();\r\n              }\r\n            );\r\n          }}\r\n        >\r\n          <textarea\r\n            className='add-review-txtarea'\r\n            name='txt'\r\n            type='text'\r\n            placeholder='Write your opinion about this stay...'\r\n            value={txt}\r\n            onChange={this.onHandleChange}\r\n            required\r\n          />\r\n          <button>Send</button>\r\n        </form>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faAirbnb } from '@fortawesome/free-brands-svg-icons';\r\nimport { faSnowflake } from '@fortawesome/free-regular-svg-icons';\r\nimport {\r\n  faBlender,\r\n  faPaw,\r\n  faTv,\r\n  faWifi,\r\n} from '@fortawesome/free-solid-svg-icons';\r\n\r\nexport function Amenities({ amenities }) {\r\n  const getIcon = (icon) => {\r\n    switch (icon) {\r\n      case 'TV':\r\n        return <FontAwesomeIcon className='amenity-icon' icon={faTv} />;\r\n      case 'Wifi':\r\n        return <FontAwesomeIcon className='amenity-icon' icon={faWifi} />;\r\n      case 'Kitchen':\r\n        return <FontAwesomeIcon className='amenity-icon' icon={faAirbnb} />;\r\n      case 'Pets allowed':\r\n        return <FontAwesomeIcon className='amenity-icon' icon={faPaw} />;\r\n      case 'Cooking basics':\r\n        return <FontAwesomeIcon className='amenity-icon' icon={faBlender} />;\r\n      case 'Smoking allowed':\r\n        return <FontAwesomeIcon className='amenity-icon' icon={faSnowflake} />;\r\n      default:\r\n        break;\r\n    }\r\n  };\r\n\r\n  const allAmenities = [\r\n    'TV',\r\n    'Wifi',\r\n    'Kitchen',\r\n    'Pets allowed',\r\n    'Cooking basics',\r\n    'Smoking allowed',\r\n  ];\r\n\r\n  const isAmenityExists = (amenity) => {\r\n    if (amenities.includes(amenity)) {\r\n      return '';\r\n    }\r\n    return 'cross-amenity';\r\n  };\r\n\r\n  const isSideCross = (amenity) => {\r\n    if (amenities.includes(amenity)) {\r\n      return '';\r\n    }\r\n    return 'strikethrough';\r\n  };\r\n\r\n  return (\r\n    <div className='amenities'>\r\n      <ul>\r\n        {allAmenities.map((amenity, idx) => (\r\n          <li key={idx} className={isAmenityExists(amenity)}>\r\n            <span className={isSideCross(amenity)}> {getIcon(amenity)} </span>\r\n            {amenity}\r\n          </li>\r\n        ))}\r\n      </ul>\r\n    </div>\r\n  );\r\n}\r\n","export function GuestsModal({ guests, updateNumOfGuests }) {\r\n  return (\r\n    <div className='guests-modal'>\r\n      <div className='modal-row'>\r\n        <div className='modal-text-container'>\r\n          <p>Adults</p>\r\n          <p>Ages 13 or above</p>\r\n        </div>\r\n        <div className='modal-btns-container'>\r\n          <button\r\n            className='modal-btn'\r\n            onClick={(ev) => updateNumOfGuests(-1, 'adults', ev)}\r\n          >\r\n            -\r\n          </button>\r\n          <span>{guests.adults}</span>\r\n          <button\r\n            className='modal-btn'\r\n            onClick={(ev) => updateNumOfGuests(1, 'adults', ev)}\r\n          >\r\n            +\r\n          </button>\r\n        </div>\r\n      </div>\r\n      <div className='modal-row'>\r\n        <div className='modal-text-container'>\r\n          <p>Kids</p>\r\n          <p>Ages 2-12</p>\r\n        </div>\r\n        <div className='modal-btns-container'>\r\n          <button\r\n            className='modal-btn'\r\n            onClick={(ev) => updateNumOfGuests(-1, 'kids', ev)}\r\n          >\r\n            -\r\n          </button>\r\n          <span>{guests.kids}</span>\r\n          <button\r\n            className='modal-btn'\r\n            onClick={(ev) => updateNumOfGuests(1, 'kids', ev)}\r\n          >\r\n            +\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport { DateRangePicker } from 'react-date-range';\r\nimport 'react-date-range/dist/styles.css';\r\nimport 'react-date-range/dist/theme/default.css';\r\nimport { connect } from 'react-redux';\r\n\r\nexport class _DateRange extends React.Component {\r\n  state = {\r\n    startDate: Date.now(),\r\n    endDate: Date.now(),\r\n  };\r\n  handleSelect = (ranges) => {\r\n    const { startDate, endDate } = ranges.selection;\r\n\r\n    this.setState({ startDate, endDate }, () => {\r\n      this.props.setDates(startDate, endDate);\r\n    });\r\n  };\r\n  render() {\r\n    const { startDate, endDate } = this.state;\r\n    const selectionRange = {\r\n      startDate: startDate,\r\n      endDate: endDate,\r\n      key: 'selection',\r\n    };\r\n    const { left, top } = this.props.relativePos;\r\n\r\n    return (\r\n      <div className='date-range-container' style={{ left, top }}>\r\n        <DateRangePicker\r\n          className='date-range'\r\n          ranges={[selectionRange]}\r\n          onChange={this.handleSelect}\r\n          months={1}\r\n          direction='horizontal'\r\n          showSelectionPreview={true}\r\n          moveRangeOnFirstSelection={false}\r\n        />\r\n        <button\r\n          className='date-range-close-btn'\r\n          type='button'\r\n          onClick={this.props.toggleDateCmp}\r\n        >\r\n          Close\r\n        </button>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    relativePos: state.pageModule.relativePos,\r\n  };\r\n}\r\nconst mapDispatchToProps = {};\r\n\r\nexport const DateRange = connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(_DateRange);\r\n","import React from 'react';\r\nimport { onLogin } from '../store/user.actions';\r\nimport { connect } from 'react-redux';\r\nimport { Link } from 'react-router-dom';\r\n\r\nexport class _LoginModal extends React.Component {\r\n  handleLoginToDemo = () => {\r\n    const demoUser = {\r\n      username: 'u101',\r\n      password: 'secret',\r\n    };\r\n    this.props.onLogin(demoUser);\r\n  };\r\n  render() {\r\n    const { isLoginModal } = this.props;\r\n    return (\r\n      <div className={isLoginModal ? 'login-modal shown' : 'login-modal'}>\r\n        <h1>Please login first</h1>\r\n        <div className='login-modal-actions'>\r\n          <button\r\n            className='login-modal-demo-btn'\r\n            onClick={this.handleLoginToDemo}\r\n          >\r\n            Login to demo user\r\n          </button>\r\n          <Link to={'/login'} className='login-modal-login-btn'>\r\n            Login page\r\n          </Link>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    user: state.userModule.user,\r\n  };\r\n}\r\nconst mapDispatchToProps = {\r\n  onLogin,\r\n};\r\n\r\nexport const LoginModal = connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(_LoginModal);\r\n","import React from 'react';\r\nimport { stayReducer } from '../store/stay.reducer';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faFlag } from '@fortawesome/free-regular-svg-icons';\r\nimport { faStar } from '@fortawesome/free-solid-svg-icons';\r\nimport { GuestsModal } from './GuestsModal';\r\nimport { DateRange } from './DateRange';\r\nimport stay from '../data/stay';\r\nimport { userService } from '../services/user.service';\r\nimport { LoginModal } from './LoginModal';\r\nimport { setModalPos, setPos } from '../store/page.actions.js';\r\nimport { connect } from 'react-redux';\r\n\r\nexport class _OrderForm extends React.Component {\r\n  state = {\r\n    newOrderFromForm: {\r\n      totalPrice: 0,\r\n      checkIn: '',\r\n      checkOut: '',\r\n      guests: {\r\n        adults: 0,\r\n        kids: 0,\r\n      },\r\n      stay: {\r\n        _id: this.props.stay._id,\r\n        title: this.props.stay.title,\r\n        totalPrice: this.props.stay.price,\r\n        imgUrls: this.props.stay.imgUrls,\r\n      },\r\n    },\r\n    isOrderSum: false,\r\n    isDatesCmpShow: false,\r\n    x: 0,\r\n    y: 0,\r\n    rect: 0,\r\n    isReserveOrder: false,\r\n    isLoginModal: false,\r\n  };\r\n\r\n  componentDidMount() {\r\n    const { newOrder } = this.props;\r\n    const { newOrderFromForm } = this.state;\r\n    this.setState((prevState) => ({\r\n      newOrderFromForm: {\r\n        ...prevState.newOrderFromForm,\r\n        checkIn: newOrder.checkIn,\r\n        checkOut: newOrder.checkOut,\r\n        guests: newOrder.guests,\r\n      },\r\n    }));\r\n\r\n    window.addEventListener('scroll', () => {\r\n      this.setState({ isDatesCmpShow: false, isGuestsModalShown: false });\r\n    });\r\n  }\r\n\r\n  handleChange = (ev) => {\r\n    const field = ev.target.name;\r\n    const value = ev.target.value;\r\n    this.setState((prevState) => ({\r\n      newOrder: { ...prevState.newOrder, [field]: value },\r\n    }));\r\n  };\r\n\r\n  handleChangeNew = (ev) => {\r\n    const field = ev.target.name;\r\n    const value = ev.target.value;\r\n    this.setState((prevState) => ({\r\n      newOrderFromForm: { ...prevState.newOrderFromForm, [field]: value },\r\n    }));\r\n  };\r\n\r\n  onAddOrder = (ev) => {\r\n    ev.preventDefault();\r\n    if (\r\n      !this.state.newOrderFromForm.checkIn ||\r\n      !this.state.newOrderFromForm.checkOut ||\r\n      !this.state.newOrderFromForm.guests\r\n    ) {\r\n      return;\r\n    }\r\n    const user = userService.getLoggedinUser();\r\n    if (!user) {\r\n      this.setState({ isLoginModal: true }, () => {\r\n        setTimeout(() => {\r\n          this.setState({ isLoginModal: false });\r\n        }, 4000);\r\n      });\r\n      return;\r\n    }\r\n    const days = this.getNumOfDays();\r\n    const { stay } = this.props;\r\n    const sum = this.getTotalPrice(stay.price, days);\r\n\r\n    this.setState(\r\n      (prevState) => ({\r\n        newOrderFromForm: { ...prevState.newOrderFromForm, totalPrice: sum },\r\n      }),\r\n      () => {\r\n        const { newOrderFromForm } = this.state;\r\n\r\n        this.setState({ isOrderSum: true });\r\n        if (this.props.orderId) {\r\n          newOrderFromForm._id = this.props.orderId;\r\n          this.props.onEditOrder(newOrderFromForm);\r\n        } else {\r\n          this.props.onAddOrder(newOrderFromForm);\r\n        }\r\n      }\r\n    );\r\n  };\r\n\r\n  clearState = () => {\r\n    const clearTemplate = {\r\n      newOrder: {\r\n        totalPrice: 0,\r\n        checkIn: '',\r\n        checkOut: '',\r\n        guests: {\r\n          adults: 0,\r\n          kids: 0,\r\n        },\r\n      },\r\n    };\r\n    this.setState({ ...clearTemplate });\r\n  };\r\n\r\n  handleHover = (ev) => {\r\n    this.setState({\r\n      x: ev.clientX,\r\n      y: ev.clientY,\r\n      rect: ev.target.getBoundingClientRect(),\r\n    });\r\n  };\r\n\r\n  getNumOfDays = () => {\r\n    const { checkOut, checkIn } = this.state.newOrderFromForm;\r\n    if (!checkIn || !checkOut) return;\r\n    const sum = Math.abs(Math.floor((checkOut - checkIn) / 86400000));\r\n    return sum;\r\n  };\r\n\r\n  getTotalPrice = (price, days) => {\r\n    const sum = price * days;\r\n    return sum;\r\n  };\r\n  toggleButton = () => {\r\n    const { newOrderFromForm } = this.state;\r\n    if (\r\n      !newOrderFromForm.checkIn ||\r\n      !newOrderFromForm.checkOut ||\r\n      newOrderFromForm.guests.adults + newOrderFromForm.guests.kids === 0\r\n    ) {\r\n      console.log('missing fields!');\r\n      return;\r\n    }\r\n\r\n    this.setState({ isReserveOrder: true, isOrderSum: true });\r\n  };\r\n\r\n  toggleDateCmp = () => {\r\n    this.setState({ isDatesCmpShow: !this.state.isDatesCmpShow });\r\n  };\r\n  setDates = (start, end) => {\r\n    const startDay = Date.parse(start);\r\n    const endDay = Date.parse(end);\r\n\r\n    this.setState((prevState) => ({\r\n      newOrderFromForm: {\r\n        ...prevState.newOrderFromForm,\r\n        checkIn: startDay,\r\n        checkOut: endDay,\r\n      },\r\n    }));\r\n  };\r\n\r\n  formattedDates = (chosenDate) => {\r\n    if (!chosenDate) return 'Add dates';\r\n    const date = new Date(chosenDate);\r\n    return date.toLocaleDateString('en-GB');\r\n  };\r\n\r\n  render() {\r\n    const {\r\n      x,\r\n      y,\r\n      isOrderSum,\r\n      rect,\r\n      isReserveOrder,\r\n      newOrderFromForm,\r\n      isDatesCmpShow,\r\n    } = this.state;\r\n    const { isGuestsModalShown, isLoginModal } = this.state;\r\n    const { checkIn, checkOut, guests } = this.state.newOrderFromForm;\r\n    const { stay, updateNumOfGuests, updateDates } = this.props;\r\n    const { left, top } = this.props.relativePos;\r\n\r\n    return (\r\n      <div className='order-form-container' id='Form'>\r\n        <div className='sticky-form-container'>\r\n          <div className='sticky-form'>\r\n            <div className='order-header'>\r\n              <p>\r\n                <span className='order-header-price'>${stay.price} </span>\r\n                <span>/ night</span>\r\n              </p>\r\n              <span className='stay-rate'>\r\n                <FontAwesomeIcon className='star' icon={faStar} />\r\n                <span>{this.props.reviewsAvg}</span>\r\n                {<p>({stay.reviews ? stay.reviews.length : 0} reviews)</p>}\r\n              </span>\r\n            </div>\r\n            <p className='price-vary'>Price may vary by date</p>\r\n            <form className='order-form' onSubmit={this.onAddOrder}>\r\n              <div className='order-form-dates-input'>\r\n                <label className='checkin-label' htmlFor='order-checkIn'>\r\n                  <span>checkIn:</span>\r\n                  <input\r\n                    type='text'\r\n                    name='checkIn'\r\n                    id='order-checkIn'\r\n                    value={this.formattedDates(checkIn)}\r\n                    onChange={this.handleChangeNew}\r\n                    onClick={(ev) => {\r\n                      const left = ev.pageX - 80;\r\n                      const top = ev.pageY + 25;\r\n                      this.props.setPos({ left, top });\r\n                      this.toggleDateCmp();\r\n                    }}\r\n                    required\r\n                    placeholder='check In'\r\n                  />\r\n                </label>\r\n                <label className='checkout-label' htmlFor='order-checkOut'>\r\n                  <span>checkOut:</span>\r\n                  <input\r\n                    type='checkOut'\r\n                    name='checkOut'\r\n                    value={this.formattedDates(checkOut)}\r\n                    onClick={(ev) => {\r\n                      const left = ev.pageX - 50;\r\n                      const top = ev.pageY + 25;\r\n                      this.props.setPos({ left, top });\r\n                      this.toggleDateCmp();\r\n                    }}\r\n                    onChange={this.handleChangeNew}\r\n                    id='order-checkOut'\r\n                    required\r\n                    placeholder='check In'\r\n                  ></input>\r\n                </label>\r\n              </div>\r\n\r\n              {/* <label className='guests-label' htmlFor='order-guests'> */}\r\n              <label className='guests-label'>\r\n                <span>Guests:</span>\r\n                <input\r\n                  name='guests'\r\n                  value={guests.kids + guests.adults}\r\n                  onChange={this.handleChangeNew}\r\n                  id='order-guests'\r\n                  autoComplete='off'\r\n                  required\r\n                  onClick={(ev) => {\r\n                    const left = ev.pageX - 50;\r\n                    const top = ev.pageY + 30;\r\n                    this.props.setPos({ left, top });\r\n                    this.props.onToggleModal();\r\n                  }}\r\n                ></input>\r\n              </label>\r\n\r\n              {!isReserveOrder && (\r\n                <button\r\n                  className='form-btn'\r\n                  style={{\r\n                    backgroundPosition: `-${x}% -${y}%`,\r\n                  }}\r\n                  onMouseMove={this.handleHover}\r\n                  onClick={this.toggleButton}\r\n                  type='button'\r\n                >\r\n                  Check Availability\r\n                </button>\r\n              )}\r\n              {isReserveOrder && (\r\n                <button\r\n                  className='form-btn'\r\n                  style={{\r\n                    backgroundPosition: `-${x}% -${y}%`,\r\n                  }}\r\n                  onMouseMove={this.handleHover}\r\n                  type='submit'\r\n                >\r\n                  Reserve\r\n                </button>\r\n              )}\r\n              {isOrderSum && (\r\n                <div className='order-sum-details'>\r\n                  <h4>You won't be charged yet</h4>\r\n                  <div>\r\n                    <p>\r\n                      ${stay.price} X {this.getNumOfDays()} nights\r\n                    </p>\r\n                    <span>\r\n                      ${this.getTotalPrice(stay.price, this.getNumOfDays()).toLocaleString()}\r\n                    </span>\r\n                  </div>\r\n                  <div>\r\n                    <p>Cleaning fee</p>\r\n                    <span>$40</span>\r\n                  </div>\r\n                  <div>\r\n                    <p>Service fee</p>\r\n                    <span>$100</span>\r\n                  </div>\r\n\r\n                  <div className='order-sum-total'>\r\n                    <p>Total</p>\r\n                    <p>\r\n                      $\r\n                      {(this.getTotalPrice(stay.price, this.getNumOfDays()) +\r\n                        100 +\r\n                        40).toLocaleString()}\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </form>\r\n          </div>\r\n          <span className='report-listing'>\r\n            <FontAwesomeIcon icon={faFlag} />\r\n            Report this listing\r\n          </span>\r\n        </div>\r\n        {isLoginModal && <LoginModal isLoginModal={isLoginModal} />}\r\n        {isDatesCmpShow && (\r\n          <DateRange\r\n            toggleDateCmp={this.toggleDateCmp}\r\n            setDates={this.setDates}\r\n          />\r\n        )}\r\n        {this.props.isGuestsModalShown && (\r\n          <div className='guests-modal-div-container' style={{ left, top }}>\r\n            <GuestsModal\r\n              guests={guests}\r\n              updateNumOfGuests={updateNumOfGuests}\r\n            />\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    currPage: state.pageModule.currPage,\r\n    relativePos: state.pageModule.relativePos,\r\n  };\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n  setModalPos,\r\n  setPos,\r\n};\r\n\r\nexport const OrderForm = connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(_OrderForm);\r\n","import React from 'react';\r\n\r\nexport function ReviewPreview({ review }) {\r\n  const changeDateFormat = (date) => {\r\n    const newDate = date.split('.');\r\n    var month = '';\r\n    switch (newDate[1]) {\r\n      case '1':\r\n        month = 'January';\r\n        break;\r\n      case '2':\r\n        month = 'February';\r\n        break;\r\n      case '3':\r\n        month = 'March';\r\n        break;\r\n      case '4':\r\n        month = 'April';\r\n        break;\r\n      case '5':\r\n        month = 'May';\r\n        break;\r\n      case '6':\r\n        month = 'June';\r\n        break;\r\n      case '7':\r\n        month = 'July';\r\n        break;\r\n      case '8':\r\n        month = 'August';\r\n        break;\r\n      case '9':\r\n        month = 'September';\r\n        break;\r\n      case '10':\r\n        month = 'October';\r\n        break;\r\n      case '11':\r\n        month = 'November';\r\n        break;\r\n      case '12':\r\n        month = 'December';\r\n        break;\r\n\r\n      default:\r\n        break;\r\n    }\r\n    return month + ' ' + newDate[2];\r\n  };\r\n  const formattedDates = (chosenDate) => {\r\n    if (!chosenDate) {\r\n      chosenDate = Date.now();\r\n    }\r\n\r\n    const date = new Date(chosenDate);\r\n    return date.toLocaleDateString(\"en-GB\");\r\n  };\r\n  return (\r\n    <div className='review-preview'>\r\n      <div className='review-header'>\r\n        <img src={review.by.imgUrl} />\r\n        <div>\r\n          <h3>{review.by.fullname}</h3>\r\n          <h4>\r\n          {formattedDates(review.date)}\r\n          </h4>\r\n        </div>\r\n      </div>\r\n      <div className='review-content'>\r\n        <p>{review.txt}</p>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport { ReviewPreview } from './ReviewPreview';\r\n\r\nexport function ReviewList({ reviews }) {\r\n  return (\r\n    <section className='review-list'>\r\n      {reviews ? (\r\n        reviews.map((review, idx) => {\r\n          return <ReviewPreview key={idx} review={review} />;\r\n        })\r\n      ) : (\r\n        <h1>No Reviews!</h1>\r\n      )}\r\n    </section>\r\n  );\r\n}\r\n","import React, { Component } from 'react';\r\nimport { Map, InfoWindow, Marker, GoogleApiWrapper } from 'google-maps-react';\r\n\r\nclass _StayMap extends Component {\r\n  state = {\r\n    center: {\r\n      lat: null,\r\n      lng: null,\r\n      address: null,\r\n    },\r\n    isInfoWindowOn: true,\r\n  };\r\n\r\n  componentDidMount() {\r\n    const center = this.props.location;\r\n    this.setState({ center });\r\n  }\r\n\r\n  render() {\r\n    const { center } = this.state;\r\n    if (!center) return <div>Loading...</div>;\r\n    return (\r\n      <div className='stay-map'>\r\n        <h3>{center.address}</h3>\r\n\r\n        <Map\r\n          google={this.props.google}\r\n          zoom={5}\r\n          initialCenter={center}\r\n          center={center}\r\n          style={{ width: '100%' }}\r\n        >\r\n          <Marker\r\n            position={center}\r\n            name={'Current Location'}\r\n            onClick={this.onMarkerClicked}\r\n          />\r\n\r\n          <InfoWindow\r\n            // onClose={this.onInfoWindowClose}\r\n            position={center}\r\n            visible={this.state.isInfoWindowOn}\r\n          >\r\n            <div>\r\n              <h1>Your next trip is here!</h1>\r\n            </div>\r\n          </InfoWindow>\r\n        </Map>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport const StayMap = GoogleApiWrapper({\r\n  apiKey: 'AIzaSyBcHbsl6HTfMsdpKO2d3xY9UYQdF4BIUG4',\r\n})(_StayMap);\r\n","//\r\nimport Axios from 'axios';\r\nimport { httpService } from './http.service';\r\nimport { storageService } from './async-storage.service';\r\nimport { userService } from './user.service';\r\nimport { utilService } from './util.service';\r\nimport { socketService, SOCKET_EVENT_REVIEW_ADDED } from './socket.service';\r\n\r\nconst listeners = [];\r\nconst BASE_URL =\r\n  process.env.NODE_ENV === 'production'\r\n    ? '/api/stay/'\r\n    : 'http://localhost:3030/api/stay/';\r\n\r\nconst axios = Axios.create({\r\n  withCredentials: true,\r\n});\r\n\r\nexport const reviewService = {\r\n  add,\r\n  query,\r\n  remove,\r\n};\r\n\r\n// More ways to send query params:\r\n// return axios.get('api/toy/?id=1223&balance=13')\r\n// return axios.get('api/toy/?', {params: {id: 1223, balanse:13}})\r\n\r\nfunction query(filterBy = null) {\r\n  // var queryStr = (!filterBy) ? '' : `?name=${filterBy.name}&sort=anaAref`\r\n  // return httpService.get(`review${queryStr}`)\r\n  return storageService.query('review', { params: filterBy }); // ככה?\r\n}\r\n\r\nfunction remove(reviewId) {\r\n  // return httpService.delete(`review/${reviewId}`)\r\n  return storageService.remove('review', reviewId);\r\n}\r\nasync function add(stay, review) {\r\n  // const addedReview = await httpService.post(`review`, review);\r\n\r\n  const user = await userService.getLoggedinUser();\r\n  // review.user = userService.getLoggedinUser()\r\n  // review.aboutUser = await userService.getById(review.aboutUserId)//don't need because its in the stay?\r\n\r\n  const { ratings } = review;\r\n\r\n  var sum =\r\n    ratings.cleanliness +\r\n    ratings.communication +\r\n    ratings.checkIn +\r\n    ratings.accuracy +\r\n    ratings.location +\r\n    ratings.value;\r\n  var average = sum / 6;\r\n  ratings.avg = average;\r\n\r\n  const newReview = {\r\n    id: utilService.makeId(),\r\n    txt: review.txt,\r\n    date: review.date,\r\n    // rate: review.rating,\r\n    ratings: review.ratings,\r\n    by: review.by,\r\n  };\r\n  stay.reviews.push(newReview);\r\n  // const addedReview = storageService.post('review', review);\r\n  // const addedReview = storageService.put('stayDB', stay);\r\n  return axios\r\n    .put('http://localhost:3030/api/stay', stay)\r\n    .then((res) => res.data);\r\n  // return addedReview;\r\n}\r\n\r\n// This IIFE functions for Dev purposes\r\n// It allows testing of real time updates (such as sockets) by listening to storage events\r\n(async () => {\r\n  var reviews = await storageService.query('review');\r\n\r\n  // Dev Helper: Listens to when localStorage changes in OTHER browser\r\n  window.addEventListener('storage', async () => {\r\n    console.log('Storage updated');\r\n    const freshReviews = await storageService.query('review');\r\n    if (freshReviews.length === reviews.length + 1) {\r\n      console.log('Review Added - localStorage updated from another browser');\r\n      socketService.emit(\r\n        SOCKET_EVENT_REVIEW_ADDED,\r\n        freshReviews[freshReviews.length - 1]\r\n      );\r\n    }\r\n    reviews = freshReviews;\r\n  });\r\n})();\r\n","import React from 'react';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faStar } from '@fortawesome/free-solid-svg-icons';\r\nimport { connect } from 'react-redux';\r\nimport { Loader } from './Loader';\r\n\r\nexport class _StayDetailsHeader extends React.Component {\r\n  getReviewsAverage = (reviews) => {\r\n    if (!reviews || !reviews.length) return 0;\r\n    const average =\r\n      reviews.reduce(function (sum, value) {\r\n        return sum + value.ratings.avg;\r\n      }, 0) / reviews.length;\r\n\r\n    return average.toFixed(2);\r\n  };\r\n  render() {\r\n    const { currStay } = this.props;\r\n    if (!currStay) return <Loader />;\r\n    console.log('***************', this.props);\r\n    return (\r\n      <section className='details-header-container'>\r\n        <header className='details-container'>\r\n          <div className='details-header'>\r\n            <ul className='details-header-nav'>\r\n              <li>\r\n                <a href='#Photos'>Photos</a>\r\n              </li>\r\n              <li>\r\n                <a href='#Amenities'>Amenities</a>\r\n              </li>\r\n              <li>\r\n                <a href='#Reviews'>Reviews</a>\r\n              </li>\r\n              <li>\r\n                <a href='#Location'>Location</a>\r\n              </li>\r\n            </ul>\r\n            <div className='mini-form'>\r\n              <div className='mini-form-details'>\r\n                <p>\r\n                  <span className='mini-order-header-price'>\r\n                    ${currStay.price}{' '}\r\n                  </span>\r\n                  <span className='mini-order-text'>/ night</span>\r\n                </p>\r\n                <span className='mini-stay-rate'>\r\n                  <FontAwesomeIcon className='star' icon={faStar} />\r\n                  <span className='mini-reviews-avg'>\r\n                    {this.getReviewsAverage(currStay.reviews)}\r\n                  </span>\r\n                  {\r\n                    <p className='mini-reviews-num'>\r\n                      ({currStay.reviews ? currStay.reviews.length : 0} reviews)\r\n                    </p>\r\n                  }\r\n                </span>\r\n              </div>\r\n              <a href='#Form'>\r\n                {' '}\r\n                <button className='mini-form-btn'>\r\n                  Check availability\r\n                </button>{' '}\r\n              </a>\r\n            </div>\r\n          </div>\r\n        </header>\r\n      </section>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    currStay: state.stayModule.currStay,\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = {};\r\n\r\nexport const StayDetailsHeader = connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(_StayDetailsHeader);\r\n","import { faHeart } from '@fortawesome/free-regular-svg-icons';\r\nimport {\r\n  faBookmark,\r\n  faBookOpen,\r\n  faExternalLinkAlt,\r\n  faHome,\r\n  faMedal,\r\n  faStar,\r\n} from '@fortawesome/free-solid-svg-icons';\r\nimport { changePage } from '../store/page.actions.js';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { logDOM } from '@testing-library/dom';\r\nimport React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { AddOrder } from '../cmps/AddOrder';\r\nimport { AddReview } from '../cmps/AddReview';\r\nimport { Amenities } from '../cmps/Amenities.jsx';\r\nimport { OrderForm } from '../cmps/OrderForm';\r\nimport { RatingStar } from '../cmps/RatingStars';\r\nimport { ReviewList } from '../cmps/ReviewList';\r\nimport { StayMap } from '../cmps/StayMap';\r\nimport { stayService } from '../services/stay.service';\r\nimport { onAddOrder, setGuests, onEditOrder } from '../store/order.actions';\r\nimport { loadReviews, addReview } from '../store/review.actions.js';\r\nimport { Loader } from '../cmps/Loader.jsx';\r\nimport { userService } from '../services/user.service.js';\r\nimport { StayDetailsHeader } from '../cmps/StayDetailsHeader.jsx';\r\nimport { socketService } from '../services/socket.service.js';\r\nimport { saveNotifiToUser } from '../store/user.actions';\r\n\r\nclass _StayDetails extends React.Component {\r\n  state = {\r\n    stay: null,\r\n    reviews: [],\r\n    newOrder: {\r\n      checkIn: null,\r\n      checkOut: null,\r\n      // guests: ''\r\n      guests: {\r\n        adults: 0,\r\n        kids: 0,\r\n      },\r\n    },\r\n    isGuestsModalShown: false,\r\n  };\r\n  componentDidMount = () => {\r\n    window.scrollTo(0, 0);\r\n    this.props.changePage('details');\r\n    const stayId = this.props.match.params.stayId;\r\n    if (!stayId) {\r\n      this.props.history.push('/');\r\n      return;\r\n    }\r\n    stayService.getById(stayId).then((stay) =>{\r\n    \r\n    this.setState({ stay })\r\n    socketService.setup()\r\n    socketService.emit('setHost',stay.host._id)\r\n    // socketService.on('setNotification',(msg)=>{\r\n    //   console.log('msg',msg);\r\n    //   this.props.saveNotifiToUser({ date: this.formattedDates(Date.now()), msg })\r\n    // })\r\n  })\r\n  }\r\n\r\n  onCloseModal = () => {\r\n    this.setState({ isGuestsModalShown: false });\r\n  };\r\n  formattedDates = (chosenDate) => {\r\n    if (!chosenDate) return 'Add dates';\r\n    const date = new Date(chosenDate);\r\n    return date.toLocaleDateString('en-GB');\r\n  };\r\n  // onGetNotifications=(msg)=>{\r\n  // this.props.saveNotifiToUser({ date: this.formattedDates(Date.now()), msg })\r\n  // }\r\n  onAddOrder = async (order) => {\r\n    const user = await userService.getLoggedinUser();\r\n    const { stay } = this.state;\r\n\r\n    const orderObj = {\r\n      ...order,\r\n      status: 'pending',\r\n      user,\r\n      host: stay.host,\r\n    };\r\n    const orderToSave = {\r\n      ...(await this.props.onAddOrder(orderObj, user._id)),\r\n    };\r\n  };\r\n\r\n  onRemoveOrder = (orderId) => {\r\n    this.props.onRemoveOrder(orderId);\r\n  };\r\n\r\n  onAddReview = async (review) => {\r\n    try {\r\n      const { stay } = this.state;\r\n      await this.props.addReview(stay, review);\r\n    } catch (err) {\r\n      console.log('login first');\r\n    }\r\n  };\r\n\r\n  getReviewsAverage = (reviews) => {\r\n    if (!reviews || !reviews.length) return 0;\r\n    const average =\r\n      reviews.reduce(function (sum, value) {\r\n        return sum + value.ratings.avg;\r\n      }, 0) / reviews.length;\r\n\r\n    return average.toFixed(2);\r\n  };\r\n\r\n  updateNumOfGuests = (diff, type, ev) => {\r\n    ev.preventDefault();\r\n    ev.stopPropagation();\r\n    const order = { ...this.props.newOrder };\r\n    if (\r\n      order.guests.adults + order.guests.kids + diff >\r\n      this.state.stay.capacity\r\n    )\r\n      return;\r\n    if (order.guests[type] + diff < 0) return;\r\n    order.guests[type] += diff;\r\n    this.props.setGuests(order);\r\n  };\r\n\r\n  onToggleModal = () => {\r\n    const { isGuestsModalShown } = this.state;\r\n    console.log('this is on toggle modal');\r\n    this.setState({ isGuestsModalShown: !isGuestsModalShown });\r\n  };\r\n\r\n  render() {\r\n    const { stay, reviews, isGuestsModalShown } = this.state;\r\n    const { checkIn, checkOut } = this.props;\r\n\r\n    return !stay ? (\r\n      <Loader />\r\n    ) : (\r\n      <section className='details-container'>\r\n        <main className='stay-details'>\r\n          <section className='stay-details-header'>\r\n            <h1 className='stay-title '>{stay.title}</h1>\r\n            <div className='stay-short-info'>\r\n              <div className='stay-short-info-details'>\r\n                <span className='stay-rate-details'>\r\n                  <FontAwesomeIcon className='star' icon={faStar} />\r\n                </span>\r\n                <span>{this.getReviewsAverage(stay.reviews)}</span>{' '}\r\n                <p>( {stay.reviews ? stay.reviews.length : 0} reviews )</p>\r\n                <span className='span-dot'>●</span>\r\n                <p>{stay.loc.address}</p>\r\n              </div>\r\n              <div className='action-btns'>\r\n                <a>\r\n                  <FontAwesomeIcon\r\n                    className='action-icon'\r\n                    icon={faExternalLinkAlt}\r\n                  />\r\n                  Share\r\n                </a>\r\n                <a>\r\n                  <FontAwesomeIcon className='action-icon' icon={faHeart} />\r\n                  Save\r\n                </a>\r\n              </div>\r\n            </div>\r\n          </section>\r\n          <section className='stay-gallery' id='Photos'>\r\n            {stay.imgUrls.map((img) => {\r\n              return <img src={img} />;\r\n            })}\r\n          </section>\r\n          <section className='stay-info-container'>\r\n            <div className='stay-info'>\r\n              <div className='stay-info-header'>\r\n                <div>\r\n                  <h3>\r\n                    {stay.type} hosted by {stay.host.fullname}\r\n                  </h3>\r\n                  <p className='stay-info-header-subtitle'>\r\n                    {stay.capacity} Guests <span className='span-dot'>●</span>{' '}\r\n                    {stay.stayType} <span className='span-dot'>●</span>{' '}\r\n                    {stay.type}\r\n                  </p>\r\n                </div>\r\n                <img src={stay.host.imgUrl} />\r\n              </div>\r\n              <div className='stay-features-container'>\r\n                <div className='stay-features-details'>\r\n                  <FontAwesomeIcon icon={faHome} />\r\n                  <div>\r\n                    <h3>Entire Place</h3>\r\n                    {/* <p>Entire Place</p> */}\r\n                    <h4>You'll have the place to yourself.</h4>\r\n                  </div>\r\n                </div>\r\n                <div className='stay-features-details'>\r\n                  <FontAwesomeIcon icon={faBookOpen} />\r\n                  <div>\r\n                    <h3>House Rules</h3>\r\n                    <h4>\r\n                      {' '}\r\n                      This place isn’t suitable for children under 12 and the\r\n                      host doesn’t allow pets.\r\n                    </h4>\r\n                  </div>\r\n                </div>\r\n                <div className='stay-features-details'>\r\n                  <FontAwesomeIcon icon={faMedal} />\r\n                  <div>\r\n                    <h3>{stay.host.fullname} is A Superhost</h3>\r\n                    <h4>\r\n                      {' '}\r\n                      Superhosts are experienced, highly rated hosts who are\r\n                      committed to providing great stays for guests.\r\n                    </h4>\r\n                  </div>\r\n                </div>\r\n                <div className='stay-features-details'>\r\n                  <FontAwesomeIcon icon={faBookmark} />\r\n                  <div>\r\n                    <h3>Wifi</h3>\r\n                    <h4>Guests often search for this popular amenity</h4>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div className='stay-description'>\r\n                <h2>Description</h2>\r\n                <p>{stay.desc}</p>\r\n              </div>\r\n\r\n              <div className='stay-amenities' id='Amenities'>\r\n                <h2>Amenities</h2>\r\n                <Amenities amenities={stay.amenities} />\r\n              </div>\r\n            </div>\r\n\r\n            <OrderForm\r\n              stay={stay}\r\n              newOrder={this.props.newOrder}\r\n              onAddOrder={this.onAddOrder}\r\n              onRemoveOrder={this.onRemoveOrder}\r\n              updateNumOfGuests={this.updateNumOfGuests}\r\n              isGuestsModalShown={isGuestsModalShown}\r\n              updateDates={this.updateDates}\r\n              onToggleModal={this.onToggleModal}\r\n              reviewsAvg={this.getReviewsAverage(stay.reviews)}\r\n              orderId={this.props.location.orderId}\r\n              onEditOrder={this.props.onEditOrder}\r\n              capacity={stay.capacity}\r\n            />\r\n          </section>\r\n\r\n          <div className='reviews-header' id='Reviews'>\r\n            <div className='reviews-header-rate'>\r\n              <span className='stay-rate'>\r\n                <FontAwesomeIcon className='star' icon={faStar} />\r\n              </span>\r\n              <p> {this.getReviewsAverage(stay.reviews)}</p>\r\n              <p>( {stay.reviews ? stay.reviews.length : 0} reviews )</p>\r\n            </div>\r\n            <RatingStar isEdit={false} reviews={stay.reviews} />\r\n          </div>\r\n          <ReviewList reviews={stay.reviews} />\r\n          <AddReview onAddReview={(review) => this.onAddReview(review)} />\r\n\r\n          <section id='Location' className='map-container'>\r\n            <h2>Location</h2>\r\n            <StayMap location={stay.loc} />\r\n          </section>\r\n        </main>\r\n      </section>\r\n    );\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    newOrder: state.orderModule.newOrder,\r\n    orders: state.userModule.orders,\r\n    reviews: state.reviewModule.reviews,\r\n  };\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n  onAddOrder,\r\n  addReview,\r\n  loadReviews,\r\n  setGuests,\r\n  changePage,\r\n  onEditOrder,\r\n  saveNotifiToUser,\r\n};\r\n\r\nexport const StayDetails = connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(_StayDetails);\r\n","import { reviewService } from '../services/review.service';\r\nimport {\r\n  socketService,\r\n  SOCKET_EVENT_REVIEW_ADDED,\r\n} from '../services/socket.service';\r\nimport { userService } from '../services/user.service';\r\n\r\nconst SCORE_FOR_REVIEW = 500;\r\n\r\n\r\nexport function loadReviews(filterBy = null) {\r\n  return async (dispatch) => {\r\n    try {\r\n      dispatch({ type: 'SET_LOADER' });\r\n      const reviews = await reviewService.query(filterBy);\r\n      dispatch({ type: 'SET_REVIEWS', reviews });\r\n      // socketService.on(SOCKET_EVENT_REVIEW_ADDED, (review) =>{\r\n      //   dispatch({ type: 'ADD_REVIEW', review })\r\n      // })\r\n    } catch (err) {\r\n      console.log('ReviewActions: err in loadReviews', err);\r\n    } finally {\r\n      dispatch({ type: 'SET_LOADER' });\r\n    }\r\n  };\r\n}\r\n\r\nexport function addReview(stay, review) {\r\n  return async (dispatch) => {\r\n    try {\r\n      const addedReview = await reviewService.add(stay, review);\r\n      dispatch({ type: 'ADD_REVIEW', review: addedReview });\r\n    } catch (err) {\r\n      console.log('ReviewActions: err in addReview', err);\r\n    }\r\n  };\r\n}\r\n\r\nexport function removeReview(reviewId) {\r\n  return async (dispatch) => {\r\n    try {\r\n      await reviewService.remove(reviewId);\r\n      dispatch({ type: 'REMOVE_REVIEW', reviewId });\r\n    } catch (err) {\r\n      console.log('ReviewActions: err in removeReview', err);\r\n    }\r\n  };\r\n}\r\n","import React from 'react';\r\nimport { loadStays } from '../store/stay.actions.js';\r\nimport { Link } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nclass _DropDownStayType extends React.Component {\r\n  state = {\r\n    filterBy: {\r\n      stayType: '',\r\n    },\r\n  };\r\n\r\n  componentDidMount() {}\r\n\r\n  SetFilterStayType = (type) => {\r\n    console.log('SetFilterStayType');\r\n    const { stays } = this.props;\r\n    console.log(' stays in dropdowntype', stays);\r\n    return stays.filter((stay) => {\r\n      return stay.stayType === type;\r\n    });\r\n    // const staysToDisplay=stays.filter((stay)=>{\r\n    //   return stay.stayType===type;\r\n    // })\r\n    // const { filterBy } = this.state\r\n    // let filterBy={stayType: type};\r\n\r\n    // this.setState((prevstate) => ({ filterBy: { ...prevstate.filterBy, stayType: stayType } }))\r\n    // this.props.loadStays(filterBy)---\r\n  };\r\n\r\n  render() {\r\n    const { modalPos, onSetFrontFilter } = this.props;\r\n    const { left } = this.props.modalPos;\r\n    const { filterBy } = this.state;\r\n    console.log('this.props.modalPos in stayType', this.props.modalPos);\r\n    return (\r\n      <div className='drop-down-stay-type' style={{ left }}>\r\n        <ul>\r\n          <li\r\n            className='li-type-item'\r\n            onClick={() => {\r\n              onSetFrontFilter('stayType', 'Entire place');\r\n            }}\r\n          >\r\n            Entire Place\r\n          </li>\r\n          {/* <li className='li-type-item' onClick={() => {\r\n                   this.setState((prevstate) => ({  filterBy:{...prevstate.filterBy, stayType:'Entire Place'} }), ()=>{\r\n                       this.props.loadStays(filterBy)\r\n                     \r\n                       \r\n                   });\r\n                  }}>\r\n                Entire Place\r\n                \r\n                </li>  */}\r\n\r\n          {/* <li className='li-type-item' onClick={() => {\r\n                    this.setState((prevstate) => ({  filterBy:{...prevstate.filterBy, stayType:'Private Room'} }), ()=>{\r\n                        this.props.loadStays(filterBy)\r\n                        \r\n                    });\r\n                  }}\r\n                \r\n                >\r\n                \r\n                Private Room\r\n                </li> */}\r\n          <li\r\n            className='li-type-item'\r\n            onClick={() => {\r\n              onSetFrontFilter('stayType', 'Private room');\r\n              // this.SetFilterStayType('Private Room')\r\n            }}\r\n          >\r\n            Private Room\r\n          </li>\r\n        </ul>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    stays: state.stayModule.stays,\r\n    filterBy: state.stayModule.filterBy,\r\n    modalPos: state.pageModule.modalPos,\r\n  };\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n  loadStays,\r\n};\r\n\r\nexport const DropDownStayType = connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(_DropDownStayType);\r\n","import React from 'react';\r\nimport { loadStays } from \"../store/stay.actions.js\";\r\nimport { Link } from 'react-router-dom';\r\nimport { connect } from \"react-redux\";\r\nclass _DropDownPropertyType extends React.Component {\r\n  state = {\r\n    filterBy: {\r\n      type: ''\r\n    }\r\n  };\r\n\r\n  SetFilterStayType = (type) => {\r\n\r\n    // const { filterBy } = this.state\r\n    let filterBy = { type: type };\r\n\r\n    // this.setState((prevstate) => ({ filterBy: { ...prevstate.filterBy, stayType: stayType } }))\r\n    this.props.loadStays(filterBy)\r\n\r\n\r\n\r\n  }\r\n\r\n  render() {\r\n    const { stays, onSetFrontFilter } = this.props;\r\n    const { left } = this.props.modalPos;\r\n    const { filterBy } = this.state\r\n    return (\r\n      <div className='drop-down-property-type' style={{ left }}>\r\n        <ul >\r\n\r\n          <li className='li-type-item' onClick={() => {\r\n\r\n            onSetFrontFilter('type', 'Apartment')\r\n          }}>\r\n            Appartment\r\n\r\n          </li>\r\n          {/* <li className='li-type-item' onClick={() => {\r\n\r\n            onSetFrontFilter('type', 'GuestHouse')\r\n          }}>\r\n            GuestHouse\r\n\r\n          </li> */}\r\n          <li className='li-type-item' onClick={() => {\r\n\r\n            onSetFrontFilter('type', 'Studio')\r\n          }}>\r\n            Studio\r\n\r\n          </li>\r\n          <li className='li-type-item' onClick={() => {\r\n\r\n            onSetFrontFilter('type', 'Loft')\r\n          }}>\r\n            Loft\r\n\r\n          </li>\r\n          {/* <li className='li-type-item' onClick={() => {\r\n\r\n            onSetFrontFilter('type', ' Private Home')\r\n          }}>\r\n            Private Home\r\n\r\n          </li> */}\r\n          <li className='li-type-item' onClick={() => {\r\n\r\n            onSetFrontFilter('type', 'Room')\r\n          }}>\r\n            Room\r\n\r\n          </li>\r\n          <li className='li-type-item' onClick={() => {\r\n\r\n            onSetFrontFilter('type', 'Villa')\r\n          }}>\r\n            Villa\r\n\r\n          </li>\r\n\r\n\r\n          {/* <li className='li-type-item' onClick={() => {\r\n                   this.setState((prevstate) => ({  filterBy:{...prevstate.filterBy, type:'Appartment'} }), ()=>{\r\n                       this.props.loadStays(filterBy)\r\n                     \r\n                       \r\n                   });\r\n                  }}>\r\n                Appartment\r\n                \r\n                </li>  */}\r\n\r\n\r\n          {/* <li className='li-type-item' onClick={() => {\r\n            this.setState((prevstate) => ({ filterBy: { ...prevstate.filterBy, type: 'GuestHouse' } }), () => {\r\n              this.props.loadStays(filterBy)\r\n\r\n            });\r\n          }}\r\n\r\n          >\r\n\r\n            GuestHouse\r\n          </li> */}\r\n\r\n\r\n        </ul>\r\n\r\n      </div>\r\n\r\n    );\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    stays: state.stayModule.stays,\r\n    filterBy: state.stayModule.filterBy,\r\n    modalPos: state.pageModule.modalPos\r\n  };\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n  loadStays\r\n};\r\n\r\nexport const DropDownPropertyType = connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(_DropDownPropertyType);","import React, { isValidElement } from 'react';\r\nimport { loadStays } from \"../store/stay.actions.js\";\r\nimport { Link } from 'react-router-dom';\r\nimport { connect } from \"react-redux\";\r\nclass _DropDownAmenities extends React.Component {\r\n  state = {\r\n    // filterBy: {\r\n    //   amenities: []\r\n    // },\r\n    TV: false,\r\n    Wifi: false,\r\n    Kitchen:false,\r\n    'Pets allowed': false,\r\n    'Cooking basics': false,\r\n    'Smoking allowed': false\r\n  };\r\n\r\n  // toggleAmenity = () => {\r\n  //   const {isTV, isWifi, isKitchen, isPetsAllowed, isCookingBasics, isSmokingAllowed } = this.state\r\n  //   const amenities = []\r\n    \r\n\r\n  // }\r\n\r\n\r\n  render() {\r\n    // const { stays } = this.props;\r\n    \r\n    const {TV, Wifi, Kitchen } = this.state\r\n    const { left } = this.props.modalPos;\r\n    return (\r\n      <div className='drop-down-amenity' style={{ left }}>\r\n        <ul >\r\n          <li className={`li-type-item ${TV && 'amenity-active'}`} onClick={() => {\r\n                    this.setState({\r\n                      TV: !this.state.TV\r\n                    }, ()=>{this.props.onSetFrontFilter('amenities' ,this.state)});\r\n                  }}\r\n          >\r\n            TV\r\n\r\n          </li>\r\n          <li className={`li-type-item ${Wifi && 'amenity-active'}`} onClick={() => {\r\n                    this.setState({\r\n                      Wifi: !this.state.Wifi\r\n                    }, ()=>{this.props.onSetFrontFilter('amenities',this.state)});\r\n                  }}\r\n          >\r\n            Wifi\r\n\r\n          </li>\r\n          <li className={`li-type-item ${Kitchen && 'amenity-active'}`} onClick={() => {\r\n                    this.setState({\r\n                      Kitchen: !this.state.Kitchen\r\n                    }, ()=>{this.props.onSetFrontFilter('amenities', this.state)});\r\n                  }}\r\n          >\r\n           Kitchen\r\n\r\n          </li>\r\n          <li className={`li-type-item ${this.state['Pets allowed'] && 'amenity-active'}`} onClick={() => {\r\n                    this.setState({\r\n                      'Pets allowed': !this.state['Pets allowed']\r\n                    }, ()=>{this.props.onSetFrontFilter('amenities', this.state)});\r\n                  }}\r\n          >\r\n            Pets allowed\r\n\r\n          </li>\r\n          <li className={`li-type-item ${this.state['Cooking basics'] && 'amenity-active'}`} onClick={() => {\r\n                    this.setState({\r\n                      'Cooking basics': !this.state['Cooking basics']\r\n                    }, ()=>{this.props.onSetFrontFilter('amenities', this.state)});\r\n                  }}\r\n          >\r\n            Cooking basics\r\n\r\n          </li>\r\n          <li className={`li-type-item ${this.state['Smoking allowed'] && 'amenity-active'}`} onClick={() => {\r\n                    this.setState({\r\n                      'Smoking allowed': !this.state['Smoking allowed']\r\n                    }, ()=>{this.props.onSetFrontFilter('amenities',this.state)});\r\n                  }}\r\n          >\r\n           Smoking allowed\r\n\r\n          </li>\r\n\r\n\r\n        </ul>\r\n\r\n      </div>\r\n\r\n    );\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    stays: state.stayModule.stays,\r\n    filterBy: state.stayModule.filterBy,\r\n    modalPos: state.pageModule.modalPos,\r\n  };\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n  loadStays\r\n};\r\n\r\nexport const DropDownAmenities = connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(_DropDownAmenities);","\r\n\r\nimport * as React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Slider, { SliderThumb } from '@mui/material/Slider';\r\nimport { styled } from '@mui/material/styles';\r\nimport Typography from '@mui/material/Typography';\r\nimport Tooltip from '@mui/material/Tooltip';\r\nimport Box from '@mui/material/Box';\r\n\r\n// function ValueLabelComponent(props) {\r\n//   const { children, value } = props;\r\n// console.log('children, value', children, value);\r\n//   return (\r\n//     <Tooltip enterTouchDelay={0} placement=\"top\" title={value}>\r\n//       {children}\r\n//     </Tooltip>\r\n//   );\r\n// }\r\n\r\n// ValueLabelComponent.propTypes = {\r\n//   children: PropTypes.element.isRequired,\r\n//   value: PropTypes.number.isRequired,\r\n// };\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst AirbnbSlider = styled(Slider)(({ theme }) => ({\r\n  color: '#3a8589',\r\n  height: 3,\r\n  padding: '13px 0',\r\n  '& .MuiSlider-thumb': {\r\n    height: 27,\r\n    width: 27,\r\n    backgroundColor: '#fff',\r\n    border: '1px solid currentColor',\r\n    '&:hover': {\r\n      boxShadow: '0 0 0 8px rgba(58, 133, 137, 0.16)',\r\n    },\r\n    '& .airbnb-bar': {\r\n      height: 9,\r\n      width: 1,\r\n      backgroundColor: 'currentColor',\r\n      marginLeft: 1,\r\n      marginRight: 1,\r\n    },\r\n  },\r\n  '& .MuiSlider-track': {\r\n    height: 3,\r\n  },\r\n  '& .MuiSlider-rail': {\r\n    color: theme.palette.mode === 'dark' ? '#bfbfbf' : '#d8d8d8',\r\n    opacity: theme.palette.mode === 'dark' ? undefined : 1,\r\n    height: 3,\r\n  },\r\n}));\r\n\r\nfunction AirbnbThumbComponent(props) {\r\n  // console.log('props in AirbnbThumbComponent', props);\r\n  const { children, ...other } = props;\r\n  return (\r\n    <SliderThumb {...other}>\r\n      {children}\r\n      <span className=\"airbnb-bar\" />\r\n      <span className=\"airbnb-bar\" />\r\n      <span className=\"airbnb-bar\" />\r\n    </SliderThumb>\r\n  );\r\n}\r\n\r\nAirbnbThumbComponent.propTypes = {\r\n  children: PropTypes.node,\r\n};\r\n\r\nexport class PriceSlider extends React.Component {\r\n  // console.log('props in PriceSlider', props);\r\n  render() {\r\n    return (\r\n      <Box sx={{ width: 320 }}>\r\n\r\n        <Box sx={{ m: 2 }} />\r\n        <Typography gutterBottom>Price</Typography>\r\n        <AirbnbSlider\r\n          components={{ Thumb: AirbnbThumbComponent }}\r\n          getAriaLabel={(index) => (index === 0 ? 'Minimum price' : 'Maximum price')}\r\n          defaultValue={[50, 1920]}\r\n          onChange={this.props.handleChange}\r\n          min={0}\r\n          max={2000}\r\n        />\r\n      </Box>\r\n    );\r\n  }\r\n}","import React from 'react';\r\nimport { loadStays } from \"../store/stay.actions.js\";\r\nimport { Link } from 'react-router-dom';\r\nimport { connect } from \"react-redux\";\r\nimport {PriceSlider} from './PriceSlider.jsx';\r\nclass _DropDownStayPrice extends React.Component {\r\n  state = {\r\n    price:[200, 500],\r\n    valuetext:'0',\r\n    minPrice:50,\r\n    maxPrice:1920\r\n    // filterBy: {\r\n    //   price: ''\r\n    // }\r\n  };\r\n\r\n\r\n  handleChange = (ev) => {\r\n        // console.log('state in the start of handle change', this.state);\r\n        // console.log('event in the start of handle change', ev);\r\n       const minPrice = ev.target.value[0]\r\n       const maxPrice = ev.target.value[1]\r\n       this.setState({minPrice}, ()=>{\r\n\r\n         this.props.onSetFrontFilter('price', {minPrice, maxPrice})\r\n       })\r\n\r\n       this.setState({maxPrice}, ()=>{\r\n\r\n        this.props.onSetFrontFilter('price', {minPrice, maxPrice})\r\n        })\r\n        // const field = ev.target.name;\r\n        // const value = ev.target.value;\r\n        // console.log('ev.target.value', ev.target.value);\r\n        // console.log('ev.target.value-min', ev.target.value[0]);\r\n        // console.log('ev.target.value-max', ev.target.value[1]);\r\n        // this.setState({ ...this.state, [field]: value });\r\n        // console.log('state in the end of handle change', this.state);\r\n      };\r\n  \r\n\r\n  render() {\r\n    // const { stays} = this.props;\r\n    const { filterBy, price, valuetext} = this.state\r\n    const { left } = this.props.modalPos;\r\n    return (\r\n      <div className='drop-down-stay-price'  style={{ left }}>\r\n\r\n        <PriceSlider \r\n        // value={[100, 500]}\r\n         min={this.state.minPrice}\r\n         max={this.state.maxPrice}\r\n        // getAriaLabel={() => 'Minimum distance'}\r\n        value={price}\r\n        handleChange={this.handleChange}\r\n        // valueLabelDisplay=\"auto\"\r\n        // getAriaValueText={valuetext}\r\n        // disableSwap\r\n        // defaultValue={30}\r\n        \r\n        />\r\n        <div className='price-range price-min'>min price: ${this.state.minPrice} </div>\r\n        <div  className='price-range price-max'>max price: ${this.state.maxPrice}</div>\r\n\r\n      </div>\r\n\r\n    );\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    stays: state.stayModule.stays,\r\n    filterBy: state.stayModule.filterBy,\r\n    modalPos: state.pageModule.modalPos,\r\n  };\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n  loadStays\r\n};\r\n\r\nexport const DropDownStayPrice = connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(_DropDownStayPrice);","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { StayList } from '../cmps/StayList';\r\nimport { loadStays, filterStays } from '../store/stay.actions.js';\r\nimport { changePage, setModalPos } from '../store/page.actions.js';\r\nimport { DateRange } from '../cmps/DateRange';\r\nimport { Loader } from '../cmps/Loader';\r\nimport { DropDownStayType } from '../cmps/DropDownStayType';\r\nimport { DropDownPropertyType } from '../cmps/DropDownPropertyType';\r\nimport { DropDownAmenities } from '../cmps/DropDownAmenities';\r\nimport { DropDownStayPrice } from '../cmps/DropDownStayPrice';\r\nimport { stayService } from '../services/stay.service';\r\n\r\nclass _ExplorePage extends React.Component {\r\n  state = {\r\n    stays: [],\r\n    filterBy: {\r\n      city: '',\r\n      // type: '',\r\n      // propertyType: '',\r\n      // price: ''\r\n    },\r\n    frontFilter: {},\r\n\r\n    bottom: null,\r\n    left: null,\r\n    isStayTypeShown: false,\r\n    isPropertyTypeShown: false,\r\n    isAmenitiesShown: false,\r\n    isDropDownPriceShown: false,\r\n    isLoaded: false,\r\n  };\r\n\r\n  async componentDidMount() {\r\n\r\n\r\n    window.scrollTo(0, 0);\r\n    this.props.changePage('explore');\r\n    const city = this.urlParamCity;\r\n\r\n    // await this.props.loadStays(city);\r\n    const filterBy = { city: city };//city filter\r\n    await this.props.loadStays(filterBy);\r\n\r\n    this.setState((prevstate) => ({\r\n      isLoaded: true,\r\n      filterBy: { ...prevstate.filterBy, city },\r\n    }));\r\n    const { stays } = this.props;\r\n    this.setState({ stays });\r\n    this.onClearFrontFilter();\r\n  }\r\n\r\n  get urlParamCity() {\r\n    console.log('this.props.location.search', this.props.location);\r\n    const urlSrcPrm = new URLSearchParams(this.props.location.search);\r\n    return urlSrcPrm.get('city');\r\n    // return urlSrcPrm.get('city, checkIn, checkOut');\r\n  }\r\n  staysToDisplay = () => {\r\n    // const { stays } = this.props;\r\n    const { stays } = this.state;\r\n    const city = this.urlParamCity;\r\n    if (!city) return stays;\r\n    this.props.loadStays(city);\r\n  };\r\n\r\n  onFilterBy = () => {\r\n    const { city } = this.state.filterBy;\r\n    this.setState((prevstate) => ({\r\n      isLoaded: true,\r\n      filterBy: { ...prevstate.filterBy, city },\r\n    }));\r\n  };\r\n\r\n\r\n\r\n  onSetFrontFilter = (filterKey, value) => {\r\n    console.log('onSetFrontFilter');\r\n    console.log('filterKey:', filterKey);\r\n    console.log('value:', value);\r\n    this.setState({ ...this.state, stays: this.props.stays })\r\n    const { stays, frontFilter } = this.state;\r\n    if (frontFilter[filterKey] === value) value = ''\r\n    \r\n    this.setState({ frontFilter: { ...this.state.frontFilter, [filterKey]: value } },\r\n      () => {\r\n        console.log('frontFilter in onSetFrontFilter', frontFilter);\r\n        const staysToDisplay = stayService.queryFront(this.props.stays, this.state.frontFilter)\r\n        console.log('staysToDisplay: ', staysToDisplay);\r\n        this.setState({ ...this.state, stays: staysToDisplay }, () => {\r\n        })\r\n\r\n      }\r\n    )\r\n\r\n  }\r\n\r\n  onClearFrontFilter = () => {\r\n    console.log('onClearFrontFilter');\r\n    this.setState({\r\n      frontFilter: {\r\n        stayType: '',\r\n        type: '',\r\n        price: {\r\n          min: 0,\r\n          max: Infinity\r\n        },\r\n        amenities: {\r\n          \"TV\": false,\r\n          \"Wifi\": false,\r\n          \"Kitchen\": false,\r\n          \"Pets allowed\": false,\r\n          \"Cooking basics\": false,\r\n          \"Smoking allowed\": false\r\n\r\n        }\r\n      }\r\n    })\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.setState({ isLoaded: false });\r\n  }\r\n\r\n  onChange = (ranges) => {\r\n    alert('changed check the console log');\r\n    console.log(ranges);\r\n  };\r\n\r\n  render() {\r\n    // const { stays } = this.props;\r\n    const { city } = this.state.filterBy;\r\n    const { stays } = this.state;\r\n    const { bottom, left } = this.state;\r\n    const {\r\n      isSaved,\r\n      isLoaded,\r\n      isStayTypeShown,\r\n      isPropertyTypeShown,\r\n      isAmenitiesShown,\r\n      isDropDownPriceShown\r\n    } = this.state;\r\n    if(!stays||!stays.length) return  <Loader />\r\n    // if (!isLoaded || !this.props.stays.length) return <Loader />;\r\n    return (\r\n      <section className='explore-page main-container'>\r\n        <p className='stays-num'>{stays.length} stays</p>\r\n        {city? <h1>Stays in <span className=\"city-title\">{city}</span></h1>: <h1>Find a place to stay </h1>}\r\n        <section className='stay-filter'>\r\n          <button\r\n            onClick={(ev) => {\r\n              const { left } = ev.target.getBoundingClientRect()\r\n              this.props.setModalPos({ left })\r\n              console.log(ev.target.getBoundingClientRect()\r\n              );\r\n              this.setState({\r\n                isStayTypeShown: !isStayTypeShown,\r\n              });\r\n            }}\r\n\r\n          >\r\n            Type of place\r\n          </button>\r\n          {isStayTypeShown && <DropDownStayType onSetFrontFilter={this.onSetFrontFilter} />}\r\n          <button\r\n            onClick={(ev) => {\r\n              const { left } = ev.target.getBoundingClientRect()\r\n              this.props.setModalPos({ left })\r\n              console.log(ev.target.getBoundingClientRect()\r\n\r\n              );\r\n              this.setState({\r\n                isPropertyTypeShown: !isPropertyTypeShown,\r\n              });\r\n            }}\r\n          >\r\n            Property type\r\n          </button>\r\n          {isPropertyTypeShown && <DropDownPropertyType onSetFrontFilter={this.onSetFrontFilter} />}\r\n          <button\r\n            onClick={(ev) => {\r\n              const { left } = ev.target.getBoundingClientRect()\r\n              this.props.setModalPos({ left })\r\n              this.setState({\r\n                isDropDownPriceShown: !isDropDownPriceShown,\r\n              });\r\n            }}\r\n\r\n          >Price</button>\r\n          {isDropDownPriceShown && <DropDownStayPrice onSetFrontFilter={this.onSetFrontFilter}/>}\r\n          <button\r\n            onClick={(ev) => {\r\n              const { left } = ev.target.getBoundingClientRect()\r\n              this.props.setModalPos({ left })\r\n              this.setState({\r\n                isAmenitiesShown: !isAmenitiesShown,\r\n              });\r\n            }}\r\n          >\r\n            Amenities\r\n          </button>\r\n          {isAmenitiesShown && <DropDownAmenities onSetFrontFilter={this.onSetFrontFilter} />}\r\n          <button\r\n            onClick={() => {\r\n              this.setState({ ...this.state, stays: this.props.stays })\r\n              // this.onClearFrontFilter()\r\n              // const filterBy = {};\r\n              // this.props.loadStays(this.state.filterBy);\r\n            }}\r\n          >\r\n            Clear\r\n          </button>\r\n        </section>\r\n        <StayList stays={stays} />\r\n      </section>\r\n    );\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    stays: state.stayModule.stays,\r\n    filterBy: state.stayModule.filterBy,\r\n  };\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n  loadStays,\r\n  filterStays,\r\n  changePage,\r\n  setModalPos\r\n};\r\n\r\nexport const ExplorePage = connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(_ExplorePage);\r\n","import { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { onLogin, onSignup, onUpdateUser} from '../store/user.actions';\r\nimport { changePage } from '../store/page.actions.js';\r\nimport {socketService} from '../services/socket.service'\r\nimport {utilService} from '../services/util.service'\r\n\r\n// import { showErrorMsg } from '../services/event-bus.service.js';\r\n// import { Formik, Form, Field, ErrorMessage } from 'formik';\r\n// import { Button, TextField } from '@material-ui/core';\r\n\r\nclass _LoginPage extends Component {\r\n  state = {\r\n    credentials: {\r\n      username: '',\r\n      password: '',\r\n      email: '',\r\n      fullname: '',\r\n      savedStays: [],\r\n    },\r\n    isSignup: false,\r\n  };\r\n  componentDidMount() {\r\n    window.scrollTo(0, 0);\r\n    this.props.changePage('login');\r\n\r\n    if (this.props.user) this.props.history.push('/');\r\n  }\r\n\r\n  toggleSignup = () => {\r\n    this.setState({ isSignup: !this.state.isSignup });\r\n  };\r\n\r\n  handleChange = (ev) => {\r\n    const field = ev.target.name;\r\n    const value = ev.target.value;\r\n    this.setState({\r\n      credentials: { ...this.state.credentials, [field]: value },\r\n    });\r\n  };\r\n\r\n  clearState = () => {\r\n    const clearTemplate = {\r\n      credentials: {\r\n        username: '',\r\n        password: '',\r\n        fullname: '',\r\n      },\r\n      isSignup: false,\r\n    };\r\n    this.setState({ clearTemplate });\r\n  };\r\n\r\n  onLogin = async (ev = null) => {\r\n    if (ev) {\r\n      ev.preventDefault();\r\n    }\r\n    if (!this.state.credentials.username || !this.state.credentials.password) {\r\n      return;\r\n    }\r\n    try {\r\n      let user = await this.props.onLogin(this.state.credentials);\r\n      if(user.isHost){\r\n        socketService.setup();\r\n        socketService.emit(\"setHost\", user._id);\r\n        socketService.on(\"setNotification\", async(msg) => {\r\n          console.log(\"msg host\", msg);\r\n          user={...user, savedNotifications:[...user.savedNotifications,{ date: utilService.formattedDates(Date.now()), msg ,isRead:false}]}\r\n          console.log('user after socket: ' , user);\r\n          this.props.onUpdateUser(user)\r\n        });\r\n        }\r\n      if (user) {\r\n        this.props.history.push('/');\r\n      }\r\n    } catch (err) {\r\n      console.log('error:', err);\r\n    }\r\n    this.clearState();\r\n  };\r\n\r\n  onSignup = (ev = null) => {\r\n    if (\r\n      !this.state.credentials.username ||\r\n      !this.state.credentials.password ||\r\n      !this.state.credentials.fullname\r\n    )\r\n      return;\r\n    if (ev) ev.preventDefault();\r\n    try {\r\n      const user = this.props.onSignup(this.state.credentials);\r\n      if (user) this.props.history.push('/');\r\n    } catch (err) {\r\n      console.log('error:', err);\r\n    }\r\n    this.clearState();\r\n  };\r\n\r\n  render() {\r\n    const { username, fullname, password, email, isSignup } = this.state;\r\n    return (\r\n      <section className='login-page main-container'>\r\n        <div className='login-page-container'>\r\n          {!isSignup && (\r\n            <div className='login-form-container'>\r\n              <form className='login-form' onSubmit={this.onLogin}>\r\n                <div className='login-header'>\r\n                  <h2>Log in</h2>\r\n                </div>\r\n                <div className='login-content'>\r\n                  <h1>Welcome back</h1>\r\n                  <input\r\n                    className='login-form-input'\r\n                    type='text'\r\n                    name='username'\r\n                    placeholder='Username'\r\n                    autoComplete='off'\r\n                    value={username}\r\n                    onChange={this.handleChange}\r\n                    required\r\n                  />\r\n                  <input\r\n                    className='login-form-input'\r\n                    type='password'\r\n                    name='password'\r\n                    placeholder='Password'\r\n                    autoComplete='off'\r\n                    value={password}\r\n                    onChange={this.handleChange}\r\n                    required\r\n                  />\r\n                  <button type='submit' className='login-btn'>\r\n                    submit\r\n                  </button>\r\n                </div>\r\n                <div className='login-form-actions'>\r\n                  <button onClick={this.toggleSignup}>New User?</button>\r\n                  <button>Forgot Password?</button>\r\n                </div>\r\n              </form>\r\n            </div>\r\n          )}\r\n          {isSignup && (\r\n            <div className='login-form-container'>\r\n              <form className='login-form' onSubmit={this.onSignup}>\r\n                <div className='login-header'>\r\n                  <h2>Log in</h2>\r\n                </div>\r\n                <div className='login-content'>\r\n                  <h1>Welcome to Travel & Live</h1>\r\n                  <input\r\n                    className='login-form-input'\r\n                    type='text'\r\n                    name='fullname'\r\n                    placeholder='Full name'\r\n                    autoComplete='off'\r\n                    value={fullname}\r\n                    onChange={this.handleChange}\r\n                    required\r\n                  />\r\n                  <input\r\n                    className='login-form-input'\r\n                    type='password'\r\n                    name='password'\r\n                    placeholder='Password'\r\n                    autoComplete='off'\r\n                    value={password}\r\n                    onChange={this.handleChange}\r\n                    required\r\n                  />\r\n                  <input\r\n                    className='login-form-input'\r\n                    type='text'\r\n                    name='username'\r\n                    placeholder='Username'\r\n                    autoComplete='off'\r\n                    value={username}\r\n                    onChange={this.handleChange}\r\n                    required\r\n                  />\r\n                  <input\r\n                    className='login-form-input'\r\n                    type='email'\r\n                    name='email'\r\n                    placeholder='Email'\r\n                    autoComplete='off'\r\n                    value={email}\r\n                    onChange={this.handleChange}\r\n                    required\r\n                  />\r\n                  <button type='submit' className='login-btn'>\r\n                    sign up\r\n                  </button>\r\n                </div>\r\n                <div className='login-form-actions'>\r\n                  <button onClick={this.toggleSignup}>\r\n                    I already have an account\r\n                  </button>\r\n                </div>\r\n              </form>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </section>\r\n    );\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    user: state.userModule.user,\r\n  };\r\n}\r\nconst mapDispatchToProps = {\r\n  onLogin,\r\n  onSignup,\r\n  changePage,\r\n  onUpdateUser\r\n};\r\n\r\nexport const LoginPage = connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(_LoginPage);\r\n","import { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { onUpdateUser, getCurrentUser } from '../store/user.actions';\r\nimport { changePage } from '../store/page.actions.js';\r\n\r\nclass _AccountPage extends Component {\r\n  state = {\r\n    credentials: {\r\n      username: '',\r\n      fullname: '',\r\n      email: '',\r\n      imgUrl: '',\r\n    },\r\n    isEdit: false,\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.props.changePage('details');\r\n    window.scrollTo(0, 0);\r\n    const { user } = this.props;\r\n    if (!user) this.props.history.push('/');\r\n    this.setState({ credentials: user });\r\n  }\r\n\r\n  handleChange = (ev) => {\r\n    const field = ev.target.name;\r\n    const value = ev.target.value;\r\n    this.setState({\r\n      credentials: { ...this.state.credentials, [field]: value },\r\n    });\r\n  };\r\n\r\n  toggleEdit = () => {\r\n    const { isEdit } = this.state;\r\n    this.setState({ isEdit: !isEdit });\r\n    if (isEdit) this.onSave();\r\n  };\r\n\r\n  onSave = () => {\r\n    this.props.onUpdateUser(this.state.credentials);\r\n  };\r\n\r\n  render() {\r\n    const { isEdit } = this.state;\r\n    const { username, fullname, email, imgUrl } = this.state.credentials;\r\n    return (\r\n      <section className='account-info-page main-container'>\r\n        <h1>Personal info</h1>\r\n        <div className='user-details'>\r\n          {!isEdit && (\r\n            <div className='user-details-content'>\r\n              <div className='user-details-header'>\r\n                <img src={imgUrl} />\r\n                <div>\r\n                  <h4>Hello {fullname}</h4>\r\n                  <p>It's nice to have you with us</p>\r\n                </div>\r\n              </div>\r\n              <div className='user-info'>\r\n                <h4>Full Name</h4>\r\n                <p>{fullname}</p>\r\n              </div>\r\n              <div className='user-info'>\r\n                <h4>Username</h4>\r\n                <p>{username}</p>\r\n              </div>\r\n              <div className='user-info'>\r\n                <h4>Email</h4>\r\n                <p>{email}</p>\r\n              </div>\r\n              <button onClick={this.toggleEdit}>Edit</button>\r\n            </div>\r\n          )}\r\n\r\n          {isEdit && (\r\n            <div className='user-details-content'>\r\n              <div className='user-details-header'>\r\n                <img src={imgUrl} />\r\n                <div>\r\n                  <h4>Hello {fullname}</h4>\r\n                  <p>It's nice to have you with us</p>\r\n                </div>\r\n              </div>\r\n              <div className='user-info'>\r\n                <h4>Full Name</h4>\r\n                <p>\r\n                  <input\r\n                    type='text'\r\n                    name='fullname'\r\n                    placeholder='Full name'\r\n                    autoComplete='off'\r\n                    value={fullname}\r\n                    onChange={this.handleChange}\r\n                    required\r\n                  />\r\n                </p>\r\n              </div>\r\n              <div className='user-info'>\r\n                <h4>Username</h4>\r\n                <p>\r\n                  <input\r\n                    type='text'\r\n                    name='username'\r\n                    placeholder='Username'\r\n                    autoComplete='off'\r\n                    value={username}\r\n                    onChange={this.handleChange}\r\n                    required\r\n                  />\r\n                </p>\r\n              </div>\r\n              <div className='user-info'>\r\n                <h4>Email</h4>\r\n                <p>\r\n                  <input\r\n                    type='email'\r\n                    name='email'\r\n                    placeholder='Email'\r\n                    autoComplete='off'\r\n                    value={email}\r\n                    onChange={this.handleChange}\r\n                    required\r\n                  />\r\n                </p>\r\n              </div>\r\n              <button onClick={this.toggleEdit}>save</button>\r\n            </div>\r\n          )}\r\n\r\n          <div className='info-container'>\r\n            <div>\r\n              <img\r\n                src={\r\n                  'https://home-and-go.herokuapp.com/static/media/user-lock.b5a4d298.PNG'\r\n                }\r\n              />\r\n              <h3>Which details can be edited?</h3>\r\n              <p>\r\n                Details Airbnb uses to verify your identity can’t be changed.\r\n                Contact info and some personal details can be edited, but we may\r\n                ask you verify your identity the next time you book or create a\r\n                listing.\r\n              </p>\r\n            </div>\r\n            <div>\r\n              <img\r\n                src={\r\n                  'https://home-and-go.herokuapp.com/static/media/user-card.45d2a01a.PNG'\r\n                }\r\n              />\r\n              <h3>What info is shared with others?</h3>\r\n              <p>\r\n                Airbnb only releases contact information for hosts and guests\r\n                after a reservation is confirmed.\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </section>\r\n    );\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    user: state.userModule.user,\r\n  };\r\n}\r\nconst mapDispatchToProps = {\r\n  onUpdateUser,\r\n  getCurrentUser,\r\n  changePage,\r\n};\r\n\r\nexport const AccountPage = connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(_AccountPage);\r\n","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { onRemoveStay } from '../store/stay.actions';\r\n\r\nexport function _HostStayList({ stays, onEditStay, onRemoveStay, userId }) {\r\n  stays = stays.filter((stay) => {\r\n    return stay.host._id === userId;\r\n  });\r\n  console.log('stays in hostliststsays', stays);\r\n\r\n  return (\r\n    <div className='host-stay-list'>\r\n      <table>\r\n        <thead>\r\n          <th>Name</th>\r\n          <th>Type</th>\r\n          <th>Price</th>\r\n          <th>Actions</th>\r\n        </thead>\r\n        {stays.map((stay) => (\r\n          <tr>\r\n            <td>{stay.title}</td>\r\n            <td>{stay.type}</td>\r\n            <td>${stay.price}</td>{' '}\r\n            <td>\r\n              <button onClick={() => onRemoveStay(stay._id)}>Delete</button>\r\n              <button onClick={() => onEditStay(stay._id)}>Edit</button>\r\n            </td>\r\n          </tr>\r\n        ))}\r\n      </table>\r\n    </div>\r\n  );\r\n}\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    stays: state.stayModule.stays,\r\n  };\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n  onRemoveStay,\r\n};\r\n\r\nexport const HostStayList = connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(_HostStayList);\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { loadOrders, onUpdateOrder } from \"../store/order.actions\";\r\nimport { Loader } from \"../cmps/Loader\";\r\nimport { userService } from \"../services/user.service\";\r\nimport { socketService } from \"../services/socket.service\";\r\nimport user from \"../data/user\";\r\nclass _HostOrdersList extends React.Component {\r\n  async componentDidMount() {\r\n    const user = await userService.getLoggedinUser();\r\n    const filterBy = {\r\n      userId: null,\r\n      hostId: user._id,\r\n    };\r\n    this.props.loadOrders(user._id, true);\r\n  }\r\n  changeOrderStatus = async (order, status) => {\r\n    await this.props.onUpdateOrder(order, status);\r\n    socketService.emit(\r\n      \"sendMsg\",\r\n      `your order:${order.stay.title} status has change to:${status}`\r\n    );\r\n  };\r\n  formattedDates = (chosenDate) => {\r\n    if (!chosenDate) return \"Add dates\";\r\n    const date = new Date(chosenDate);\r\n    return date.toLocaleDateString(\"en-GB\");\r\n  };\r\n\r\n  getUserImg = async (id) => {\r\n    const user = await userService.getById(id);\r\n    console.log(typeof user.imgUrl);\r\n    return user.imgUrl;\r\n  };\r\n\r\n  render() {\r\n    const { orders } = this.props;\r\n    console.log(\"orders:\", orders);\r\n    return !orders || !orders.length ? (\r\n      <Loader />\r\n    ) : (\r\n      <div className=\"host-orders-list\">\r\n        <table>\r\n          <thead>\r\n            <th>Name</th>\r\n            <th></th>\r\n            <th>Property Name</th>\r\n            <th>Check In</th>\r\n            <th>Check Out</th>\r\n            <th>Status</th>\r\n            <th>Actions</th>\r\n          </thead>\r\n\r\n          {orders.map((order) => (\r\n            <tr>\r\n              <td>{order.user.fullname}</td>\r\n              <td>\r\n                <img className=\"host-orders-img\" src={order.stay.imgUrls[0]} />\r\n              </td>\r\n              <td>{order.stay.title}</td>\r\n              <td>{this.formattedDates(order.checkIn)}</td>\r\n              <td>{this.formattedDates(order.checkOut)}</td>\r\n              <td>\r\n                <span className={order.status}>{order.status}</span>\r\n              </td>{\" \"}\r\n              <td>\r\n                <button\r\n                  className=\"host-accept-btn\"\r\n                  onClick={() => {\r\n                    this.changeOrderStatus(order, \"accepted\");\r\n                  }}\r\n                >\r\n                  Accept\r\n                </button>\r\n                <button\r\n                  className=\"host-decline-btn\"\r\n                  onClick={() => {\r\n                    // this.changeOrderStatus(order._id, 'declined');\r\n                    this.changeOrderStatus(order, \"declined\");\r\n                  }}\r\n                >\r\n                  Decline\r\n                </button>\r\n              </td>\r\n            </tr>\r\n          ))}\r\n        </table>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    orders: state.orderModule.orders,\r\n  };\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n  loadOrders,\r\n  onUpdateOrder,\r\n};\r\n\r\nexport const HostOrdersList = connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(_HostOrdersList);\r\n","import React from 'react';\r\nimport { Pie } from 'react-chartjs-2';\r\n\r\n\r\n\r\nexport const HostCharts = () => {\r\n\r\n    const data = {\r\n        labels: ['✭', '✭✭', '✭✭✭','✭✭✭✭','✭✭✭✭✭'],\r\n        datasets: [\r\n            {\r\n                label: '# of Votes',\r\n                data: [12, 19, 5, 70, 50],\r\n                backgroundColor: [\r\n                    'rgba(255, 99, 132, 0.2)',\r\n                    'rgba(54, 162, 235, 0.2)',\r\n                    'rgba(255, 206, 86, 0.2)',\r\n                    'rgba(55, 206, 86, 0.2)',\r\n                    'rgba(155, 206, 86, 0.2)'\r\n\r\n                ],\r\n                borderColor: [\r\n                    'rgba(255, 99, 132, 1)',\r\n                    'rgba(54, 162, 235, 1)',\r\n                    'rgba(255, 206, 86, 1)',\r\n                    'rgba(55, 206, 86, 0.2)',\r\n                    'rgba(155, 206, 86, 0.2)'\r\n\r\n                ],\r\n                borderWidth: 3\r\n            },\r\n        ],\r\n    };\r\n\r\n\r\n    return (\r\n<div className='host-charts' style={{width:'100%'}} >\r\n\r\n        <Pie data={data}/>\r\n</div>\r\n    )\r\n};\r\n\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { HostCharts } from './HostCharts'\r\n\r\nclass _HostRates extends React.Component {\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"host-rates\">\r\n                <HostCharts />\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    return {\r\n    }\r\n}\r\n\r\nexport const HostRates = connect(mapStateToProps)(_HostRates)","import React from 'react';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { faLongArrowAltUp, faStar } from '@fortawesome/free-solid-svg-icons';\r\nimport { utilService } from '../services/util.service';\r\n\r\nimport { getCurrentUser } from '../store/user.actions';\r\nimport { loadOrders } from '../store/order.actions';\r\nimport user from '../data/user';\r\n\r\nexport class _HostHeader extends React.Component {\r\n  state = {\r\n    earnings: 0,\r\n    totalRate: 0,\r\n  };\r\n\r\n  async componentDidMount() {\r\n    const { user } = this.props;\r\n    // const filterBy = {\r\n    //   userId: null,\r\n    //   hostId: user._id,\r\n    // };\r\n    // await this.props.loadOrders(filterBy);\r\n    await this.props.loadOrders(user._id, true);\r\n\r\n    const earnings = this.getTotalEarnings();\r\n    // const totalRate = this.getTotalRate();\r\n    // totalPrice\r\n    this.setState({ earnings });\r\n  }\r\n\r\n  // getTotalRate = ()=>{\r\n  //   if (!reviews||!reviews.length) return 0;\r\n  //   const average =\r\n  //   reviews.reduce(function (sum, value) {\r\n  //     return sum + value.ratings.avg;\r\n  //   }, 0) / reviews.length;\r\n\r\n  //   return average.toFixed(1);\r\n  // }\r\n\r\n  getTotalEarnings = () => {\r\n    const { orders } = this.props;\r\n    if (!orders || !orders.length) return 0;\r\n    const sum = orders.reduce(function (sum, value) {\r\n      if (!value.totalPrice) return 0;\r\n      return sum + value.totalPrice;\r\n    }, 0);\r\n\r\n    return sum;\r\n  };\r\n\r\n  getRandomNum = () => {\r\n    return utilService.getRandomIntInclusive(1, 5);\r\n  };\r\n\r\n  getAccepted = () => {\r\n    const { orders } = this.props;\r\n    if (!orders || !orders.length) return 0;\r\n    var accepted = orders.filter((order) => {\r\n      return order.status.includes('accepted');\r\n    });\r\n    return accepted.length;\r\n  };\r\n  getDeclined = () => {\r\n    const { orders } = this.props;\r\n    if (!orders || !orders.length) return 0;\r\n    var declined = orders.filter((order) => {\r\n      return order.status.includes('declined');\r\n    });\r\n\r\n    return declined.length;\r\n  };\r\n  getPending = () => {\r\n    const { orders } = this.props;\r\n    if (!orders || !orders.length) return 0;\r\n    var pending = orders.filter((order) => {\r\n      return order.status.includes('pending');\r\n    });\r\n\r\n    return pending.length;\r\n  };\r\n\r\n  getNumOfOrders = () => {\r\n    const { orders } = this.props;\r\n    if (!orders || !orders.length) return 0;\r\n\r\n    const sum = orders.reduce(function (acc, order) {\r\n      return acc + 1;\r\n    }, 0);\r\n\r\n    return sum;\r\n  };\r\n\r\n  render() {\r\n    const { earnings, totalRate } = this.state;\r\n    return (\r\n      <section className='host-header'>\r\n        <div className='card-item'>\r\n          <p>Average Rate</p>\r\n          <div>\r\n            <span>\r\n              {' '}\r\n              <FontAwesomeIcon className='star' icon={faStar} />\r\n              4.5/5\r\n            </span>\r\n            <span className='percent'>\r\n              {this.getRandomNum()}%\r\n              <FontAwesomeIcon className='arrow' icon={faLongArrowAltUp} />\r\n            </span>\r\n          </div>\r\n        </div>\r\n\r\n        <div className='card-item'>\r\n          <p>Monthly Earnings</p>\r\n          <span>${earnings.toLocaleString()}</span>\r\n        </div>\r\n\r\n        <div className='card-item'>\r\n          <p>Orders</p>\r\n          <div className='reviews-numbers'>\r\n            <span>{this.getNumOfOrders()}</span>\r\n            <div className='reviews-colors-container'>\r\n              <span className='circle green-circle'></span>\r\n              <p>{this.getAccepted()}</p>\r\n              <span className='circle yellow-circle'></span>\r\n              <p>{this.getPending()}</p>\r\n              <span className='circle red-circle'></span>\r\n              <p>{this.getDeclined()}</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </section>\r\n    );\r\n  }\r\n}\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    user: state.userModule.user,\r\n    orders: state.orderModule.orders,\r\n  };\r\n}\r\nconst mapDispatchToProps = {\r\n  getCurrentUser,\r\n\r\n  loadOrders,\r\n};\r\n\r\nexport const HostHeader = connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(_HostHeader);\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { HostStayList } from '../cmps/HostStaysList.jsx';\r\nimport { userService } from '../services/user.service.js';\r\nimport { loadStays } from '../store/stay.actions';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport {\r\n  faHeart,\r\n  faBuilding,\r\n  faMoneyBillAlt,\r\n} from '@fortawesome/free-regular-svg-icons';\r\nimport {\r\n  faBookmark,\r\n  faBookOpen,\r\n  faExternalLinkAlt,\r\n  faHome,\r\n  faMedal,\r\n  faStar,\r\n} from '@fortawesome/free-solid-svg-icons';\r\nimport { changePage } from '../store/page.actions.js';\r\nimport { Loader } from '../cmps/Loader.jsx';\r\nimport { AddStay } from '../cmps/AddStay.jsx';\r\nimport { HostOrdersList } from '../cmps/HostOrdersList.jsx';\r\nimport { HostRates } from '../cmps/HostRates';\r\nimport { HostHeader } from '../cmps/HostHeader.jsx';\r\nclass _HostPage extends React.Component {\r\n  state = {\r\n    add: false,\r\n    places: false,\r\n    orders: false,\r\n    rates: false,\r\n    user: userService.getLoggedinUser(),\r\n    isEdit: false,\r\n    stay: null,\r\n  };\r\n\r\n  ColoredLine = ({ color }) => (\r\n    <hr\r\n      style={{\r\n        color: color,\r\n        backgroundColor: color,\r\n        height: 2,\r\n        width: 100,\r\n      }}\r\n    />\r\n  );\r\n  async componentDidMount() {\r\n    window.scrollTo(0, 0);\r\n    this.props.changePage('host');\r\n    this.props.loadStays();\r\n    const user = await userService.getLoggedinUser();\r\n\r\n    this.setState(user);\r\n    const { stays } = this.props;\r\n    const userStays = stays.filter((stay) => stay.host._id === user._id);\r\n    // if (!userStays || !userStays.length) {\r\n    //   this.changeCmp('add');\r\n    // }\r\n    this.changeCmp('orders');\r\n  }\r\n\r\n  changeCmp = (cmp) => {\r\n    switch (cmp) {\r\n      case 'add':\r\n        this.setState({ add: true });\r\n        this.setState({ places: false });\r\n        this.setState({ orders: false });\r\n        this.setState({ rates: false });\r\n        break;\r\n      case 'places':\r\n        this.setState({ places: true });\r\n        this.setState({ orders: false });\r\n        this.setState({ rates: false });\r\n        this.setState({ add: false });\r\n        break;\r\n      case 'orders':\r\n        this.setState({ orders: true });\r\n        this.setState({ places: false });\r\n        this.setState({ rates: false });\r\n        this.setState({ add: false });\r\n        break;\r\n      case 'rates':\r\n        this.setState({ rates: true });\r\n        this.setState({ orders: false });\r\n        this.setState({ places: false });\r\n        this.setState({ add: false });\r\n        break;\r\n\r\n      default:\r\n        break;\r\n    }\r\n  };\r\n\r\n  onEditStay = (stayId) => {\r\n    const { stays } = this.props;\r\n    const stayToEdit = { ...stays.filter((stay) => stay._id === stayId) };\r\n    this.setState({ isEdit: true, stay: stayToEdit }, () => {\r\n      this.changeCmp('add');\r\n    });\r\n  };\r\n\r\n  render() {\r\n    var { stays } = this.props;\r\n    const { user, isEdit, stay } = this.state;\r\n\r\n    return !stays || !stays.length ? (\r\n      <Loader />\r\n    ) : (\r\n      <section className='host-page main-container'>\r\n        <div className='host-page-container'>\r\n          <div className='nav-side'>\r\n            <div className='actions-line'>\r\n              <div className='icons'>\r\n                <span>\r\n                  <FontAwesomeIcon className='building' icon={faBuilding} />\r\n                </span>\r\n                <span>\r\n                  <FontAwesomeIcon className='home' icon={faHome} />\r\n                </span>\r\n                <span>\r\n                  <FontAwesomeIcon className='open-book' icon={faBookOpen} />\r\n                </span>\r\n                <span>\r\n                  <FontAwesomeIcon className='star' icon={faStar} />\r\n                </span>\r\n              </div>\r\n              <div className='actions'>\r\n                <span>\r\n                  <button onClick={() => this.changeCmp('add')}>\r\n                    Add Place\r\n                  </button>\r\n                </span>\r\n                <span>\r\n                  <button onClick={() => this.changeCmp('places')}>\r\n                    My Places\r\n                  </button>\r\n                </span>\r\n                <span>\r\n                  <button onClick={() => this.changeCmp('orders')}>\r\n                    Orders{' '}\r\n                  </button>\r\n                </span>\r\n                <span>\r\n                  <button onClick={() => this.changeCmp('rates')}>Rates</button>\r\n                </span>\r\n              </div>\r\n            </div>\r\n            <div className='info'>\r\n              <FontAwesomeIcon className='money' icon={faMoneyBillAlt} />\r\n              <h3>Make All Payments Through Travel & Live</h3>\r\n              <p>\r\n                Always pay and communicate through Travel & Live to ensure\r\n                you're protected under our Terms of Service, Payments Terms of\r\n                Service, cancellation, and other safeguards.\r\n              </p>\r\n            </div>\r\n          </div>\r\n          <section className='host-page-content'>\r\n            <HostHeader />\r\n            {this.state.add && (\r\n              <section className='add place'>\r\n                <AddStay isEdit={isEdit} stay={stay} user={user} />\r\n              </section>\r\n            )}\r\n\r\n            {this.state.places && (\r\n              <section className='places'>\r\n                {' '}\r\n                <HostStayList\r\n                  stays={stays}\r\n                  onRemovehost={this.onRemovehost}\r\n                  onEditStay={this.onEditStay}\r\n                  ColoredLine={this.ColoredLine}\r\n                  userId={user._id}\r\n                />\r\n              </section>\r\n            )}\r\n            {this.state.orders && (\r\n              <section className='orders'>\r\n                <HostOrdersList ColoredLine={this.ColoredLine} />\r\n              </section>\r\n            )}\r\n            {this.state.rates && (\r\n              <section className='rates'>\r\n                <HostRates />\r\n              </section>\r\n            )}\r\n            {this.state.rates && <section className='rates'></section>}\r\n          </section>\r\n        </div>\r\n      </section>\r\n    );\r\n  }\r\n}\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    stays: state.stayModule.stays,\r\n  };\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n  loadStays,\r\n  changePage,\r\n};\r\n\r\nexport const HostPage = connect(mapStateToProps, mapDispatchToProps)(_HostPage);\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faStar } from '@fortawesome/free-solid-svg-icons';\r\nimport { faHeart } from '@fortawesome/free-solid-svg-icons';\r\nimport ImgSlider from '../cmps/ImgSlider';\r\nimport { removeStayFromUser } from '../store/user.actions.js';\r\nimport brooklynLoft from '../assets/img/brooklynLoft.jpg';\r\nimport { Link } from 'react-router-dom';\r\nimport { stayService } from '../services/stay.service';\r\nexport class _WishListPreview extends React.Component {\r\n  \r\n  state = {\r\n    userSavedStay: null,\r\n    isSaved: true,\r\n    currStay: null\r\n\r\n  };\r\n\r\n  async componentDidMount() {\r\n    console.log('WishListPreview');\r\n    const { stayId } = this.props\r\n    const currStay = await stayService.getById(stayId)\r\n    this.setState({currStay})\r\n    console.log('currStay**********************', currStay, stayId );\r\n    this.setState({userSavedStay: currStay}, ()=>{\r\n      console.log('userSavedStay in wishList Preview', this.userSavedStay);\r\n    })\r\n  }\r\n  onRemoveSaveStay = async (ev)=>{\r\n    ev.preventDefault();\r\n    ev.stopPropagation();\r\n    this.setState({ isSaved: !this.state.isSaved });\r\n    // await this.props.removeStayFromUser(this.state.currStay._id);\r\n    await this.props.onRemoveSavedStay(this.state.currStay._id);\r\n  }\r\n\r\n  render() {\r\n    const { userSavedStay, isSaved } = this.state\r\n    if (!userSavedStay) return <h2> </h2>;\r\n    return (\r\n      <div className='wishlist-preview'>\r\n        <div className='inner-wishlist-preview'>\r\n          <button className={`stay-preview-save-btn on`} >\r\n            <FontAwesomeIcon icon={faHeart} />\r\n          </button>\r\n          <ImgSlider stay={userSavedStay} />\r\n          <div className='preview-content'>\r\n\r\n            <span className='stay-rate'>\r\n              <FontAwesomeIcon icon={faStar} />\r\n              {userSavedStay.avgReviewRating && userSavedStay.reviews && (<span className=\"prev-rev-txt\">{userSavedStay.avgReviewRating} ( {userSavedStay.reviews.length} )</span>)}\r\n            </span>\r\n            <p>{userSavedStay.type} ‧ {userSavedStay.city}  </p><p className=\"title-prev\"> {userSavedStay.title}</p>\r\n            <p ><span className=\"price-prev\">${userSavedStay.price}</span> / night</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n    );\r\n  }\r\n}\r\n\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    \r\n  };\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n  removeStayFromUser\r\n};\r\n\r\nexport const WishListPreview = connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(_WishListPreview);","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport { WishListPreview } from './WishListPreview';\r\n\r\nexport function UserWishList({ userSavedStays, onRemoveSavedStay }) {\r\n\r\n    return (\r\n        <div className=\"wish-list\">\r\n           \r\n            {userSavedStays.map((stayId=>   <WishListPreview key={stayId} stayId={stayId} onRemoveSavedStay={onRemoveSavedStay} />))}\r\n           \r\n         </div> \r\n\r\n    )\r\n}","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { StayList } from '../cmps/StayList';\r\nimport { loadStays, filterStays } from '../store/stay.actions.js';\r\nimport { changePage } from '../store/page.actions.js';\r\nimport { DateRange } from '../cmps/DateRange';\r\nimport { userService } from '../services/user.service';\r\nimport { loadStaysFromUser } from '../store/user.actions';\r\nimport { UserWishList } from '../cmps/UserWishList';\r\nimport { removeStayFromUser } from '../store/user.actions';\r\n\r\nclass _WishListPage extends React.Component {\r\n  state = {\r\n    userSavedStays: [],\r\n  };\r\n\r\n  async componentDidMount() {\r\n    window.scrollTo(0, 0);\r\n    const { savedStays } = this.props;\r\n    this.setState({userSavedStays: savedStays})\r\n    const user = await userService.getLoggedinUser();\r\n    if (!user) {\r\n      this.props.history.push('/');\r\n      return;\r\n    }\r\n\r\n    const userSavedStays = await this.props.loadStaysFromUser();\r\n    this.setState({ userSavedStays: userSavedStays }, () => {\r\n      \r\n    });\r\n  }\r\n\r\n  onRemoveSavedStay = async (stayId) => {\r\n    this.props.removeStayFromUser(stayId);\r\n    // const user = await userService.getLoggedinUser();\r\n    const userSavedStays = await this.props.loadStaysFromUser();\r\n    console.log('userSavedStays in onRemoveSavedStay', userSavedStays);\r\n    this.setState({ userSavedStays: userSavedStays }, () => {\r\n      \r\n    });\r\n  };\r\n\r\n  render() {\r\n    // const { savedStays } = this.props;\r\n    const { userSavedStays } = this.state;\r\n    if (!userSavedStays) return <h2>loading...</h2>;\r\n\r\n    return (\r\n      <section className='wishlist-page main-container'>\r\n        <h1>Wish List</h1>\r\n        <UserWishList userSavedStays={userSavedStays} onRemoveSavedStay={this.onRemoveSavedStay} />\r\n      </section>\r\n    );\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    savedStays: state.userModule.savedStays,\r\n  };\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n  loadStays,\r\n  filterStays,\r\n  changePage,\r\n  loadStaysFromUser,\r\n  removeStayFromUser\r\n};\r\n\r\nexport const WishListPage = connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(_WishListPage);\r\n","import React from 'react';\r\nimport { Link, NavLink } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { changePage } from '../store/page.actions.js';\r\nimport { onUpdateUser, getCurrentUser } from '../store/user.actions';\r\n\r\nimport { userService } from '../services/user.service.js';\r\n\r\nclass _BecomeHost extends React.Component {\r\n  componentDidMount() {\r\n    window.scrollTo(0, 0);\r\n    this.props.changePage('become-host');\r\n  }\r\n\r\n  handleClick = () => {\r\n    const user = userService.getLoggedinUser();\r\n    if (!user) {\r\n      this.props.history.push(`/login`);\r\n    }\r\n    user.isHost = true;\r\n    this.props.onUpdateUser(user);\r\n    this.props.history.push(`/host/${user._id}`);\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <section className='become-host'>\r\n        <div className='become-txt'>\r\n          <div className='txt'>\r\n            <h1>Hosting</h1> \r\n            <h1>makes Travel & Live,</h1>\r\n            <h1> Travel & Live</h1> \r\n            <button onClick={this.handleClick}>Try hosting</button>\r\n          </div>\r\n        </div>\r\n        <div className='become-img'>\r\n          <img\r\n            src='https://res.cloudinary.com/dohqnraie/image/upload/v1633436517/airbnb-host-greeting-guest_matj9w.jpg'\r\n            alt=''\r\n          />\r\n        </div>\r\n      </section>\r\n    );\r\n  }\r\n}\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    stays: state.stayModule.stays,\r\n    user: state.userModule.user,\r\n  };\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n  changePage,\r\n  onUpdateUser,\r\n};\r\n\r\nexport const BecomeHost = connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(_BecomeHost);\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\n// import { setNotifications,setNotificationNum } from '../store/notification.actions.js';\r\nimport { changePage } from \"../store/page.actions.js\";\r\nimport { onUpdateUser } from \"../store/user.actions.js\";\r\nimport { getLoggedinUser, userService } from \"../services/user.service\";\r\nimport { Loader } from \"../cmps/Loader.jsx\";\r\nimport { render } from \"@testing-library/react\";\r\n\r\nclass _Notifications extends React.Component {\r\n  async componentDidMount() {\r\n    this.props.changePage(\"notifications\");\r\n    console.log(\"user in notifi\", this.props.user);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    let { user } = this.props;\r\n    if(!user)return\r\n    // user={...user.savedNotifications, savedNotifications:[...user.savedNotifications.map,{isRead:true}]}\r\n    user.savedNotifcations = user.savedNotifications.map(notification =>{\r\n      notification.isRead = true;\r\n      return notification\r\n    })\r\n    \r\n    this.props.onUpdateUser(user) \r\n    ;\r\n  }\r\n  render() {\r\n    const { user } = this.props;\r\n    if (!user) return <Loader />;\r\n    const { savedNotifications } = user;\r\n    if (!savedNotifications || !savedNotifications.length) return <Loader />;\r\n    return (\r\n      <section className=\"notifications main-container\">\r\n        <h1>Notifications</h1>\r\n        {savedNotifications.map((notification) => (\r\n          <div className=\"notifi\">\r\n            <img\r\n              src=\"https://forakyafrica-drilling.com/wp-content/uploads/2020/12/man-300x300-1.png\"\r\n              alt=\"\"\r\n            />\r\n            <div className=\"notifi-txt\">\r\n              <p className={!notification.isRead?'notRead':''}>{notification.msg}</p>\r\n              <p>{notification.date}</p>\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </section>\r\n    );\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    user: state.userModule.user,\r\n  };\r\n}\r\nconst mapDispatchToProps = {\r\n  changePage,\r\n  onUpdateUser};\r\n\r\nexport const Notifications = connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(_Notifications);\r\n","import { HomePage } from './pages/HomePage.jsx';\r\nimport { OrderPage } from './pages/OrderPage.jsx';\r\nimport { StayDetails } from './pages/StayDetails.jsx';\r\nimport { ExplorePage } from './pages/ExplorePage.jsx';\r\nimport { LoginPage } from './pages/LoginPage.jsx';\r\nimport { AccountPage } from './pages/AccountPage.jsx';\r\nimport { HostPage } from './pages/HostPage.jsx';\r\nimport {AddStay} from './cmps/AddStay.jsx'\r\nimport { WishListPage } from './pages/WishListPage.jsx';\r\nimport { BecomeHost } from './pages/BecomeHost.jsx';\r\nimport { Notifications } from './cmps/Notifications.jsx';\r\n// Routes accesible from the main navigation (in AppHeader)\r\nconst routes = [\r\n  {\r\n    path: '/',\r\n    component: HomePage,\r\n    label: 'Home',\r\n  },\r\n  {\r\n    path: '/stay',\r\n    component: HomePage,\r\n    label: 'Stays',\r\n  },\r\n  {\r\n    path: '/stay/:stayId',\r\n    component: StayDetails,\r\n    label: 'StayDetails',\r\n  },\r\n  {\r\n    path: '/host',\r\n    component: BecomeHost,\r\n    label: 'Become a Host',\r\n  },\r\n  {\r\n    path: '/host/:userId',\r\n    component: HostPage,\r\n    label: 'Dashboard',\r\n  },\r\n \r\n  {\r\n    path: '/user/:userId',\r\n    component: AccountPage,\r\n    label: 'Account',\r\n  },\r\n  {\r\n    path: '/notifications/:userId',\r\n    component:Notifications,\r\n    label: 'Notification',\r\n  },\r\n  {\r\n    path: '/login',\r\n    component: LoginPage,\r\n    label: 'Login',\r\n  },\r\n  {\r\n    path: '/orders',\r\n    component: OrderPage,\r\n    label: 'Order',\r\n  },\r\n  {\r\n    path: '/explore',\r\n    component: ExplorePage,\r\n    label: 'Explore',\r\n  },\r\n  {\r\n    path: '/wishlist',\r\n    component: WishListPage,\r\n    label: 'WishListPage',\r\n  },\r\n];\r\n\r\nexport default routes;\r\n","import React from 'react';\r\n\r\nimport { Link } from 'react-router-dom';\r\nexport class DropDownCity extends React.Component {\r\n    state = {\r\n        // locSearch: ''\r\n        city:''\r\n    };\r\n    componentDidMount() {\r\n      \r\n    }\r\n\r\n\r\n    render() {\r\n        const {addCityToSearch} = this.props\r\n        const {city} = this.state\r\n  return (\r\n    <div className='drop-down-city'>\r\n        <ul >\r\n                <li className='li-city-item'>\r\n                  <img src='https://a0.muscache.com/im/pictures/20e74de0-0eb8-4fca-afb8-b111875acdf5.jpg?im_q=medq&im_w=240'/>\r\n                <span onClick={()=>{\r\n                  addCityToSearch('New York')\r\n                  // this.setState({city: 'New York'})\r\n                }}>\r\n                      New York\r\n                    </span>\r\n                \r\n                </li> \r\n                <li className='li-city-item' >\r\n                <img src='https://a0.muscache.com/im/pictures/52e8083e-2de2-446d-a860-534eab250541.jpg?im_q=medq&im_w=240'/>\r\n                <span  onClick={()=>{\r\n                  // this.setState({city: 'London'})\r\n                  addCityToSearch('London')\r\n                }} >\r\n                   London\r\n                   </span>\r\n                </li>\r\n\r\n               \r\n                  <li className='li-city-item' >\r\n                  <img src='https://a0.muscache.com/im/pictures/7c309a70-bc93-4603-8d3b-9d4cd9bf75b2.jpg?im_q=medq&im_w=240'/>\r\n                  <span  onClick={()=>{\r\n                  // this.setState({addCityToSearch: ' Amsterdam'})\r\n                  addCityToSearch('Amsterdam')\r\n                }}>\r\n                    Amsterdam\r\n                    </span>\r\n                  </li>\r\n                \r\n\r\n           \r\n                  <li className='li-city-item' >\r\n                  <img src='https://a0.muscache.com/im/pictures/ca3737ef-0faf-46ba-b055-b4a2d99e2cea.jpg?im_q=medq&im_w=240'/>\r\n                  <span  onClick={()=>{\r\n                  // this.setState({addCityToSearch: 'Los Angeles'})\r\n                  addCityToSearch('Los Angeles')\r\n                }}>\r\n                     Los Angeles\r\n                     </span>\r\n                  </li>\r\n                  <li className='li-city-item' >\r\n                  <img src='https://a0.muscache.com/im/pictures/e639b7ab-aee3-48ee-9743-216684a51319.jpg?im_q=medq&im_w=240'/>\r\n                  <span  onClick={()=>{\r\n                  // this.setState({addCityToSearch: 'Los Angeles'})\r\n                  addCityToSearch('Barcelona')\r\n                }}>\r\n                     Barcelona\r\n                     </span>\r\n                  </li>\r\n                  <li className='li-city-item' >\r\n                  <img src='https://a0.muscache.com/im/pictures/585d1e53-e2e1-4baf-a34e-36301dd1e2da.jpg?im_q=medq&im_w=240'/>\r\n                  <span  onClick={()=>{\r\n                  // this.setState({addCityToSearch: 'Los Angeles'})\r\n                  addCityToSearch('Paris')\r\n                }}>\r\n                     Paris\r\n                     </span>\r\n                  </li>\r\n                  <li className='li-city-item' >\r\n                  <img src='https://a0.muscache.com/im/pictures/be4d3ba5-08d7-4afe-95a7-f2da6453886a.jpg?im_q=medq&im_w=240'/>\r\n                  <span  onClick={()=>{\r\n                  // this.setState({addCityToSearch: 'Los Angeles'})\r\n                  addCityToSearch('Tel Aviv-Yafo')\r\n                }}>\r\n                     Tel Aviv-Yafo\r\n                     </span>\r\n                  </li>\r\n                  <li className='li-city-item' >\r\n                  <img src='https://a0.muscache.com/im/pictures/7253e011-7c22-48fd-b75d-d0da35372397.jpg?im_q=medq&im_w=240'/>\r\n                  <span  onClick={()=>{\r\n                  // this.setState({addCityToSearch: 'Los Angeles'})\r\n                  addCityToSearch('Jerusalem')\r\n                }}>\r\n                     Jerusalem\r\n                     </span>\r\n                  </li>\r\n                \r\n              </ul>\r\n      \r\n    </div>\r\n\r\n  );\r\n    }\r\n}","import React from 'react'\r\nimport { userService } from '../services/user.service'\r\n\r\nexport class LoginSignup extends React.Component {\r\n    state = {\r\n        credentials: {\r\n            username: '',\r\n            password: '',\r\n            fullname: ''\r\n        },\r\n        isSignup: false,\r\n        users: []\r\n    }\r\n    // async componentDidMount() {\r\n    //     const users = await userService.getUsers()\r\n    //     this.setState({users})        \r\n    // }\r\n    clearState = () => {\r\n        const clearTemplate = {\r\n            credentials: {\r\n                username: '',\r\n                password: '',\r\n                fullname: ''\r\n            },\r\n            isSignup: false\r\n        }\r\n        this.setState({ clearTemplate })\r\n    }\r\n\r\n    handleChange = (ev) => {\r\n        const field = ev.target.name;\r\n        const value = ev.target.value;\r\n        this.setState({ credentials: { ...this.state.credentials, [field]: value } });\r\n    }\r\n\r\n    onLogin = (ev = null) => {\r\n        if (ev) ev.preventDefault();\r\n        if (!this.state.credentials.username) return;\r\n        this.props.onLogin(this.state.credentials);\r\n        this.clearState()\r\n    }\r\n\r\n    onSignup = (ev = null) => {\r\n        if (ev) ev.preventDefault();\r\n        if (!this.state.credentials.username || !this.state.credentials.password || !this.state.credentials.fullname) return;\r\n        this.props.onSignup(this.state.credentials);\r\n        this.clearState()\r\n    }\r\n\r\n    toggleSignup = () => {\r\n        this.setState({ isSignup: !this.state.isSignup })\r\n    }\r\n\r\n    render() {\r\n        const { username, password, fullname } = this.state.credentials;\r\n        const { isSignup, users } = this.state;\r\n        return (\r\n            <div className=\"login-page\">\r\n                <p>\r\n                    <button className=\"btn-link\" onClick={this.toggleSignup}>{!isSignup ? 'Signup' : 'Login'}</button>\r\n                </p>\r\n                {!isSignup && <form className=\"login-form\" onSubmit={this.onLogin}>\r\n                </form>}\r\n\r\n                <div className=\"signup-section\">\r\n                    {isSignup && <form className=\"signup-form\" onSubmit={this.onSignup}>\r\n                        <input\r\n                            type=\"text\"\r\n                            name=\"fullname\"\r\n                            value={fullname}\r\n                            placeholder=\"Fullname\"\r\n                            onChange={this.handleChange}\r\n                            required\r\n                        />\r\n                        <input\r\n                            type=\"text\"\r\n                            name=\"username\"\r\n                            value={username}\r\n                            placeholder=\"Username\"\r\n                            onChange={this.handleChange}\r\n                            required\r\n                        />\r\n                        <input\r\n                            type=\"password\"\r\n                            name=\"password\"\r\n                            value={password}\r\n                            placeholder=\"Password\"\r\n                            onChange={this.handleChange}\r\n                            required\r\n                        />\r\n                        <button >Signup!</button>\r\n                    </form>}\r\n                </div>\r\n\r\n            </div>\r\n        )\r\n    }\r\n}","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Link, NavLink } from \"react-router-dom\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faSearch, faUserCircle } from \"@fortawesome/free-solid-svg-icons\";\r\nimport routes from \"../routes\";\r\nimport logo from \"../assets/img/logo.png\";\r\nimport { loadStays } from \"../store/stay.actions.js\";\r\nimport { newOrder } from \"../store/order.actions.js\";\r\nimport { GuestsModal } from \"./GuestsModal\";\r\nimport {\r\n  onLogin,\r\n  onLogout,\r\n  onSignup,\r\n  loadUsers,\r\n  removeUser,\r\n  getCurrentUser,\r\n} from \"../store/user.actions.js\";\r\nimport { changePage, setModalPos, setPos } from \"../store/page.actions.js\";\r\nimport { saveNotifiToUser } from \"../store/user.actions.js\";\r\n\r\n// import {\r\n//   setNotifications,\r\n//   setNotificationNum,\r\n// } from \"../store/notification.actions.js\";\r\nimport { LoginSignup } from \"./LoginSignup.jsx\";\r\nimport { faAirbnb } from \"@fortawesome/free-brands-svg-icons\";\r\nimport { DropDownCity } from \"./DropDownCity\";\r\nimport { DateRange } from \"./DateRange\";\r\nimport { StayDetailsHeader } from \"./StayDetailsHeader\";\r\nimport { UserMsg } from \"./UserMsg.jsx\";\r\nimport { socketService } from \"../services/socket.service\";\r\nimport { Notifications } from \"../cmps/Notifications.jsx\";\r\n\r\nclass _AppHeader extends React.Component {\r\n  state = {\r\n    addCityToSearch: \"\",\r\n    scrollyPos: false,\r\n    numOfNotifications: 0,\r\n    filterBy: {\r\n      city: \"\",\r\n    },\r\n    newOrder: {\r\n      checkIn: \"\",\r\n      checkOut: \"\",\r\n      guests: {\r\n        adults: 0,\r\n        kids: 0,\r\n      },\r\n    },\r\n    isLoggedIn: false,\r\n    isMenueOpen: false,\r\n    isGuestsModalShown: false,\r\n    isDateRangeShown: false,\r\n    isCityDropDownShown: false,\r\n    isScrolled: false,\r\n  };\r\n\r\n  async componentDidMount() {\r\n    // const currUser = await this.props.getCurrentUser();\r\n    // if (currUser) {\r\n    //   this.setState({ isLoggedIn: true });\r\n    // }\r\n\r\n    // if(user?.savedNotifications){\r\n    // console.log('header-notifi',this.state.numOfNotifications);\r\n    // }\r\n\r\n    const user = await this.props.getCurrentUser();\r\n    if (user) {\r\n      this.setState({ isLoggedIn: true });\r\n    }\r\n\r\n    this.scrollPos();\r\n    window.addEventListener(\"scroll\", () => {\r\n      this.setState({ isDateRangeShown: false, isGuestsModalShown: false });\r\n    });\r\n    socketService.setup();\r\n    socketService.on(\"get notification\", this.msgFromAdmin);\r\n  }\r\n  // msgFromAdmin = (msg) => {\r\n  //   this.props.setNotifications({ date: this.formattedDates(Date.now()), msg });\r\n  //   this.props.setNotificationNum();\r\n  // };\r\n\r\n  formattedDates = (chosenDate) => {\r\n    if (!chosenDate) return \"Add dates\";\r\n    const date = new Date(chosenDate);\r\n    return date.toLocaleDateString(\"en-GB\");\r\n  };\r\n\r\n  updateNumOfGuests = (diff, type, ev) => {\r\n    ev.preventDefault();\r\n    ev.stopPropagation();\r\n\r\n    const { guests } = this.state.newOrder;\r\n    if (guests[type] + diff < 0) return;\r\n    guests[type] += diff;\r\n    this.setState((prevState) => ({\r\n      newOrder: { ...prevState.newOrder, guests },\r\n    }));\r\n  };\r\n  onCloseModal = () => {\r\n    this.setState({ isMenuOpen: false });\r\n    this.setState({ isGuestsModalShown: false });\r\n    this.setState({ isDateRangeShown: false });\r\n    this.setState({ isCityDropDownShown: false });\r\n  };\r\n\r\n  onNewOrder = () => {\r\n    this.props.newOrder(this.state.newOrder);\r\n  };\r\n  onSearch = () => {\r\n    this.props.filterStays(this.state);\r\n    this.clearState();\r\n  };\r\n\r\n  clearState = () => {\r\n    const clearTemplate = {\r\n      filterBy: {\r\n        city: \"\",\r\n      },\r\n      checkIn: \"\",\r\n      checkOut: \"\",\r\n      guests: {\r\n        adults: 0,\r\n        kids: 0,\r\n      },\r\n    };\r\n    this.setState({ ...clearTemplate });\r\n  };\r\n\r\n  handleChange = (ev) => {\r\n    const field = ev.target.name;\r\n    const value = ev.target.value;\r\n\r\n    this.setState((prevState) => ({\r\n      newOrder: { ...prevState.newOrder, [field]: value },\r\n    }));\r\n  };\r\n\r\n  addCityToSearch = (city) => {\r\n    this.setState((prevState) => ({\r\n      filterBy: { ...prevState.filterBy, city: city },\r\n    }));\r\n  };\r\n\r\n  handleChangeSearch = (ev) => {\r\n    const field = ev.target.name;\r\n    const value = ev.target.value;\r\n\r\n    this.setState((prevstate) => ({\r\n      filterBy: { ...prevstate.filterBy, city: value },\r\n    }));\r\n  };\r\n  toggleMenu = () => {\r\n    this.setState({ isMenuOpen: !this.state.isMenuOpen });\r\n  };\r\n\r\n  onLogin = (credentials) => {\r\n    // this.props.onLogin(credentials);\r\n  };\r\n  onSignup = (credentials) => {\r\n    this.props.onSignup(credentials);\r\n  };\r\n  onLogout = () => {\r\n    this.props.onLogout();\r\n    this.setState({ isLoggedIn: false });\r\n  };\r\n\r\n  handleDates = (time) => {};\r\n  scrollPos = () => {\r\n    document.addEventListener(\r\n      \"scroll\",\r\n      function (e) {\r\n        var pos = window.scrollY;\r\n        if (pos > 80) {\r\n          this.setState({ scrollyPos: true });\r\n        } else {\r\n          this.setState({ scrollyPos: false });\r\n        }\r\n        if (pos > 1520) {\r\n          this.setState({ isScrolled: true });\r\n        } else {\r\n          this.setState({ isScrolled: false });\r\n        }\r\n      }.bind(this)\r\n    );\r\n  };\r\n\r\n  toggleDateCmp = () => {\r\n    this.setState({ isDateRangeShown: !this.state.isDateRangeShown });\r\n  };\r\n\r\n  setDates = (start, end) => {\r\n    const startDay = Date.parse(start);\r\n    const endDay = Date.parse(end);\r\n    this.setState((prevState) => ({\r\n      newOrder: {\r\n        ...prevState.newOrder,\r\n        checkIn: startDay,\r\n        checkOut: endDay,\r\n      },\r\n    }));\r\n  };\r\n\r\n  formattedDates = (chosenDate) => {\r\n    if (!chosenDate) return \"Add dates\";\r\n    const date = new Date(chosenDate);\r\n    return date.toLocaleDateString(\"en-GB\");\r\n  };\r\n  getReviewsAverage = (reviews) => {\r\n    const average =\r\n      reviews.reduce(function (sum, value) {\r\n        return sum + value.ratings.avg;\r\n      }, 0) / reviews.length;\r\n\r\n    return average.toFixed(2);\r\n  };\r\n\r\n  render() {\r\n    const {\r\n      isModalOpen,\r\n      filterBy,\r\n      isMenuOpen,\r\n      isGuestsModalShown,\r\n      isDateRangeShown,\r\n      isCityDropDownShown,\r\n      scrollyPos,\r\n      isScrolled,\r\n      isNotifiSeen,\r\n      isLoggedIn,\r\n    } = this.state;\r\n    const { checkIn, checkOut, guests } = this.state.newOrder;\r\n    const { user, currPage } = this.props;\r\n    let notifications;\r\n    console.log(\"#####\", user);\r\n    if (user && user.savedNotifications.length) {\r\n      const { savedNotifications } = user;\r\n      notifications = savedNotifications.filter(\r\n        (savedNotification) => !savedNotification.isRead\r\n      );\r\n    } else {\r\n      notifications = false;\r\n    }\r\n    const { left, top } = this.props.relativePos;\r\n    return (\r\n      <section>\r\n        {isScrolled && currPage === \"details\" && <StayDetailsHeader />}\r\n        {(currPage !== \"details\" ||\r\n          (currPage === \"details\" && !isScrolled)) && (\r\n          <header\r\n            className={\r\n              currPage === \"details\"\r\n                ? \"mini-header details-container\"\r\n                : (!scrollyPos && currPage === \"home\") || currPage === \"\"\r\n                ? \"app-header main-container\"\r\n                : \"mini-header main-container\"\r\n            }\r\n          >\r\n            <Link to=\"/\" className=\"logo\">\r\n              Travel <FontAwesomeIcon className=\"airbnb\" icon={faAirbnb} /> Live\r\n            </Link>\r\n            <nav>\r\n              <div className=\"nav-links\">\r\n                <Link to=\"/explore\" className=\"nav-link-explore\">\r\n                  Explore\r\n                </Link>\r\n                {/* <Link to=\"/host\" className=\"nav-link-become\">\r\n                  Switch to hosting\r\n                </Link> */}\r\n                {!user && (\r\n                  <Link to=\"/login\" className=\"nav-link-become\">\r\n                    Become a Host\r\n                  </Link>\r\n                )}\r\n                {user && user.isHost && (\r\n                  <Link to={`/host/${user._id}`} className=\"nav-link-become\">\r\n                    Switch to hosting\r\n                  </Link>\r\n                )}\r\n                {user && !user.isHost && (\r\n                  <Link to=\"/host\" className=\"nav-link-become\">\r\n                    Switch to hosting\r\n                  </Link>\r\n                )}\r\n\r\n                <div className=\"menu\">\r\n                  {user && (\r\n                    <span\r\n                      className={\r\n                        notifications.length ? \"notifiShown\" : \"notifiNotShown\"\r\n                      }\r\n                    >\r\n                      {notifications.length}\r\n                    </span>\r\n                  )}\r\n                  <button\r\n                    className={\r\n                      notifications.length ? \"btn-menu-toggle\" : \"btn-menu\"\r\n                    }\r\n                    onClick={this.toggleMenu}\r\n                  >\r\n                    ☰ <FontAwesomeIcon className=\"user\" icon={faUserCircle} />\r\n                  </button>\r\n\r\n                  <ul className={`user-menu ${isMenuOpen ? \"open\" : \"closed\"}`}>\r\n                    <li\r\n                      className={`drop-down-item ${user ? \"show\" : \"not-show\"}`}\r\n                    >\r\n                      {user && (\r\n                        <Link\r\n                          to={`/notifications/${user._id}`}\r\n                          className=\"nav-link\"\r\n                        >\r\n                          Notifications\r\n                        </Link>\r\n                      )}\r\n                    </li>\r\n                    <li\r\n                      className={`drop-down-item ${user ? \"show\" : \"not-show\"}`}\r\n                    >\r\n                      {user && (\r\n                        <Link to=\"/orders\" className=\"nav-link\">\r\n                          Trips\r\n                        </Link>\r\n                      )}\r\n                    </li>\r\n                    <li\r\n                      className={`drop-down-item ${user ? \"show\" : \"not-show\"}`}\r\n                    >\r\n                      {user && (\r\n                        <Link to=\"/wishList\" className=\"nav-link\">\r\n                          Wishlists\r\n                        </Link>\r\n                      )}\r\n                    </li>\r\n                    <li\r\n                      className={`drop-down-item ${user ? \"show\" : \"not-show\"}`}\r\n                    >\r\n                      {user && (\r\n                        <Link to={`/host/${user._id}`} className=\"nav-link\">\r\n                          Dashboard\r\n                        </Link>\r\n                      )}\r\n                    </li>\r\n                    <li\r\n                      className={`drop-down-item ${user ? \"show\" : \"not-show\"}`}\r\n                    >\r\n                      {user && (\r\n                        <Link to={`/user/${user._id}`} className=\"nav-link\">\r\n                          Account\r\n                        </Link>\r\n                      )}{\" \"}\r\n                    </li>\r\n\r\n                    {!user && (\r\n                      <li\r\n                        className=\"drop-down-item login-btn\"\r\n                        onClick={this.onLogin}\r\n                      >\r\n                        <Link to=\"/login\" className=\"nav-link\">\r\n                          Login\r\n                        </Link>\r\n                      </li>\r\n                    )}\r\n                    {!user && (\r\n                      <li className=\"drop-down-item\" onClick={this.onLogin}>\r\n                        <Link to=\"\" className=\"nav-link\">\r\n                          Host your home\r\n                        </Link>\r\n                      </li>\r\n                    )}\r\n                    {!user && (\r\n                      <li className=\"drop-down-item\" onClick={this.onLogin}>\r\n                        <Link to=\"\" className=\"nav-link\">\r\n                          About\r\n                        </Link>\r\n                      </li>\r\n                    )}\r\n\r\n                    <li className=\"drop-down-item\" onClick={this.onLogin}>\r\n                      <Link to=\"\" className=\"nav-link\">\r\n                        Help\r\n                      </Link>\r\n                    </li>\r\n\r\n                    {user && (\r\n                      <li\r\n                        className={`drop-down-item ${\r\n                          user ? \"show\" : \"not-show\"\r\n                        }`}\r\n                        onClick={this.onLogout}\r\n                      >\r\n                        <p className=\"logout-btn\"> Log Out </p>\r\n                      </li>\r\n                    )}\r\n                  </ul>\r\n                </div>\r\n              </div>\r\n            </nav>\r\n\r\n            <form className=\"mini-header-search\">\r\n              {/* <label className='search-item mini' htmlFor='city-search'> */}\r\n\r\n              <span className=\"mini-search-item\">\r\n                {\" \"}\r\n                {filterBy.city ? filterBy.city : \"Start your search\"}\r\n              </span>\r\n              {/* <input\r\n                  className='mini-search-item'\r\n                  type='text'\r\n                  name='city'\r\n                  id='city-search'\r\n                  value={filterBy.city}\r\n                  placeholder='Search'\r\n                  autoComplete='off'\r\n                  onChange={this.handleChangeSearch}\r\n                  \r\n                /> */}\r\n              {/* </label> */}\r\n              <button className=\"mini-search-btn\">\r\n                <FontAwesomeIcon icon={faSearch} />\r\n              </button>\r\n            </form>\r\n            <form className=\"header-search\" onSubmit={this.onSearch}>\r\n              <label className=\"search-item mini\" htmlFor=\"city\">\r\n                Location\r\n                <input\r\n                  className=\"search-item\"\r\n                  type=\"text\"\r\n                  name=\"city\"\r\n                  id=\"city\"\r\n                  value={filterBy.city}\r\n                  placeholder=\"Where are you going?\"\r\n                  autoComplete=\"off\"\r\n                  onChange={this.handleChangeSearch}\r\n                  onClick={() => {\r\n                    this.setState({\r\n                      isCityDropDownShown: !isCityDropDownShown,\r\n                    });\r\n                  }}\r\n                />\r\n              </label>\r\n              {isCityDropDownShown && (\r\n                <DropDownCity addCityToSearch={this.addCityToSearch} />\r\n              )}\r\n              <label className=\"search-item\" htmlFor=\"search-checkIn\">\r\n                Check in\r\n                <input\r\n                  className=\"search-item\"\r\n                  type=\"text\"\r\n                  name=\"checkIn\"\r\n                  value={this.formattedDates(checkIn)}\r\n                  onChange={this.handleChange}\r\n                  id=\"search-checkIn\"\r\n                  placeholder=\"Add Dates\"\r\n                  autoComplete=\"off\"\r\n                  onClick={(ev) => {\r\n                    const left = ev.screenX -50 ;\r\n                    const top = ev.screenY - 70;\r\n                    this.props.setPos({ left, top });\r\n                    this.setState({ isDateRangeShown: !isDateRangeShown });\r\n                  }}\r\n                ></input>\r\n              </label>\r\n\r\n              <label className=\"search-item\" htmlFor=\"search-checkOut\">\r\n                Check out\r\n                <input\r\n                  className=\"search-item\"\r\n                  type=\"text\"\r\n                  name=\"checkOut\"\r\n                  value={this.formattedDates(checkOut)}\r\n                  onChange={this.handleChange}\r\n                  id=\"search-checkOut\"\r\n                  placeholder=\"Add Dates\"\r\n                  autoComplete=\"off\"\r\n                  onClick={(ev) => {\r\n                    const left = ev.screenX - 20;\r\n                    const top = ev.screenY - 70;\r\n                    this.props.setPos({ left, top });\r\n                    this.setState({ isDateRangeShown: !isDateRangeShown });\r\n                  }}\r\n                ></input>\r\n              </label>\r\n\r\n              <label\r\n                className=\"search-item guests-search\"\r\n                htmlFor=\"search-guests\"\r\n                onClick={(ev) => {\r\n                  const left = ev.clientX-35;\r\n                  const top = ev.clientY+25;\r\n\r\n                  this.props.setPos({ left, top });\r\n                  this.setState((prevState) => ({\r\n                    isGuestsModalShown: !prevState.isGuestsModalShown,\r\n                  }));\r\n                }}\r\n              >\r\n                Guests\r\n                <input\r\n                  name=\"guests\"\r\n                  value={guests.kids + guests.adults}\r\n                  onChange={this.handleChange}\r\n                  id=\"order-guests\"\r\n                  required\r\n                ></input>\r\n              </label>\r\n\r\n              <Link to={`/explore?city=${this.state.filterBy.city}`}>\r\n                {/* <Link to={`/explore?city=${this.state.filterBy.city}&checkIn=${this.state.newOrder.checkIn}&checkOut=${this.state.newOrder.checkIn}`}> */}\r\n                {/* <Link to={`/explore?city=${this.state.filterBy.city}&checkIn=${this.state.newOrder.checkIn}`}> */}\r\n                <button\r\n                  className=\"search-item search-btn\"\r\n                  onClick={() => {\r\n                    this.onNewOrder();\r\n                  }}\r\n                >\r\n                  {\" \"}\r\n                  <FontAwesomeIcon icon={faSearch} />\r\n                </button>\r\n              </Link>\r\n\r\n              <span className=\"stay-rate\"></span>\r\n            </form>\r\n          </header>\r\n        )}\r\n        {(isMenuOpen ||\r\n          isGuestsModalShown ||\r\n          isDateRangeShown ||\r\n          isModalOpen ||\r\n          isCityDropDownShown) && (\r\n          <div className=\"screen\" onClick={this.onCloseModal}></div>\r\n        )}\r\n        {isDateRangeShown && (\r\n          <DateRange\r\n            toggleDateCmp={this.toggleDateCmp}\r\n            setDates={this.setDates}\r\n          />\r\n        )}\r\n        {isGuestsModalShown && (\r\n          <div className=\"guests-modal-div-container\" style={{ left, top }}>\r\n            <GuestsModal\r\n              guests={guests}\r\n              updateNumOfGuests={this.updateNumOfGuests}\r\n            />\r\n          </div>\r\n        )}\r\n        <UserMsg />\r\n      </section>\r\n    );\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    users: state.userModule.users,\r\n    user: state.userModule.user,\r\n    count: state.userModule.count,\r\n    notifiStatus: state.userModule.notifiStatus,\r\n    isLoading: state.systemModule.isLoading,\r\n    stays: state.stayModule.stays,\r\n    // filterBy: state.stayModule.stays,\r\n    filterBy: state.stayModule.filterBy,\r\n    newOrder: state.orderModule.newOrder,\r\n    currPage: state.pageModule.currPage,\r\n    currPage: state.pageModule.currPage,\r\n    modalPos: state.pageModule.modalPos,\r\n    relativePos: state.pageModule.relativePos,\r\n\r\n    // notificationsNum: state.notificationModule.numOfNotifications,\r\n    // notifications: state.notificationModule.notifications,\r\n  };\r\n}\r\nconst mapDispatchToProps = {\r\n  onLogin,\r\n  onSignup,\r\n  onLogout,\r\n  getCurrentUser,\r\n  loadStays,\r\n  newOrder,\r\n  changePage,\r\n  saveNotifiToUser,\r\n  setModalPos,\r\n  setPos,\r\n};\r\n\r\nexport const AppHeader = connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(_AppHeader);\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { loadStays } from '../store/stay.actions.js';\r\nimport { Link } from 'react-router-dom';\r\nimport { onSetCurrStay } from '../store/stay.actions';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faGlobe } from '@fortawesome/free-solid-svg-icons';\r\nimport {\r\n  faFacebook,\r\n  faInstagram,\r\n  faTwitter,\r\n} from '@fortawesome/free-brands-svg-icons';\r\n\r\nclass _AppFooter extends React.Component {\r\n  state = { stays: [] };\r\n  async componentDidMount() {\r\n    const stays = await this.props.loadStays();\r\n    this.setState({ stays });\r\n  }\r\n\r\n  render() {\r\n    const { isModalOpen, msg } = this.state;\r\n    const { stays } = this.state;\r\n    const cities = [\r\n      'Tel Aviv-Yafo',\r\n      'Jerusalem',\r\n      'London',\r\n      'New York',\r\n      'Barcelona',\r\n      'Los Angeles',\r\n      'Paris',\r\n      'Amsterdam',\r\n    ];\r\n    const countries = [\r\n      'Israel',\r\n      'Israel',\r\n      'England',\r\n      'United States',\r\n      'Spain',\r\n      'United States',\r\n      'France',\r\n      'Netherlands',\r\n    ];\r\n    const { currPage } = this.props;\r\n    console.log(currPage);\r\n    return (\r\n      <footer\r\n        className={\r\n          currPage === 'details'\r\n            ? 'app-footer details-container'\r\n            : 'app-footer main-container'\r\n        }\r\n      >\r\n        {/* {isModalOpen && (\r\n          <div id='modal1' class='modal1'>\r\n            <div class='modal-content'>\r\n              <h4>{msg}</h4>\r\n            </div>\r\n            <div class='modal-footer'>\r\n              <button onClick={this.closeModal}>✕</button>\r\n            </div>\r\n          </div>\r\n        )} */}\r\n        <section className='footer-container'>\r\n          <div className='footer-links-list'>\r\n            <p>Top Rated</p>\r\n            {stays.slice(0, 8).map((stay) => {\r\n              return (\r\n                <Link\r\n                  className='footer-links-item'\r\n                  key={stay._id}\r\n                  to={`/stay/${stay._id}`}\r\n                  onClick={async () => {\r\n                    await this.props.onSetCurrStay(stay._id);\r\n                  }}\r\n                >\r\n                  <p>{stay.title}</p>\r\n                  <p>{stay.loc.address}</p>\r\n                </Link>\r\n              );\r\n            })}\r\n          </div>\r\n          <div className='footer-links-list'>\r\n            <p>Nearby</p>\r\n            {stays.slice(0, 8).map((stay) => {\r\n              return (\r\n                <Link\r\n                  className='footer-links-item'\r\n                  key={stay._id}\r\n                  to={`/stay/${stay._id}`}\r\n                  onClick={async () => {\r\n                    await this.props.onSetCurrStay(stay._id);\r\n                  }}\r\n                >\r\n                  <p>{stay.title}</p>\r\n                  <p>{stay.loc.address}</p>\r\n                </Link>\r\n              );\r\n            })}\r\n          </div>\r\n          <div className='footer-links-list'>\r\n            <p>Cities</p>\r\n            {cities.map((city, idx) => {\r\n              return (\r\n                <Link\r\n                  key={idx}\r\n                  to={`/explore?city=${'city'}`}\r\n                  className='footer-links-item'\r\n                >\r\n                  <p>{city}</p>\r\n                  <p>{countries[idx]}</p>\r\n                </Link>\r\n              );\r\n            })}\r\n          </div>\r\n        </section>\r\n        <div className='footer-bottom'>\r\n          <div>\r\n            <p>© 2021 Travel&Live, Inc.</p>\r\n            <span className='small-dot'>·</span>\r\n            <Link className='link'>\r\n              <p>About</p>\r\n            </Link>\r\n            <span>·</span>\r\n            <Link to='/login' className='link'>\r\n              <p>Login</p>\r\n            </Link>\r\n            <span>·</span>\r\n            <Link to='/host' className='link'>\r\n              <p>Become a host</p>\r\n            </Link>\r\n          </div>\r\n          <div className='media-container'>\r\n            <p>\r\n              <span>\r\n                <FontAwesomeIcon className='amenity-icon' icon={faGlobe} />\r\n              </span>\r\n\r\n              <span>English (US)</span>\r\n              <span>$US</span>\r\n            </p>\r\n            <p>\r\n              <span className='social-media-icon'>\r\n                <FontAwesomeIcon className='amenity-icon' icon={faTwitter} />\r\n              </span>\r\n              <span className='social-media-icon'>\r\n                <FontAwesomeIcon className='amenity-icon' icon={faFacebook} />\r\n              </span>\r\n              <span className='social-media-icon'>\r\n                <FontAwesomeIcon className='amenity-icon' icon={faInstagram} />\r\n              </span>\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </footer>\r\n    );\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    stays: state.stayModule.stays,\r\n    currPage: state.pageModule.currPage,\r\n  };\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n  loadStays,\r\n  onSetCurrStay,\r\n};\r\n\r\nexport const AppFooter = connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(_AppFooter);\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { loadAndWatchUser } from '../store/user.actions';\r\nimport { changePage } from '../store/page.actions.js';\r\nexport class _UserDetails extends Component {\r\n  componentDidMount() {\r\n    window.scrollTo(0, 0);\r\n    this.props.changePage('user');\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <section className='user-details main-container'>\r\n        <h1>User Details</h1>\r\n      </section>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {};\r\n};\r\nconst mapDispatchToProps = {\r\n  changePage,\r\n};\r\n\r\nexport const UserDetails = connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(_UserDetails);\r\n","import React from 'react';\r\n\r\n// const { Switch, Route } = ReactRouterDOM\r\nimport { Switch, Route } from 'react-router';\r\n\r\nimport routes from './routes';\r\n\r\nimport { AppHeader } from './cmps/AppHeader.jsx';\r\nimport { AppFooter } from './cmps/AppFooter.jsx';\r\nimport { UserDetails } from './pages/UserDetails.jsx';\r\n\r\nexport class RootCmp extends React.Component {\r\n  render() {\r\n    return (\r\n      <div className=\"RootCmp\">\r\n        <AppHeader />\r\n        <main>\r\n          <Switch>\r\n            {routes.map((route) => (\r\n              <Route\r\n                key={route.path}\r\n                exact\r\n                component={route.component}\r\n                path={route.path}\r\n              />\r\n            ))}\r\n            {/* <Route path=\"/user/:id\" component={UserDetails} /> */}\r\n          </Switch>\r\n        </main>\r\n        <AppFooter />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { BrowserRouter as Router } from 'react-router-dom'\r\nimport { Provider } from 'react-redux'\r\n\r\nimport {store} from './store/store'\r\nimport {RootCmp} from './root-cmp';\r\nimport './assets/styles/main.scss';\r\n\r\n\r\n\r\nReactDOM.render(\r\n<React.StrictMode>\r\n    <Provider store={store}>\r\n      <Router>\r\n        <RootCmp />\r\n      </Router>\r\n    </Provider>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n\r\n"],"sourceRoot":""}